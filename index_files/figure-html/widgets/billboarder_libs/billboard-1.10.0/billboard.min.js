/*!
 * Copyright (c) 2017 ~ present NAVER Corp.
 * billboard.js project is licensed under the MIT license
 * 
 * billboard.js, JavaScript chart library
 * http://naver.github.io/billboard.js/
 * 
 * @version 1.10.0
 */
!function webpackUniversalModuleDefinition(t,e){if("object"==typeof exports&&"object"==typeof module)module.exports=e(require("d3-time-format"),require("d3-selection"),require("d3-transition"),require("d3-axis"),require("d3-brush"),require("d3-scale"),require("d3-dsv"),require("d3-drag"),require("d3-shape"),require("d3-interpolate"),require("d3-color"),require("d3-zoom"),require("d3-ease"));else if("function"==typeof define&&define.amd)define(["d3-time-format","d3-selection","d3-transition","d3-axis","d3-brush","d3-scale","d3-dsv","d3-drag","d3-shape","d3-interpolate","d3-color","d3-zoom","d3-ease"],e);else{var i="object"==typeof exports?e(require("d3-time-format"),require("d3-selection"),require("d3-transition"),require("d3-axis"),require("d3-brush"),require("d3-scale"),require("d3-dsv"),require("d3-drag"),require("d3-shape"),require("d3-interpolate"),require("d3-color"),require("d3-zoom"),require("d3-ease")):e(t.d3,t.d3,t.d3,t.d3,t.d3,t.d3,t.d3,t.d3,t.d3,t.d3,t.d3,t.d3,t.d3);for(var n in i)("object"==typeof exports?exports:t)[n]=i[n]}}(this,function(i,n,a,r,o,s,c,l,u,d,g,h,f){return x={},__webpack_require__.m=p=[function(t,e,i){i(1),t.exports=i(28)},function(t,e,i){},function(t,e){t.exports=function _classCallCheck(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}},function(t,e,i){var n=i(4),a=i(5),r=i(6);t.exports=function _slicedToArray(t,e){return n(t)||a(t,e)||r()}},function(t,e){t.exports=function _arrayWithHoles(t){if(Array.isArray(t))return t}},function(t,e){t.exports=function _iterableToArrayLimit(t,e){var i=[],n=!0,a=!1,r=void 0;try{for(var o,s=t[Symbol.iterator]();!(n=(o=s.next()).done)&&(i.push(o.value),!e||i.length!==e);n=!0);}catch(t){a=!0,r=t}finally{try{n||null==s.return||s.return()}finally{if(a)throw r}}return i}},function(t,e){t.exports=function _nonIterableRest(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}},function(t,e){function _defineProperties(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}t.exports=function _createClass(t,e,i){return e&&_defineProperties(t.prototype,e),i&&_defineProperties(t,i),t}},function(t,e){t.exports=i},function(t,e){t.exports=n},function(t,e){t.exports=a},function(t,e){t.exports=r},function(t,e,i){var n=i(13),a=i(14),r=i(15);t.exports=function _toConsumableArray(t){return n(t)||a(t)||r()}},function(t,e){t.exports=function _arrayWithoutHoles(t){if(Array.isArray(t)){for(var e=0,i=new Array(t.length);e<t.length;e++)i[e]=t[e];return i}}},function(t,e){t.exports=function _iterableToArray(t){if(Symbol.iterator in Object(t)||"[object Arguments]"===Object.prototype.toString.call(t))return Array.from(t)}},function(t,e){t.exports=function _nonIterableSpread(){throw new TypeError("Invalid attempt to spread non-iterable instance")}},function(e,t){function _typeof2(t){return(_typeof2="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function _typeof2(t){return typeof t}:function _typeof2(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function _typeof(t){return"function"==typeof Symbol&&"symbol"===_typeof2(Symbol.iterator)?e.exports=_typeof=function _typeof(t){return _typeof2(t)}:e.exports=_typeof=function _typeof(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":_typeof2(t)},_typeof(t)}e.exports=_typeof},function(t,e){t.exports=o},function(t,n,a){"use strict";(function(t){a.d(n,"b",function(){return e}),a.d(n,"a",function(){return i});var e=lb(self)||lb(window)||lb(t)||lb(globalThis)||Function("return this")(),i=e&&e.document;function lb(t){return void 0!==t&&t}}).call(this,a(19))},function(t,e){var i;i=function(){return this}();try{i=i||new Function("return this")()}catch(t){"object"==typeof window&&(i=window)}t.exports=i},function(t,e){t.exports=s},function(t,e){t.exports=c},function(t,e){t.exports=l},function(t,e){t.exports=u},function(t,e){t.exports=d},function(t,e){t.exports=g},function(t,e){t.exports=h},function(t,e){t.exports=f},function(t,e,i){"use strict";i.r(e);function _b(t){return t||0===t}function ac(t){return"function"==typeof t}function bc(t){return"string"==typeof t}function cc(t){return"number"==typeof t}function dc(t){return void 0===t}function ec(t){return void 0!==t}function fc(t){return"boolean"==typeof t}function gc(t){return 10*Math.ceil(t/10)}function hc(t){return Math.ceil(t)+.5}function ic(t){return t[1]-t[0]}function jc(t){return"object"===h()(t)}function kc(t){return dc(t)||null===t||bc(t)&&0===t.length||jc(t)&&!(t instanceof Date)&&0===Object.keys(t).length||cc(t)&&isNaN(t)}function lc(t){return!kc(t)}function mc(t){return t&&t.constructor===Array}function nc(t){return t&&!t.nodeType&&jc(t)&&!mc(t)}function oc(t,e,i){return ec(t[e])?t[e]:i}function qc(t){for(var e=ac(t),i=arguments.length,n=Array(1<i?i-1:0),a=1;a<i;a++)n[a-1]=arguments[a];return e&&t.call.apply(t,n),e}function rc(t){return bc(t)?t.replace(/</g,"&lt;").replace(/>/g,"&gt;"):t}function sc(i,t){var n=2<arguments.length&&void 0!==arguments[2]?arguments[2]:[-1,1],e=!!(3<arguments.length&&void 0!==arguments[3])&&arguments[3];if(i&&bc(t))if(-1===t.indexOf("\n"))i.text(t);else{var a=[i.text(),t].map(function(t){return t.replace(/[\s\n]/g,"")});if(a[0]!==a[1]){var r=t.split("\n"),o=e?r.length-1:1;i.html(""),r.forEach(function(t,e){i.append("tspan").attr("x",0).attr("dy","".concat(0===e?n[0]*o:n[1],"em")).text(t)})}}}function tc(t){var e=t.getBBox(),i=e.x,n=e.y,a=e.width,r=e.height;return[{x:i,y:n+r},{x:i,y:n},{x:i+a,y:n},{x:i+a,y:n+r}]}function vc(t){var e=null,i=B.event,n=t.context||t.main;return i&&"BrushEvent"===i.constructor.name?e=i.selection:n&&(e=n.select(".".concat(M.brush)).node())&&(e=Object(f.brushSelection)(e)),e}function wc(){var t=!(0<arguments.length&&void 0!==arguments[0])||arguments[0];return Math.random()+(t?"":0)}function xc(t){var e=vc(t);return!e||e[0]===e[1]}function yc(){var t=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{},e=1<arguments.length?arguments[1]:void 0;for(var i in e)t[i]=e[i];return t}function zc(t){return t.charAt(0).toUpperCase()+t.slice(1)}function Ac(t){return[].slice.call(t)}function Dc(t){return t&&t.length?t.reduce(function(t,e){return t.concat(e)}):[]}function Fc(t){var e,i=!(1<arguments.length&&void 0!==arguments[1])||arguments[1];return t[0]instanceof Date?e=i?function(t,e){return t-e}:function(t,e){return e-t}:i&&!t.every(isNaN)?e=function(t,e){return t-e}:i||(e=function(t,e){return(e<t?-1:t<e&&1)||t===e&&0}),t.concat().sort(e)}function Gc(t,e){var i=e.filter(function(t){return lc(t)});return i.length?cc(i[0])?i=Math[t].apply(Math,C()(i)):i[0]instanceof Date&&(i=Fc(i,"min"===t)[0]):i=void 0,i}function Hc(t,e){for(var i=[],n=t;n<e;n++)i.push(n);return i}function Jc(t,e){var i=t;for(var n in e)i=i.replace(new RegExp("{=".concat(n,"}"),"g"),e[n]);return i}var n,a=i(2),r=i.n(a),o=i(3),k=i.n(o),s=i(7),c=i.n(s),l=i(8),B=i(9),P=i(10),u=i(11),M={arc:"bb-arc",arcs:"bb-arcs",area:"bb-area",areas:"bb-areas",axis:"bb-axis",axisX:"bb-axis-x",axisXLabel:"bb-axis-x-label",axisY:"bb-axis-y",axisY2:"bb-axis-y2",axisY2Label:"bb-axis-y2-label",axisYLabel:"bb-axis-y-label",bar:"bb-bar",bars:"bb-bars",brush:"bb-brush",button:"bb-button",buttonZoomReset:"bb-zoom-reset",chart:"bb-chart",chartArc:"bb-chart-arc",chartArcs:"bb-chart-arcs",chartArcsBackground:"bb-chart-arcs-background",chartArcsGaugeMax:"bb-chart-arcs-gauge-max",chartArcsGaugeMin:"bb-chart-arcs-gauge-min",chartArcsGaugeUnit:"bb-chart-arcs-gauge-unit",chartArcsTitle:"bb-chart-arcs-title",chartArcsGaugeTitle:"bb-chart-arcs-gauge-title",chartBar:"bb-chart-bar",chartBars:"bb-chart-bars",chartLine:"bb-chart-line",chartLines:"bb-chart-lines",chartRadar:"bb-chart-radar",chartRadars:"bb-chart-radars",chartText:"bb-chart-text",chartTexts:"bb-chart-texts",circle:"bb-circle",circles:"bb-circles",colorPattern:"bb-color-pattern",colorScale:"bb-colorscale",defocused:"bb-defocused",dragarea:"bb-dragarea",empty:"bb-empty",eventRect:"bb-event-rect",eventRects:"bb-event-rects",eventRectsMultiple:"bb-event-rects-multiple",eventRectsSingle:"bb-event-rects-single",focused:"bb-focused",gaugeValue:"bb-gauge-value",grid:"bb-grid",gridLines:"bb-grid-lines",legendBackground:"bb-legend-background",legendItem:"bb-legend-item",legendItemEvent:"bb-legend-item-event",legendItemFocused:"bb-legend-item-focused",legendItemHidden:"bb-legend-item-hidden",legendItemPoint:"bb-legend-item-point",legendItemTile:"bb-legend-item-tile",level:"bb-level",levels:"bb-levels",line:"bb-line",lines:"bb-lines",region:"bb-region",regions:"bb-regions",selectedCircle:"bb-selected-circle",selectedCircles:"bb-selected-circles",shape:"bb-shape",shapes:"bb-shapes",stanfordElements:"bb-stanford-elements",stanfordLine:"bb-stanford-line",stanfordLines:"bb-stanford-lines",stanfordRegion:"bb-stanford-region",stanfordRegions:"bb-stanford-regions",target:"bb-target",text:"bb-text",texts:"bb-texts",title:"bb-title",tooltip:"bb-tooltip",tooltipContainer:"bb-tooltip-container",tooltipName:"bb-tooltip-name",xgrid:"bb-xgrid",xgridFocus:"bb-xgrid-focus",xgridLine:"bb-xgrid-line",xgridLines:"bb-xgrid-lines",xgrids:"bb-xgrids",ygrid:"bb-ygrid",ygridLine:"bb-ygrid-line",ygridLines:"bb-ygrid-lines",ygrids:"bb-ygrids",zoomBrush:"bb-zoom-brush",zoomRect:"bb-zoom-rect",EXPANDED:"_expanded_",SELECTED:"_selected_",INCLUDED:"_included_"},d=i(12),C=i.n(d),g=i(16),h=i.n(g),f=i(17),O=i(18),p=(n=function(i){for(var t=arguments.length,e=Array(1<t?t-1:0),n=1;n<t;n++)e[n-1]=arguments[n];if(!e.length||1===e.length&&!e[0])return i;var a=e.shift();return nc(i)&&nc(a)&&Object.keys(a).forEach(function(t){var e=a[t];nc(e)?(i[t]||(i[t]={}),i[t]=p(i[t],e)):i[t]=mc(e)?e.concat():e}),p.apply(void 0,[i].concat(e))},mergeObj.toString=function(){return n.toString()},mergeObj),v={mouse:function(){try{return new MouseEvent("t"),function(t,e){var i=2<arguments.length&&void 0!==arguments[2]?arguments[2]:{bubbles:!1,cancelable:!1,screenX:0,screenY:0,clientX:0,clientY:0};t.dispatchEvent(new MouseEvent(e,i))}}catch(t){return function(t,e){var i=2<arguments.length&&void 0!==arguments[2]?arguments[2]:{bubbles:!1,cancelable:!1,screenX:0,screenY:0,clientX:0,clientY:0},n=O.a.createEvent("MouseEvent");n.initMouseEvent(e,i.bubbles,i.cancelable,O.b,0,i.screenX,i.screenY,i.clientX,i.clientY,!1,!1,!1,!1,0,null),t.dispatchEvent(n)}}}(),touch:function touch(t,e,i){var n=new Touch(Object.assign({identifier:Date.now(),target:t,radiusX:2.5,radiusY:2.5,rotationAngle:10,force:.5},i));t.dispatchEvent(new TouchEvent(e,{cancelable:!0,bubbles:!0,shiftKey:!0,touches:[n],targetTouches:[],changedTouches:[n]}))}};function mergeObj(){return n.apply(this,arguments)}function Nc(t,e){var i=t.config.axis_rotated;return e?i:!i}function Oc(t){return"".concat(M.axis," ").concat(M["axis".concat(zc(t))])}function Rc(t){r()(this,Rc);var e=new b(this);this.plugins=[],(this.internal=e).loadConfig(t),e.beforeInit(t),e.init(),e.afterInit(t),function bindThis(e,i,n){Object.keys(e).forEach(function(t){i[t]=e[t].bind(n),Object.keys(e[t]).length&&bindThis(e[t],i[t],n)})}(Rc.prototype,this,this)}function Sc(){return r()(this,Sc),{bindto:"#chart",clipPath:!0,svg_classname:void 0,size_width:void 0,size_height:void 0,padding_left:void 0,padding_right:void 0,padding_top:void 0,padding_bottom:void 0,resize_auto:!0,zoom_enabled:void 0,zoom_extent:void 0,zoom_privileged:!1,zoom_rescale:!1,zoom_onzoom:void 0,zoom_onzoomstart:void 0,zoom_onzoomend:void 0,zoom_resetButton:!0,zoom_x_min:void 0,zoom_x_max:void 0,interaction_enabled:!0,interaction_brighten:!0,interaction_inputType_mouse:!0,interaction_inputType_touch:{},onover:void 0,onout:void 0,onresize:void 0,onresized:void 0,onbeforeinit:void 0,oninit:void 0,onafterinit:void 0,onrendered:void 0,transition_duration:350,data_x:void 0,data_xs:{},data_xFormat:"%Y-%m-%d",data_xLocaltime:!0,data_xSort:!0,data_idConverter:function data_idConverter(t){return t},data_names:{},data_classes:{},data_groups:[],data_axes:{},data_type:void 0,data_types:{},data_labels:{},data_labels_colors:void 0,data_labels_position:{},data_order:"desc",data_regions:{},data_color:void 0,data_colors:{},data_hide:!1,data_filter:void 0,data_stack_normalize:!1,data_selection_enabled:!1,data_selection_grouped:!1,data_selection_isselectable:function data_selection_isselectable(){return!0},data_selection_multiple:!0,data_selection_draggable:!1,data_onclick:function data_onclick(){},data_onover:function data_onover(){},data_onout:function data_onout(){},data_onselected:function data_onselected(){},data_onunselected:function data_onunselected(){},data_onmin:void 0,data_onmax:void 0,data_url:void 0,data_headers:void 0,data_json:void 0,data_rows:void 0,data_columns:void 0,data_mimeType:void 0,data_keys:void 0,data_empty_label_text:"",subchart_show:!1,subchart_size_height:60,subchart_axis_x_show:!0,subchart_axis_x_tick_show:!0,subchart_axis_x_tick_text_show:!0,subchart_onbrush:function subchart_onbrush(){},color_pattern:[],color_tiles:void 0,color_threshold:{},color_onover:void 0,legend_show:!0,legend_hide:!1,legend_contents_bindto:void 0,legend_contents_template:void 0,legend_position:"bottom",legend_inset_anchor:"top-left",legend_inset_x:10,legend_inset_y:0,legend_inset_step:void 0,legend_item_onclick:void 0,legend_item_onover:void 0,legend_item_onout:void 0,legend_equally:!1,legend_padding:0,legend_item_tile_width:10,legend_item_tile_height:10,legend_usePoint:!1,axis_rotated:!1,axis_x_clipPath:!0,axis_x_show:!0,axis_x_type:"indexed",axis_x_localtime:!0,axis_x_categories:[],axis_x_tick_centered:!1,axis_x_tick_format:void 0,axis_x_tick_culling:{},axis_x_tick_culling_max:10,axis_x_tick_count:void 0,axis_x_tick_show:!0,axis_x_tick_text_show:!0,axis_x_tick_text_position:{x:0,y:0},axis_x_tick_fit:!0,axis_x_tick_values:null,axis_x_tick_rotate:0,axis_x_tick_outer:!0,axis_x_tick_multiline:!0,axis_x_tick_width:null,axis_x_tick_tooltip:!1,axis_x_max:void 0,axis_x_min:void 0,axis_x_padding:{},axis_x_height:void 0,axis_x_extent:void 0,axis_x_label:{},axis_x_axes:[],axis_y_clipPath:!0,axis_y_show:!0,axis_y_type:void 0,axis_y_max:void 0,axis_y_min:void 0,axis_y_inverted:!1,axis_y_center:void 0,axis_y_inner:!1,axis_y_label:{},axis_y_tick_format:void 0,axis_y_tick_culling:!1,axis_y_tick_culling_max:5,axis_y_tick_outer:!0,axis_y_tick_values:null,axis_y_tick_rotate:0,axis_y_tick_count:void 0,axis_y_tick_show:!0,axis_y_tick_text_show:!0,axis_y_tick_text_position:{x:0,y:0},axis_y_tick_time_value:void 0,axis_y_padding:{},axis_y_default:void 0,axis_y_axes:[],axis_y2_show:!1,axis_y2_max:void 0,axis_y2_min:void 0,axis_y2_inverted:!1,axis_y2_center:void 0,axis_y2_inner:!1,axis_y2_label:{},axis_y2_tick_format:void 0,axis_y2_tick_culling:!1,axis_y2_tick_culling_max:5,axis_y2_tick_outer:!0,axis_y2_tick_values:null,axis_y2_tick_count:void 0,axis_y2_tick_show:!0,axis_y2_tick_text_show:!0,axis_y2_tick_text_position:{x:0,y:0},axis_y2_padding:{},axis_y2_default:void 0,axis_y2_axes:[],grid_x_show:!1,grid_x_type:"tick",grid_x_lines:[],grid_y_show:!1,grid_y_lines:[],grid_y_ticks:10,grid_focus_show:!0,grid_front:!1,grid_lines_front:!0,point_show:!0,point_r:2.5,point_sensitivity:10,point_focus_expand_enabled:!0,point_focus_expand_r:void 0,point_pattern:[],point_select_r:void 0,point_type:"circle",line_connectNull:!1,line_step_type:"step",line_classes:void 0,line_point:!0,bar_padding:0,bar_radius:void 0,bar_radius_ratio:void 0,bar_sensitivity:2,bar_width:void 0,bar_width_ratio:.6,bar_width_max:void 0,bar_zerobased:!0,bubble_maxR:35,area_zerobased:!0,area_above:!1,area_linearGradient:!1,pie_label_show:!0,pie_label_format:void 0,pie_label_threshold:.05,pie_label_ratio:void 0,pie_expand:{},pie_expand_duration:50,pie_innerRadius:0,pie_padAngle:0,pie_padding:0,plugins:[],gauge_fullCircle:!1,gauge_label_show:!0,gauge_label_format:void 0,gauge_min:0,gauge_max:100,gauge_startingAngle:-1*Math.PI/2,gauge_label_extents:void 0,gauge_title:"",gauge_units:void 0,gauge_width:void 0,gauge_expand:{},gauge_expand_duration:50,donut_label_show:!0,donut_label_format:void 0,donut_label_threshold:.05,donut_label_ratio:void 0,donut_width:void 0,donut_title:"",donut_expand:{},donut_expand_duration:50,donut_padAngle:0,spline_interpolation_type:"cardinal",radar_axis_max:void 0,radar_axis_line_show:!0,radar_axis_text_show:!0,radar_axis_text_position:{},radar_level_depth:3,radar_level_show:!0,radar_level_text_format:function radar_level_text_format(t){return t%1==0?t:t.toFixed(2)},radar_level_text_show:!0,radar_size_ratio:.87,radar_direction_clockwise:!1,regions:[],tooltip_show:!0,tooltip_doNotHide:!1,tooltip_grouped:!0,tooltip_format_title:void 0,tooltip_format_name:void 0,tooltip_format_value:void 0,tooltip_position:void 0,tooltip_contents:{},tooltip_init_show:!1,tooltip_init_x:0,tooltip_init_position:{top:"0px",left:"50px"},tooltip_linked:!1,tooltip_linked_name:"",tooltip_onshow:function tooltip_onshow(){},tooltip_onhide:function tooltip_onhide(){},tooltip_onshown:function tooltip_onshown(){},tooltip_onhidden:function tooltip_onhidden(){},tooltip_order:null,title_text:void 0,title_padding:{top:0,right:0,bottom:0,left:0},title_position:"center"}}var m=i(20),z=function(){function AxisRendererHelper(t,e){r()(this,AxisRendererHelper);var i=Object(m.scaleLinear)();this.config=t,this.scale=i,!t.noTransition&&e.config.transition_duration||(t.withoutTransition=!0),t.range=i.rangeExtent?i.rangeExtent():this.scaleExtent((e.orgXScale||i).range())}return c()(AxisRendererHelper,[{key:"axisX",value:function axisX(t,e){var i=this;t.attr("transform",function(t){return"translate(".concat(Math.ceil(e(t)+i.config.tickOffset),",0)")})}},{key:"axisY",value:function axisY(t,e){t.attr("transform",function(t){return"translate(0,".concat(Math.ceil(e(t)),")")})}},{key:"scaleExtent",value:function scaleExtent(t){var e=t[0],i=t[t.length-1];return e<i?[e,i]:[i,e]}},{key:"generateTicks",value:function generateTicks(t){var e=[];if(t.ticks)return t.ticks.apply(t,C()(this.config.tickArguments||[])).map(function(t){return bc(t)&&cc(t)&&!isNaN(t)&&Math.round(10*t)/10||t});for(var i=t.domain(),n=Math.ceil(i[0]);n<i[1];n++)e.push(n);return 0<e.length&&0<e[0]&&e.unshift(e[0]-(e[1]-e[0])),e}},{key:"copyScale",value:function copyScale(){var t=this.scale.copy();return t.domain().length||t.domain(this.scale.domain()),t}},{key:"textFormatted",value:function textFormatted(t){var e=this.config.tickFormat,i=/\d+\.\d+0{5,}\d$/.test(t)?+(t+"").replace(/0+\d$/,""):t,n=e?e(i):i;return ec(n)?n:""}},{key:"transitionise",value:function transitionise(t){var e=this.config;return e.withoutTransition?t.interrupt():t.transition(e.transition)}}],[{key:"getSizeFor1Char",value:function getSizeFor1Char(t){var a={w:5.5,h:11.5};return t.empty()||t.select("text").text("0").call(function(t){try{var e=t.node().getBBox(),i=e.width,n=e.height;i&&n&&(a.w=i,a.h=n),t.text("")}catch(t){}}),this.getSizeFor1Char=function(){return a},a}}]),AxisRendererHelper}(),_=function(){function AxisRenderer(){var t=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{};r()(this,AxisRenderer);var e={innerTickSize:6,outerTickSize:t.outerTick?6:0,orient:"bottom",range:[],tickArguments:null,tickCentered:null,tickCulling:!0,tickFormat:null,tickLength:9,tickOffset:0,tickPadding:3,tickValues:null,transition:null,noTransition:t.noTransition};e.tickLength=Math.max(e.innerTickSize,0)+e.tickPadding,this.helper=new z(e,t),this.config=e,this.params=t}return c()(AxisRenderer,[{key:"create",value:function create(t){var x=this,v=this.config,m=this.params,_=this.helper,y=_.scale,b=v.orient,T=this.splitTickText.bind(this),A=/^(left|right)$/.test(b),w=/^(top|bottom)$/.test(b),L=_[w?"axisX":"axisY"],S=L===_.axisX?"y":"x",k=/^(top|left)$/.test(b)?-1:1,C=m.tickTextRotate;this.config.range=y.rangeExtent?y.rangeExtent():_.scaleExtent((m.orgXScale||y).range());var e=v,O=e.innerTickSize,R=e.tickLength,D=e.range,i=m.name,X=i&&/^(x|y|y2)$/.test(i)?m.config["axis_".concat(i,"_tick_text_position")]:{x:0,y:0},n="subX"===i?"subchart_axis_x":"axis_".concat(i),a=m.config["".concat(n,"_show")],F=!!a&&m.config["".concat(n,"_tick_show")],I=!!a&&m.config["".concat(n,"_tick_text_show")],E=null;t.each(function(){var t=Object(B.select)(this),e=this.__chart__||y,n=_.copyScale();E=t,this.__chart__=n,v.tickOffset=m.isCategory?Math.ceil((n(1)-n(0))/2):0;var i,a=t.selectAll(".domain").data([0]);if(a.enter().append("path").attr("class","domain").merge(_.transitionise(a)).attr("d",function(){var t=v.outerTickSize*k;return w?"M".concat(D[0],",").concat(t,"V0H").concat(D[1],"V").concat(t):"M".concat(t,",").concat(D[0],"H0V").concat(D[1],"H").concat(t)}),F||I){var r=v.tickValues||_.generateTicks(n),o=t.selectAll(".tick").data(r,n),s=o.enter().insert("g",".domain").attr("class","tick").style("opacity","1"),c=o.exit().remove();o=s.merge(o),F&&s.append("line"),I&&s.append("text");var l=z.getSizeFor1Char(o),u=[],d=o.select("text").selectAll("tspan").data(function(t,e){var i=m.tickMultiline?T(t,n,r,A,l.w):mc(_.textFormatted(t))?_.textFormatted(t).concat():[_.textFormatted(t)];return u[e]=i.length,i.map(function(t){return{index:e,splitted:t}})});d.exit().remove(),(d=d.enter().append("tspan").merge(d).text(function(t){return t.splitted})).attr("x",w?0:R*k).attr("dx",(i=0,"bottom"===b&&C&&(i=8*Math.sin(Math.PI*(C/180))),i+(X.x||0))).attr("dy",function(t,e){var i=0;return"top"!==b&&(i=l.h,0===e&&(i=A?-((u[t.index]-1)*(l.h/2)-3):0===X.y?".71em":0)),cc(i)&&X.y?i+X.y:i||".71em"});var g=o.select("line"),h=o.select("text");if(s.select("line").attr("".concat(S,"2"),O*k),s.select("text").attr("".concat(S),R*k),x.setTickLineTextPosition(g,h),m.tickTitle&&h.append&&h.append("title").each(function(t){Object(B.select)(this).text(m.tickTitle[t])}),n.bandwidth){var f=n,p=f.bandwidth()/2;n=e=function(t){return f(t)+p}}else e.bandwidth?e=n:L.call(_,c,n);L.call(_,s,e),L.call(_,_.transitionise(o).style("opacity","1"),n)}}),this.g=E}},{key:"getTickXY",value:function getTickXY(){var t=this.config,e={x:0,y:0};return this.params.isCategory&&(e.x=t.tickCentered?0:t.tickOffset,e.y=t.tickCentered?t.tickOffset:0),e}},{key:"getTickSize",value:function getTickSize(t){var e=this.helper.scale,i=this.config,n=i.innerTickSize,a=i.range,r=e(t)+(i.tickCentered?0:i.tickOffset);return a[0]<r&&r<a[1]?n:0}},{key:"setTickLineTextPosition",value:function setTickLineTextPosition(t,e){var i=this.getTickXY(),n=this.config,a=n.innerTickSize,r=n.orient,o=n.tickLength,s=n.tickOffset,c=this.params.tickTextRotate;"bottom"===r?(t.attr("x1",i.x).attr("x2",i.x).attr("y2",this.getTickSize.bind(this)),e.attr("x",0).attr("y",function yForText(t){return t?11.5-t/15*2.5*(0<t?1:-1):o}(c)).style("text-anchor",function textAnchorForText(t){return t?0<t?"start":"end":"middle"}(c)).attr("transform",function textTransform(t){return t?"rotate(".concat(t,")"):null}(c))):"top"===r?(t.attr("x2",0).attr("y2",-a),e.attr("x",0).attr("y",2*-o).style("text-anchor","middle")):"left"===r?(t.attr("x2",-a).attr("y1",i.y).attr("y2",i.y),e.attr("x",-o).attr("y",s).style("text-anchor","end")):"right"===r&&(t.attr("x2",a).attr("y2",0),e.attr("x",o).attr("y",0).style("text-anchor","start"))}},{key:"splitTickText",value:function splitTickText(t,e,i,n,o){var a=this.params,r=this.helper.textFormatted(t),s=bc(r)&&-1<r.indexOf("\n")?r.split("\n"):[];if(s.length)return s;if(mc(r))return r;var c=a.tickWidth;return(!c||c<=0)&&(c=n?95:a.isCategory?Math.ceil(e(i[1])-e(i[0]))-12:110),function split(t,e){for(var i,n,a,r=1;r<e.length;r++)if(" "===e.charAt(r)&&(n=r),i=e.substr(0,r+1),a=o*i.length,c<a)return split(t.concat(e.substr(0,n||r)),e.slice(n?n+1:r));return t.concat(e)}(s,r+"")}},{key:"scale",value:function scale(t){return arguments.length?(this.helper.scale=t,this):this.helper.scale}},{key:"orient",value:function orient(t){return arguments.length?(this.config.orient=t in{top:1,right:1,bottom:1,left:1}?t+"":"bottom",this):this.config.orient}},{key:"tickFormat",value:function tickFormat(t){return arguments.length?(this.config.tickFormat=t,this):this.config.tickFormat}},{key:"tickCentered",value:function tickCentered(t){var e=this.config;return arguments.length?(e.tickCentered=t,this):e.tickCentered}},{key:"tickOffset",value:function tickOffset(){return this.config.tickOffset}},{key:"tickInterval",value:function tickInterval(t){var e;this.params.isCategory?e=2*this.config.tickOffset:e=(this.g.select("path.domain").node().getTotalLength()-2*this.config.outerTickSize)/(t||this.g.selectAll("line").size());return e===1/0?0:e}},{key:"ticks",value:function ticks(){for(var t=this.config,e=arguments.length,i=Array(e),n=0;n<e;n++)i[n]=arguments[n];return i.length?(t.tickArguments=Ac(i),this):t.tickArguments}},{key:"tickCulling",value:function tickCulling(t){var e=this.config;return arguments.length?(e.tickCulling=t,this):e.tickCulling}},{key:"tickValues",value:function tickValues(t){var e=this,i=this.config;if(ac(t))i.tickValues=function(){return t(e.helper.scale.domain())};else{if(!arguments.length)return i.tickValues;i.tickValues=t}return this}},{key:"setTransition",value:function setTransition(t){return this.config.transition=t,this}}]),AxisRenderer}(),y=function(){function Axis(t){r()(this,Axis),this.owner=t,this.setOrient()}return c()(Axis,[{key:"init",value:function init(){var a=this,r=this.owner,o=r.config,s=o.axis_rotated,c=r.main,t=["x","y"];o.axis_y2_show&&t.push("y2"),r.axesList={},t.forEach(function(e){var t=Oc(e),i=e.toUpperCase(),n=M["axis".concat(i,"Label")];r.axes[e]=c.append("g").attr("class",t).attr("clip-path",function(){var t=null;return"x"===e?t=r.clipPathForXAxis:"y"===e&&o.axis_y_inner&&(t=r.clipPathForYAxis),t}).attr("transform",r.getTranslate(e)).style("visibility",o["axis_".concat(e,"_show")]?"visible":"hidden"),r.axes[e].append("text").attr("class",n).attr("transform",["rotate(-90)",null]["x"===e?+!s:+s]).style("text-anchor",a["textAnchorFor".concat(i,"AxisLabel")].bind(a)),a.generateAxes(e)})}},{key:"setOrient",value:function setOrient(){var t=this.owner,e=t.config,i=e.axis_rotated,n=e.axis_y_inner,a=e.axis_y2_inner;t.xOrient=i?"left":"bottom",t.yOrient=i?n?"top":"bottom":n?"right":"left",t.y2Orient=i?a?"bottom":"top":a?"left":"right",t.subXOrient=i?"left":"bottom"}},{key:"generateAxes",value:function generateAxes(i){var n,a=this.owner,t=a.config,r=[],e=t["axis_".concat(i,"_axes")],o=t.axis_rotated;"x"===i?n=o?u.axisLeft:u.axisBottom:"y"===i?n=o?u.axisBottom:u.axisLeft:"y2"===i&&(n=o?u.axisTop:u.axisRight),e.length&&e.forEach(function(t){var e=t.tick;r.push(n(a[i]).ticks(e.count).tickFormat(e.format||function(t){return t}).tickValues(e.values).tickSizeOuter(!1===e.outer?0:6))}),a.axesList[i]=r}},{key:"updateAxes",value:function updateAxes(){var s=this.owner,c=s.config;Object.keys(s.axesList).forEach(function(r){var o=s[r].range();s.axesList[r].forEach(function(t,e){var i=t.scale().range();o.every(function(t,e){return t===i[e]})||t.scale().range(o);var n="".concat(Oc(r),"-").concat(e+1),a=s.main.select(".".concat(n.replace(/\s/,".")));a.empty()?a=s.main.append("g").attr("class",n).style("visibility",c["axis_".concat(r,"_show")]?"visible":"hidden").call(t):s.xAxis.helper.transitionise(a).call(t.scale(s[r])),a.attr("transform",s.getTranslate(r,e+1))})})}},{key:"getAxis",value:function getAxis(t,e,i,n,a){var r=this.owner,o=r.config,s=/^(x|subX)$/.test(t),c=s?"x":"y",l=s&&r.isCategorized(),u=r["".concat(t,"Orient")],d=s?r.xAxisTickFormat:o["axis_".concat(t,"_tick_format")],g=s?r.xAxisTickValues:r["".concat(t,"AxisTickValues")],h=Object.assign({outerTick:i,noTransition:n,config:o,name:t,tickTextRotate:a?0:o["axis_".concat(c,"_tick_rotate")]},s&&{isCategory:l,tickMultiline:o.axis_x_tick_multiline,tickWidth:o.axis_x_tick_width,tickTitle:l&&o.axis_x_tick_tooltip&&r.api.categories(),orgXScale:r.x}),f=new _(h).scale(s&&r.zoomScale||e).orient(u);return s&&r.isTimeSeries()&&g&&!ac(g)?g=g.map(function(t){return r.parseDate(t)}):!s&&r.isTimeSeriesY()&&(f.ticks(o.axis_y_tick_time_value),g=null),g&&f.tickValues(g),f.tickFormat(d||!s&&r.isStackNormalized()&&function(t){return"".concat(t,"%")}),l&&(f.tickCentered(o.axis_x_tick_centered),kc(o.axis_x_tick_culling)&&(o.axis_x_tick_culling=!1)),o["axis_".concat(c,"_tick_count")]&&f.ticks(o["axis_".concat(c,"_tick_count")]),f}},{key:"updateXAxisTickValues",value:function updateXAxisTickValues(t,e){var i,n=this.owner,a=n.config,r=a.axis_x_tick_fit,o=a.axis_x_tick_count;return(r||o&&r)&&(i=this.generateTickValues(n.mapTargetsToUniqueXs(t),o,n.isTimeSeries())),e?e.tickValues(i):n.xAxis&&(n.xAxis.tickValues(i),n.subXAxis.tickValues(i)),i}},{key:"getId",value:function getId(t){var e=this.owner.config;return t in e.data_axes?e.data_axes[t]:"y"}},{key:"getXAxisTickFormat",value:function getXAxisTickFormat(){var e,i=this.owner,n=i.config.axis_x_tick_format,t=i.isTimeSeries(),a=i.isCategorized();return n?ac(n)?e=n:t&&(e=function(t){return t?i.axisTimeFormat(n)(t):""}):e=t?i.defaultAxisTimeFormat:a?i.categoryName:function(t){return t<0?t.toFixed(0):t},ac(e)?function(t){return e.apply(i,a?[t,i.categoryName(t)]:[t])}:e}},{key:"getTickValues",value:function getTickValues(t){var e=this.owner,i=e.config["axis_".concat(t,"_tick_values")],n=e["".concat(t,"Axis")];return(ac(i)?i():i)||(n?n.tickValues():void 0)}},{key:"getLabelOptionByAxisId",value:function getLabelOptionByAxisId(t){return this.owner.config["axis_".concat(t,"_label")]}},{key:"getLabelText",value:function getLabelText(t){var e=this.getLabelOptionByAxisId(t);return bc(e)?e:e?e.text:null}},{key:"setLabelText",value:function setLabelText(t,e){var i=this.owner.config,n=this.getLabelOptionByAxisId(t);bc(n)?i["axis_".concat(t,"_label")]=e:n&&(n.text=e)}},{key:"getLabelPosition",value:function getLabelPosition(t,e){function Yj(t){return!!~a.indexOf(t)}var i=this.owner.config.axis_rotated,n=this.getLabelOptionByAxisId(t),a=jc(n)&&n.position?n.position:e[+!i];return{isInner:Yj("inner"),isOuter:Yj("outer"),isLeft:Yj("left"),isCenter:Yj("center"),isRight:Yj("right"),isTop:Yj("top"),isMiddle:Yj("middle"),isBottom:Yj("bottom")}}},{key:"getXAxisLabelPosition",value:function getXAxisLabelPosition(){return this.getLabelPosition("x",["inner-top","inner-right"])}},{key:"getYAxisLabelPosition",value:function getYAxisLabelPosition(){return this.getLabelPosition("y",["inner-right","inner-top"])}},{key:"getY2AxisLabelPosition",value:function getY2AxisLabelPosition(){return this.getLabelPosition("y2",["inner-right","inner-top"])}},{key:"getLabelPositionById",value:function getLabelPositionById(t){return this["get".concat(t.toUpperCase(),"AxisLabelPosition")]()}},{key:"textForXAxisLabel",value:function textForXAxisLabel(){return this.getLabelText("x")}},{key:"textForYAxisLabel",value:function textForYAxisLabel(){return this.getLabelText("y")}},{key:"textForY2AxisLabel",value:function textForY2AxisLabel(){return this.getLabelText("y2")}},{key:"xForAxisLabel",value:function xForAxisLabel(t,e){var i=!(1<arguments.length&&void 0!==e)||e,n=this.owner,a=t.isMiddle?-n.height/2:0;return Nc(n,i)?a=t.isLeft?0:t.isCenter?n.width/2:n.width:t.isBottom&&(a=-n.height),a}},{key:"dxForAxisLabel",value:function dxForAxisLabel(t,e){var i=!(1<arguments.length&&void 0!==e)||e,n=this.owner,a=t.isBottom?"0.5em":"0";return Nc(n,i)?a=t.isLeft?"0.5em":t.isRight?"-0.5em":"0":t.isTop&&(a="-0.5em"),a}},{key:"textAnchorForAxisLabel",value:function textAnchorForAxisLabel(t,e){var i=!(1<arguments.length&&void 0!==e)||e,n=this.owner,a=t.isMiddle?"middle":"end";return Nc(n,i)?a=t.isLeft?"start":t.isCenter?"middle":"end":t.isBottom&&(a="start"),a}},{key:"xForXAxisLabel",value:function xForXAxisLabel(){return this.xForAxisLabel(this.getXAxisLabelPosition(),!1)}},{key:"xForYAxisLabel",value:function xForYAxisLabel(){return this.xForAxisLabel(this.getYAxisLabelPosition())}},{key:"xForY2AxisLabel",value:function xForY2AxisLabel(){return this.xForAxisLabel(this.getY2AxisLabelPosition())}},{key:"dxForXAxisLabel",value:function dxForXAxisLabel(){return this.dxForAxisLabel(this.getXAxisLabelPosition(),!1)}},{key:"dxForYAxisLabel",value:function dxForYAxisLabel(){return this.dxForAxisLabel(this.getYAxisLabelPosition())}},{key:"dxForY2AxisLabel",value:function dxForY2AxisLabel(){return this.dxForAxisLabel(this.getY2AxisLabelPosition())}},{key:"dyForXAxisLabel",value:function dyForXAxisLabel(){var t=this.owner.config,e=this.getXAxisLabelPosition().isInner,i=t.axis_x_height;return t.axis_rotated?e?"1.2em":-25-this.getMaxTickWidth("x"):e?"-0.5em":i?i-10:"3em"}},{key:"dyForYAxisLabel",value:function dyForYAxisLabel(){var t=this.owner,e=this.getYAxisLabelPosition().isInner;return t.config.axis_rotated?e?"-0.5em":"3em":e?"1.2em":-10-(t.config.axis_y_inner?0:this.getMaxTickWidth("y")+10)}},{key:"dyForY2AxisLabel",value:function dyForY2AxisLabel(){var t=this.owner,e=this.getY2AxisLabelPosition().isInner;return t.config.axis_rotated?e?"1.2em":"-2.2em":e?"-0.5em":15+(t.config.axis_y2_inner?0:this.getMaxTickWidth("y2")+15)}},{key:"textAnchorForXAxisLabel",value:function textAnchorForXAxisLabel(){return this.textAnchorForAxisLabel(this.getXAxisLabelPosition(),!1)}},{key:"textAnchorForYAxisLabel",value:function textAnchorForYAxisLabel(){return this.textAnchorForAxisLabel(this.getYAxisLabelPosition())}},{key:"textAnchorForY2AxisLabel",value:function textAnchorForY2AxisLabel(){return this.textAnchorForAxisLabel(this.getY2AxisLabelPosition())}},{key:"getMaxTickWidth",value:function getMaxTickWidth(t,e){var i=this.owner,n=i.config,a=i.currentMaxTickWidths[t],r=0;if(e||!n["axis_".concat(t,"_show")])return a.size;if(i.svg){var o=/^y2?$/.test(t),s=i.filterTargetsToShow(i.data.targets),c=i[t].copy().domain(i["get".concat(o?"Y":"X","Domain")](s,t)),l=c.domain();if(mc(a.domain)&&a.domain.every(function(t,e){return t===l[e]}))return a.size;a.domain=l;var u=this.getAxis(t,c,!1,!1,!0),d=n["axis_".concat(t,"_tick_count")];d&&u.tickValues(this.generateTickValues(l,d,o?i.isTimeSeriesY():i.isTimeSeries())),o||this.updateXAxisTickValues(s,u);var g=i.selectChart.append("svg").style("visibility","hidden").style("position","fixed").style("top","0px").style("left","0px");u.create(g),g.selectAll("text").each(function(){r=Math.max(r,this.getBoundingClientRect().width)}),g.remove()}return 0<r&&(a.size=r),a.size}},{key:"updateLabels",value:function updateLabels(n){var a=this,t=this.owner,r={X:t.main.select(".".concat(M.axisX," .").concat(M.axisXLabel)),Y:t.main.select(".".concat(M.axisY," .").concat(M.axisYLabel)),Y2:t.main.select(".".concat(M.axisY2," .").concat(M.axisY2Label))};Object.keys(r).filter(function(t){return!r[t].empty()}).forEach(function(t){var e=r[t],i="".concat(t,"AxisLabel");(n?e.transition():e).attr("x",a["xFor".concat(i)].bind(a)).attr("dx",a["dxFor".concat(i)].bind(a)).attr("dy",a["dyFor".concat(i)].bind(a)).text(a["textFor".concat(i)].bind(a))})}},{key:"getPadding",value:function getPadding(t,e,i,n){var a=cc(t)?t:t[e];return _b(a)?"ratio"===t.unit?t[e]*n:this.convertPixelsToAxisPadding(a,n):i}},{key:"convertPixelsToAxisPadding",value:function convertPixelsToAxisPadding(t,e){var i=this.owner;return e*(t/(i.config.axis_rotated?i.width:i.height))}},{key:"generateTickValues",value:function generateTickValues(t,e,i){var n,a,r,o,s,c,l=t;if(e){var u=ac(e)?e():e;if(1===u)l=[t[0]];else if(2===u)l=[t[0],t[t.length-1]];else if(2<u){for(r=u-2,n=t[0],o=((a=t[t.length-1])-n)/(1+r),l=[n],s=0;s<r;s++)c=+n+o*(s+1),l.push(i?new Date(c):c);l.push(a)}}return i||(l=l.sort(function(t,e){return t-e})),l}},{key:"generateTransitions",value:function generateTransitions(i){var n=this.owner.axes,t=["x","y","y2","subx"].map(function(t){var e=n[t];return e&&i&&(e=e.transition().duration(i)),e}),e=k()(t,4);return{axisX:e[0],axisY:e[1],axisY2:e[2],axisSubX:e[3]}}},{key:"redraw",value:function redraw(i,t,n){var a=this.owner,r=t?"0":"1";["x","y","y2","subX"].forEach(function(t){var e=a["".concat(t,"Axis")];e&&(n||(e.config.withoutTransition=!a.config.transition_duration),a.axes[t.toLowerCase()].style("opacity",r),e.create(i["axis".concat(zc(t))]))}),this.updateAxes()}},{key:"redrawAxis",value:function redrawAxis(r,t,e,i,n){var o,s=this,c=this.owner,l=c.config,a=!!c.zoomScale;!a&&c.isCategorized()&&0===r.length&&c.x.domain([0,c.axes.x.selectAll(".tick").size()]),c.x&&r.length?(a||c.updateXDomain(r,t.UpdateXDomain,t.UpdateOrgXDomain,t.TrimXDomain),l.axis_x_tick_values||this.updateXAxisTickValues(r)):c.xAxis&&(c.xAxis.tickValues([]),c.subXAxis.tickValues([])),l.zoom_rescale&&!i&&(o=c.x.orgDomain()),["y","y2"].forEach(function(t){var e=c[t];if(e){var i=l["axis_".concat(t,"_tick_values")],n=l["axis_".concat(t,"_tick_count")];if(e.domain(c.getYDomain(r,t,o)),!i&&n){var a=e.domain();c["".concat(t,"Axis")].tickValues(s.generateTickValues(a,a.every(function(t){return 0===t})?1:n,c.isTimeSeriesY()))}}}),this.redraw(e,c.hasArcType(),n),this.updateLabels(t.Transition),(t.UpdateXDomain||t.UpdateXAxis)&&r.length&&this.setCulling(),t.Y&&(c.subY&&c.subY.domain(c.getYDomain(r,"y")),c.subY2&&c.subY2.domain(c.getYDomain(r,"y2")))}},{key:"setCulling",value:function setCulling(){var l=this.owner,u=l.config;["x","y","y2"].forEach(function(t){var e=l.axes[t],i=u["axis_".concat(t,"_tick_culling")];if(e&&i){var n,a=e.selectAll(".tick text"),r=Fc(a.data()),o=r.length,s=u["axis_".concat(t,"_tick_culling_max")];if(o){for(var c=1;c<o;c++)if(o/c<s){n=c;break}a.each(function(t){this.style.display=r.indexOf(t)%n?"none":"block"})}else a.style("display","block")}})}}]),Axis}(),b=function(){function ChartInternal(t){r()(this,ChartInternal);var e=this;e.api=t,e.config=e.getOptions(),e.data={},e.cache={},e.axes={}}return c()(ChartInternal,[{key:"beforeInit",value:function beforeInit(){this.callPluginHook("$beforeInit"),qc(this.config.onbeforeinit,this,this.api)}},{key:"afterInit",value:function afterInit(){this.callPluginHook("$afterInit"),qc(this.config.onafterinit,this,this.api)}},{key:"init",value:function init(){var t=this;t.initParams();var e=t.convertData(t.config,t.initWithData);e&&t.initWithData(e)}},{key:"initParams",value:function initParams(){var n=this,a=this,t=a.config,e=t.axis_rotated;a.datetimeId="bb-".concat(+new Date),a.initClip(),a.dragStart=null,a.dragging=!1,a.flowing=!1,a.cancelClick=!1,a.mouseover=!1,a.transiting=!1,a.color=a.generateColor(),a.levelColor=a.generateLevelColor(),a.point=a.generatePoint(),a.extraLineClasses=a.generateExtraLineClass(),a.dataTimeFormat=t.data_xLocaltime?l.timeParse:l.utcParse,a.axisTimeFormat=t.axis_x_localtime?l.timeFormat:l.utcFormat;var r=a.config.zoom_enabled&&"drag"===a.config.zoom_enabled.type;a.defaultAxisTimeFormat=function(t){var e=r?n.zoomScale:n.zoomScale&&a.x.orgDomain().toString()!==n.zoomScale.domain().toString(),i=(t.getMilliseconds()?".%L":t.getSeconds()&&".:%S")||t.getMinutes()&&"%I:%M"||t.getHours()&&"%I %p"||1!==t.getDate()&&"%b %d"||e&&1===t.getDate()&&"%b'%y"||t.getMonth()&&"%-m/%-d"||"%Y";return a.axisTimeFormat(i)(t)},a.hiddenTargetIds=[],a.hiddenLegendIds=[],a.focusedTargetIds=[],a.defocusedTargetIds=[],a.isLegendRight="right"===t.legend_position,a.isLegendInset="inset"===t.legend_position,a.isLegendTop="top-left"===t.legend_inset_anchor||"top-right"===t.legend_inset_anchor,a.isLegendLeft="top-left"===t.legend_inset_anchor||"bottom-left"===t.legend_inset_anchor,a.legendStep=0,a.legendItemWidth=0,a.legendItemHeight=0,a.currentMaxTickWidths={x:{size:0,domain:""},y:{size:0,domain:""},y2:{size:0,domain:""}},a.rotated_padding_left=30,a.rotated_padding_right=e&&!t.axis_x_show?0:30,a.rotated_padding_top=5,a.withoutFadeIn={},a.inputType=a.convertInputType(),a.axes.subx=Object(B.selectAll)([])}},{key:"initWithData",value:function initWithData(t){var e=this,i=e.config;e.axis=new y(e),i.zoom_enabled&&e.initZoom();var n={element:i.bindto,classname:"bb"};if(nc(i.bindto)&&(n.element=i.bindto.element||"#chart",n.classname=i.bindto.classname||n.classname),e.selectChart=ac(n.element.node)?i.bindto.element:Object(B.select)(n.element||[]),e.selectChart.empty()&&(e.selectChart=Object(B.select)(O.a.body.appendChild(O.a.createElement("div")))),e.selectChart.html("").classed(n.classname,!0),e.data.xs={},e.data.targets=e.convertDataToTargets(t),i.data_filter&&(e.data.targets=e.data.targets.filter(i.data_filter)),i.data_hide&&e.addHiddenTargetIds(!0===i.data_hide?e.mapToIds(e.data.targets):i.data_hide),i.legend_hide&&e.addHiddenLegendIds(!0===i.legend_hide?e.mapToIds(e.data.targets):i.legend_hide),e.hasType("gauge")&&(i.legend_show=!1),e.updateSizes(),e.updateScales(!0),e.x&&(e.x.domain(Fc(e.getXDomain(e.data.targets))),e.subX.domain(e.x.domain()),e.orgXDomain=e.x.domain()),e.y&&(e.y.domain(e.getYDomain(e.data.targets,"y")),e.subY.domain(e.y.domain())),e.y2&&(e.y2.domain(e.getYDomain(e.data.targets,"y2")),e.subY2&&e.subY2.domain(e.y2.domain())),e.svg=e.selectChart.append("svg").style("overflow","hidden").style("display","block"),i.interaction_enabled&&e.inputType){var a="touch"===e.inputType;e.svg.on(a?"touchstart":"mouseenter",function(){return qc(i.onover,e,e.api)}).on(a?"touchend":"mouseleave",function(){return qc(i.onout,e,e.api)})}i.svg_classname&&e.svg.attr("class",i.svg_classname),e.defs=e.svg.append("defs"),e.clipChart=e.appendClip(e.defs,e.clipId),e.clipXAxis=e.appendClip(e.defs,e.clipIdForXAxis),e.clipYAxis=e.appendClip(e.defs,e.clipIdForYAxis),e.clipGrid=e.appendClip(e.defs,e.clipIdForGrid),ac(i.color_tiles)&&e.patterns&&e.patterns.forEach(function(t){return e.defs.append(function(){return t.node})}),e.updateSvgSize();var r=e.svg.append("g").attr("transform",e.getTranslate("main"));if(e.main=r,i.subchart_show&&e.initSubchart(),e.initTooltip&&e.initTooltip(),e.initLegend&&e.initLegend(),e.initTitle&&e.initTitle(),i.data_empty_label_text&&r.append("text").attr("class","".concat(M.text," ").concat(M.empty)).attr("text-anchor","middle").attr("dominant-baseline","middle"),e.initRegion(),i.clipPath||e.axis.init(),r.append("g").attr("class",M.chart).attr("clip-path",e.clipPath),e.callPluginHook("$init"),e.initEventRect(),e.initChartElements(),e.initGrid(),r.insert("rect",i.zoom_privileged?null:"g.".concat(M.regions)).attr("class",M.zoomRect).attr("width",e.width).attr("height",e.height).style("opacity","0").on("dblclick.zoom",null),i.clipPath&&e.axis.init(),e.updateTargets(e.data.targets),e.updateDimension(),qc(i.oninit,e,e.api),e.redraw({withTransition:!1,withTransform:!0,withUpdateXDomain:!0,withUpdateOrgXDomain:!0,withTransitionForAxis:!1,initializing:!0}),i.data_onmin||i.data_onmax){var o=e.getMinMaxData();qc(i.data_onmin,e,o.min),qc(i.data_onmax,e,o.max)}e.bindResize(),e.api.element=e.selectChart.node()}},{key:"initChartElements",value:function initChartElements(){var e=this;["Bar","Radar","Line","Bubble","Arc","Gauge","Pie"].forEach(function(t){e["init".concat(t)]()}),lc(e.config.data_labels)&&e.initText()}},{key:"setChartElements",value:function setChartElements(){var t=this;t.api.$={chart:t.selectChart,svg:t.svg,defs:t.defs,main:t.main,tooltip:t.tooltip,legend:t.legend,title:t.title,grid:t.grid,arc:t.arcs,bar:{bars:t.mainBar},line:{lines:t.mainLine,areas:t.mainArea,circles:t.mainCircle},text:{texts:t.mainText}}}},{key:"smoothLines",value:function smoothLines(t,e){"grid"===e&&t.each(function(){var e=Object(B.select)(this),t=["x1","x2","y1","y2"].map(function(t){return Math.ceil(e.attr(t))}),i=k()(t,4),n=i[0],a=i[1],r=i[2],o=i[3];e.attr({x1:n,x2:a,y1:r,y2:o})})}},{key:"updateSizes",value:function updateSizes(t){var e=this,i=e.config,n=i.axis_rotated,a=e.hasArcType(),r={width:e.legend?e.getLegendWidth():0,height:e.legend?e.getLegendHeight():0},o=e.isLegendRight||e.isLegendInset?0:r.height,s=n||a?0:e.getHorizontalAxisHeight("x"),c=i.subchart_axis_x_show&&i.subchart_axis_x_tick_text_show?s:30,l=i.subchart_show&&!a?i.subchart_size_height+c:0;t||e.setContainerSize(),e.margin=n?{top:e.getHorizontalAxisHeight("y2")+e.getCurrentPaddingTop(),right:a?0:e.getCurrentPaddingRight(),bottom:e.getHorizontalAxisHeight("y")+o+e.getCurrentPaddingBottom(),left:l+(a?0:e.getCurrentPaddingLeft())}:{top:4+e.getCurrentPaddingTop(),right:a?0:e.getCurrentPaddingRight(),bottom:s+l+o+e.getCurrentPaddingBottom(),left:a?0:e.getCurrentPaddingLeft()},e.margin2=n?{top:e.margin.top,right:NaN,bottom:20+o,left:e.rotated_padding_left}:{top:e.currentHeight-l-o,right:NaN,bottom:c+o,left:e.margin.left},e.margin3={top:0,right:NaN,bottom:0,left:0},e.updateSizeForLegend&&e.updateSizeForLegend(r),e.width=e.currentWidth-e.margin.left-e.margin.right,e.height=e.currentHeight-e.margin.top-e.margin.bottom,e.width<0&&(e.width=0),e.height<0&&(e.height=0),e.width2=n?e.margin.left-e.rotated_padding_left-e.rotated_padding_right:e.width,e.height2=n?e.height:e.currentHeight-e.margin2.top-e.margin2.bottom,e.width2<0&&(e.width2=0),e.height2<0&&(e.height2=0),e.arcWidth=e.width-(e.isLegendRight?r.width+10:0),e.arcHeight=e.height-(e.isLegendRight?0:10),e.hasType("gauge")&&!i.gauge_fullCircle&&(e.arcHeight+=e.height-e.getGaugeLabelHeight()),e.updateRadius&&e.updateRadius(),e.isLegendRight&&a&&(e.margin3.left=e.arcWidth/2+1.1*e.radiusExpanded)}},{key:"updateTargets",value:function updateTargets(t){var e=this;e.updateTargetsForText(t),e.updateTargetsForBar(t),e.updateTargetsForLine(t),e.hasArcType(t)&&(e.hasType("radar")?e.updateTargetsForRadar(t):e.updateTargetsForArc(t)),e.updateTargetsForSubchart&&e.updateTargetsForSubchart(t),e.showTargets()}},{key:"showTargets",value:function showTargets(){var e=this;e.svg.selectAll(".".concat(M.target)).filter(function(t){return e.isTargetToShow(t.id)}).transition().duration(e.config.transition_duration).style("opacity","1")}},{key:"getWithOption",value:function getWithOption(i){var n={Y:!0,Subchart:!0,Transition:!0,EventRect:!0,Dimension:!0,TrimXDomain:!0,Transform:!1,UpdateXDomain:!1,UpdateOrgXDomain:!1,Legend:!1,UpdateXAxis:"UpdateXDomain",TransitionForExit:"Transition",TransitionForAxis:"Transition"};return Object.keys(n).forEach(function(t){var e=n[t];bc(e)&&(e=n[e]),n[t]=oc(i,"with".concat(t),e)}),n}},{key:"redraw",value:function redraw(t,e){var i=0<arguments.length&&void 0!==t?t:{},n=1<arguments.length?e:void 0,a=this,r=a.main,o=a.config,s=a.filterTargetsToShow(a.data.targets),c=i.initializing,l=i.flow,u=a.getWithOption(i),d=u.Transition?o.transition_duration:0,g=u.TransitionForExit?d:0,h=u.TransitionForAxis?d:0,f=n||a.axis.generateTransitions(h);c&&o.tooltip_init_show||"touch"!==a.inputType||a.hideTooltip(),a.updateSizes(c),u.Legend&&o.legend_show?a.updateLegend(a.mapToIds(a.data.targets),i,f):u.Dimension&&a.updateDimension(!0),a.axis.redrawAxis(s,u,f,l,c),a.updateDataIndexByX(),a.updateCircleY(),a.updateXgridFocus(),o.data_empty_label_text&&r.select("text.".concat(M.text,".").concat(M.empty)).attr("x",a.width/2).attr("y",a.height/2).text(o.data_empty_label_text).style("display",s.length?"none":null),a.updateGrid(d),a.updateRegion(d),a.updateBar(g),a.updateLine(g),a.updateArea(g),a.updateCircle(),a.hasDataLabel()&&a.updateText(g),a.redrawTitle&&a.redrawTitle(),a.arcs&&a.redrawArc(d,g,u.Transform),a.radars&&a.redrawRadar(d,g),a.mainText&&r.selectAll(".".concat(M.selectedCircles)).filter(a.isBarType.bind(a)).selectAll("circle").remove(),o.interaction_enabled&&!l&&u.EventRect&&(a.redrawEventRect(),a.bindZoomEvent()),c&&a.setChartElements(),a.generateRedrawList(s,l,d,u.Subchart),a.callPluginHook("$redraw",i,d)}},{key:"generateRedrawList",value:function generateRedrawList(t,e,i,n){var a=this,r=a.config,o=a.getDrawShape();r.subchart_show&&a.redrawSubchart(n,i,o);var s=e&&a.generateFlow({targets:t,flow:e,duration:e.duration,shape:o,xv:a.xv.bind(a)}),c=(i||s)&&a.isTabVisible(),l=a.getRedrawList(o,e,s,c),u=e||r.onrendered?function(){s&&s(),qc(r.onrendered,a,a.api)}:null;if(u)if(c){var d=a.generateWait();Object(P.transition)().duration(i).each(function(){l.reduce(function(t,e){return t.concat(e)},[]).forEach(function(t){return d.add(t)})}).call(d,u)}else u();a.mapToIds(a.data.targets).forEach(function(t){a.withoutFadeIn[t]=!0})}},{key:"getDrawShape",value:function getDrawShape(){var t=this,e=t.config.axis_rotated,i=t.hasType("radar"),n={type:{},indices:{}};if(t.hasTypeOf("Line")||t.hasType("bubble")||t.hasType("scatter")){var a=t.getShapeIndices(t.isLineType);if(n.indices.line=a,n.type.line=t.generateDrawLine?t.generateDrawLine(a,!1):void 0,t.hasTypeOf("Area")){var r=t.getShapeIndices(t.isAreaType);n.indices.area=r,n.type.area=t.generateDrawArea?t.generateDrawArea(r,!1):void 0}}if(t.hasType("bar")){var o=t.getShapeIndices(t.isBarType);n.indices.bar=o,n.type.bar=t.generateDrawBar?t.generateDrawBar(o):void 0}return n.pos={xForText:t.generateXYForText(n.indices,!0),yForText:t.generateXYForText(n.indices,!1),cx:(i?t.radarCircleX:e?t.circleY:t.circleX).bind(t),cy:(i?t.radarCircleY:e?t.circleX:t.circleY).bind(t)},n}},{key:"getRedrawList",value:function getRedrawList(t,e,i,n){var a=this,r=a.config,o=a.hasArcType(),s=t.pos,c=s.cx,l=s.cy,u=s.xForText,d=s.yForText,g=[];if(!o){var h=t.type,f=h.area,p=h.bar,x=h.line;(r.grid_x_lines.length||r.grid_y_lines.length)&&g.push(a.redrawGrid(n)),r.regions.length&&g.push(a.redrawRegion(n)),a.hasTypeOf("Line")&&(g.push(a.redrawLine(x,n)),a.hasTypeOf("Area")&&g.push(a.redrawArea(f,n))),a.hasType("bar")&&g.push(a.redrawBar(p,n)),lc(r.data_labels)&&g.push(a.redrawText(u,d,e,n))}return o&&!a.hasType("radar")||g.push(a.redrawCircle(c,l,n,i)),g}},{key:"updateAndRedraw",value:function updateAndRedraw(t){var e,i=0<arguments.length&&void 0!==t?t:{},n=this,a=n.config;i.withTransition=oc(i,"withTransition",!0),i.withTransform=oc(i,"withTransform",!1),i.withLegend=oc(i,"withLegend",!1),i.withUpdateXDomain=!0,i.withUpdateOrgXDomain=!0,i.withTransitionForExit=!1,i.withTransitionForTransform=oc(i,"withTransitionForTransform",i.withTransition),i.withLegend&&a.legend_show||(e=n.axis.generateTransitions(i.withTransitionForAxis?a.transition_duration:0),n.updateScales(),n.updateSvgSize(),n.transformAll(i.withTransitionForTransform,e)),n.redraw(i,e)}},{key:"redrawWithoutRescale",value:function redrawWithoutRescale(){this.redraw({withY:!1,withSubchart:!1,withEventRect:!1,withTransitionForAxis:!1})}},{key:"isTimeSeries",value:function isTimeSeries(){return"timeseries"===this.config.axis_x_type}},{key:"isCategorized",value:function isCategorized(){return 0<=this.config.axis_x_type.indexOf("category")||this.hasType("radar")}},{key:"isCustomX",value:function isCustomX(){var t=this.config;return!this.isTimeSeries()&&(t.data_x||lc(t.data_xs))}},{key:"isTimeSeriesY",value:function isTimeSeriesY(){return"timeseries"===this.config.axis_y_type}},{key:"getTranslate",value:function getTranslate(t,e){var i,n,a=1<arguments.length&&void 0!==e?e:0,r=this,o=r.config.axis_rotated,s=0;if(a&&/^(x|y2?)$/.test(t)&&(s=r.getAxisSize(t)*a),"main"===t)i=hc(r.margin.left),n=hc(r.margin.top);else if("context"===t)i=hc(r.margin2.left),n=hc(r.margin2.top);else if("legend"===t)i=r.margin3.left,n=r.margin3.top;else if("x"===t)i=o?-s:0,n=o?0:r.height+s;else if("y"===t)i=o?0:-s,n=o?r.height+s:0;else if("y2"===t)i=o?0:r.width+s,n=o?1-s:0;else if("subx"===t)i=0,n=o?0:r.height2;else if("arc"===t)i=r.arcWidth/2,n=r.arcHeight/2;else if("radar"===t){var c=r.getRadarSize(),l=k()(c,1)[0];i=r.width/2-l,n=hc(r.margin.top)}return"translate(".concat(i,", ").concat(n,")")}},{key:"initialOpacity",value:function initialOpacity(t){return null!==this.getBaseValue(t)&&this.withoutFadeIn[t.id]?"1":"0"}},{key:"initialOpacityForCircle",value:function initialOpacityForCircle(t){return null!==this.getBaseValue(t)&&this.withoutFadeIn[t.id]?this.opacityForCircle(t):"0"}},{key:"opacityForCircle",value:function opacityForCircle(t){var e=this.config.point_show?"1":"0";return _b(this.getBaseValue(t))?this.isBubbleType(t)||this.isScatterType(t)?"0.5":e:"0"}},{key:"opacityForText",value:function opacityForText(){return this.hasDataLabel()?"1":"0"}},{key:"xx",value:function xx(t){var e=this.config.zoom_enabled&&this.zoomScale?this.zoomScale:this.x;return t?e(t.x):null}},{key:"xv",value:function xv(t){var e=this,i=e.getBaseValue(t);return e.isTimeSeries()?i=e.parseDate(i):e.isCategorized()&&bc(i)&&(i=e.config.axis_x_categories.indexOf(i)),Math.ceil(e.x(i))}},{key:"yv",value:function yv(t){var e=t.axis&&"y2"===t.axis?this.y2:this.y;return Math.ceil(e(this.getBaseValue(t)))}},{key:"subxx",value:function subxx(t){return t?this.subX(t.x):null}},{key:"transformMain",value:function transformMain(t,e){var i,n,a,r=this;e&&e.axisX?i=e.axisX:(i=r.main.select(".".concat(M.axisX)),t&&(i=i.transition())),e&&e.axisY?n=e.axisY:(n=r.main.select(".".concat(M.axisY)),t&&(n=n.transition())),e&&e.axisY2?a=e.axisY2:(a=r.main.select(".".concat(M.axisY2)),t&&(a=a.transition())),(t?r.main.transition():r.main).attr("transform",r.getTranslate("main")),i.attr("transform",r.getTranslate("x")),n.attr("transform",r.getTranslate("y")),a.attr("transform",r.getTranslate("y2")),r.main.select(".".concat(M.chartArcs)).attr("transform",r.getTranslate("arc"))}},{key:"transformAll",value:function transformAll(t,e){var i=this;i.transformMain(t,e),i.config.subchart_show&&i.transformContext(t,e),i.legend&&i.transformLegend(t)}},{key:"updateSvgSize",value:function updateSvgSize(){var t=this,e=t.svg.select(".".concat(M.brush," .overlay")),i={width:0,height:0};e.size()&&(i.width=+e.attr("width"),i.height=+e.attr("height")),t.svg.attr("width",t.currentWidth).attr("height",t.currentHeight),t.svg.selectAll(["#".concat(t.clipId),"#".concat(t.clipIdForGrid)]).select("rect").attr("width",t.width).attr("height",t.height),t.svg.select("#".concat(t.clipIdForXAxis)).select("rect").attr("x",t.getXAxisClipX.bind(t)).attr("y",t.getXAxisClipY.bind(t)).attr("width",t.getXAxisClipWidth.bind(t)).attr("height",t.getXAxisClipHeight.bind(t)),t.svg.select("#".concat(t.clipIdForYAxis)).select("rect").attr("x",t.getYAxisClipX.bind(t)).attr("y",t.getYAxisClipY.bind(t)).attr("width",t.getYAxisClipWidth.bind(t)).attr("height",t.getYAxisClipHeight.bind(t)),t.svg.select("#".concat(t.clipIdForSubchart)).select("rect").attr("width",t.width).attr("height",i.height),t.svg.select(".".concat(M.zoomRect)).attr("width",t.width).attr("height",t.height)}},{key:"updateDimension",value:function updateDimension(t){var e=this;t||(e.xAxis&&e.config.axis_rotated?(e.xAxis.create(e.axes.x),e.subXAxis.create(e.axes.subx)):(e.yAxis&&e.yAxis.create(e.axes.y),e.y2Axis&&e.y2Axis.create(e.axes.y2))),e.updateScales(t),e.updateSvgSize(),e.transformAll(!1)}},{key:"bindResize",value:function bindResize(){var t=this,e=t.config;t.resizeFunction=t.generateResize(),t.resizeFunction.add(function(){return qc(e.onresize,t,t.api)}),e.resize_auto&&t.resizeFunction.add(function(){t.resizeTimeout&&(O.b.clearTimeout(t.resizeTimeout),t.resizeTimeout=null),t.resizeTimeout=O.b.setTimeout(function(){t.api.flush(!1,!0)},200)}),t.resizeFunction.add(function(){return qc(e.onresized,t,t.api)}),O.b.addEventListener("resize",t.resizeFunction)}},{key:"generateResize",value:function generateResize(){function callResizeFunctions(){e.forEach(function(t){return t()})}var e=[];return callResizeFunctions.add=function(t){return e.push(t)},callResizeFunctions.remove=function(t){return e.splice(e.indexOf(t),1)},callResizeFunctions}},{key:"endall",value:function endall(t,n){var a=0;t.each(function(){return++a}).on("end",function(){for(var t=arguments.length,e=Array(t),i=0;i<t;i++)e[i]=arguments[i];--a||n.apply.apply(n,[this].concat(e))})}},{key:"generateWait",value:function generateWait(){function fp(t,n){var a;!function loop(){for(var t,e=0,i=0;t=r[i];i++)if(t.empty())e++;else try{t.transition()}catch(t){e++}a&&clearTimeout(a),e===r.length?n&&n():a=setTimeout(loop,50)}()}var r=[];return fp.add=function(t){mc(t)?r=r.concat(t):r.push(t)},fp}},{key:"parseDate",value:function parseDate(t){var e;return t instanceof Date?e=t:bc(t)?e=this.dataTimeFormat(this.config.data_xFormat)(t):cc(t)&&!isNaN(t)&&(e=new Date(+t)),(!e||isNaN(+e))&&console&&console.error&&console.error("Failed to parse x '".concat(t,"' to Date object")),e}},{key:"isTabVisible",value:function isTabVisible(){return!O.a.hidden}},{key:"convertInputType",value:function convertInputType(){var t=this.config,e=!1;if(/Mobi/.test(O.b.navigator.userAgent)&&t.interaction_inputType_touch){var i=O.b.navigator&&"maxTouchPoints"in O.b.navigator&&0<O.b.navigator.maxTouchPoints,n="ontouchmove"in O.b||O.b.DocumentTouch&&O.a instanceof O.b.DocumentTouch;e=i||n}return(t.interaction_inputType_mouse&&!e&&"onmouseover"in O.b?"mouse":e&&"touch")||null}},{key:"callPluginHook",value:function callPluginHook(e){for(var i=this,t=arguments.length,n=Array(1<t?t-1:0),a=1;a<t;a++)n[a-1]=arguments[a];this.config.plugins.forEach(function(t){"$beforeInit"===e&&(t.$$=i).api.plugins.push(t),t[e].apply(t,n)})}}]),ChartInternal}();yc(b.prototype,{getOptions:function getOptions(){return new Sc},loadConfig:function loadConfig(e){var i,n,a,r=this.config,o=function(){var t=n.shift();return t&&i&&jc(i)&&t in i?(i=i[t],o()):t?void 0:i};Object.keys(r).forEach(function(t){i=e,n=t.split("_"),a=o(),ec(a)&&(r[t]=a)})}}),yc(b.prototype,{getScale:function getScale(t,e,i){return(i?Object(m.scaleTime)():Object(m.scaleLinear)()).range([t,e])},getX:function getX(t,e,i,n){var a=this.zoomScale||this.getScale(t,e,this.isTimeSeries());return this.getCustomizedScale(i?a.domain(i):a,n)},getY:function getY(t,e,i){var n=this.getScale(t,e,this.isTimeSeriesY());return i&&n.domain(i),n},getCustomizedScale:function getCustomizedScale(n,t){function iq(t,e){var i=n(t)+a();return e?i:Math.ceil(i)}var e=this,a=t||function(){return e.xAxis.tickOffset()};for(var i in n)iq[i]=n[i];return iq.orgDomain=function(){return n.domain()},iq.orgScale=function(){return n},e.isCategorized()&&(iq.domain=function(t){var e=t;return arguments.length?(n.domain(e),iq):[(e=this.orgDomain())[0],e[1]+1]}),iq},getYScale:function getYScale(t){return"y2"===this.axis.getId(t)?this.y2:this.y},getSubYScale:function getSubYScale(t){return"y2"===this.axis.getId(t)?this.subY2:this.subY},updateScales:function updateScales(t,e){var i=!(1<arguments.length&&void 0!==e)||e,n=this,a=n.config,r=a.axis_rotated;n.xMin=r?1:0,n.xMax=r?n.height:n.width,n.yMin=r?0:n.height,n.yMax=r?n.width:1,n.subXMin=n.xMin,n.subXMax=n.xMax,n.subYMin=r?0:n.height2,n.subYMax=r?n.width2:1;var o=i&&n.x&&n.x.orgDomain(),s=i&&n.orgXDomain;n.x=n.getX(n.xMin,n.xMax,o,function(){return n.xAxis.tickOffset()}),n.subX=n.getX(n.xMin,n.xMax,s,function(t){return t%1?0:n.subXAxis.tickOffset()}),n.xAxisTickFormat=n.axis.getXAxisTickFormat(),n.xAxisTickValues=n.axis.getTickValues("x"),n.xAxis=n.axis.getAxis("x",n.x,a.axis_x_tick_outer,t),n.subXAxis=n.axis.getAxis("subX",n.subX,a.axis_x_tick_outer,t),n.y=n.getY(n.yMin,n.yMax,n.y?n.y.domain():a.axis_y_default),n.subY=n.getY(n.subYMin,n.subYMax,n.subY?n.subY.domain():a.axis_y_default),n.yAxisTickValues=n.axis.getTickValues("y"),n.yAxis=n.axis.getAxis("y",n.y,a.axis_y_tick_outer,t),a.axis_y2_show&&(n.y2=n.getY(n.yMin,n.yMax,n.y2?n.y2.domain():a.axis_y2_default),n.subY2=n.getY(n.subYMin,n.subYMax,n.subY2?n.subY2.domain():a.axis_y2_default),n.y2AxisTickValues=n.axis.getTickValues("y2"),n.y2Axis=n.axis.getAxis("y2",n.y2,a.axis_y2_tick_outer,t)),n.updateArc&&n.updateArc()}}),yc(b.prototype,{getYDomainMinMax:function getYDomainMinMax(i,e){var l=this,t=l.config,u="min"===e,n=t.data_groups,d=l.mapToIds(i),g=l.getValuesAsIdKeyed(i);return 0<n.length&&function(){for(var s,c=l["has".concat(u?"Negative":"Positive","ValueInTargets")](i),t=function(t,e){if(0===(e=e.filter(function(t){return 0<=d.indexOf(t)})).length)return s=e,"continue";var a=e[0],r=l.axis.getId(a);c&&g[a]&&(g[a]=g[a].map(function(t){return(u?t<0:0<t)?t:0}));for(var i,n=function(t,e){if(!g[e])return"continue";var n=l.axis.getId(e);g[e].forEach(function(t,e){var i=+t;n!==r||c&&(u?0<i:i<0)||(g[a][e]+=i)})},o=1;i=e[o];o++)n(0,i);s=e},e=0;s=n[e];e++)t(0,s)}(),Gc(e,Object.keys(g).map(function(t){return Gc(e,g[t])}))},getYDomainMin:function getYDomainMin(t){return this.getYDomainMinMax(t,"min")},getYDomainMax:function getYDomainMax(t){return this.getYDomainMinMax(t,"max")},getYDomain:function getYDomain(t,e,i){var n=this,a=n.config;if(n.isStackNormalized())return[0,100];var r=t.filter(function(t){return n.axis.getId(t.id)===e}),o=i?n.filterByXDomain(r,i):r,s=a["axis_".concat(e,"_min")],c=a["axis_".concat(e,"_max")],l=n.getYDomainMin(o),u=n.getYDomainMax(o),d=a["axis_".concat(e,"_center")],g=n.hasType("bar",o)&&a.bar_zerobased||n.hasType("area",o)&&a.area_zerobased,h=a["axis_".concat(e,"_inverted")],f=n.hasDataLabel()&&a.axis_rotated,p=n.hasDataLabel()&&!a.axis_rotated;if(l=_b(s)?s:_b(c)?l<c?l:c-10:l,u=_b(c)?c:_b(s)?s<u?u:s+10:u,0===o.length)return n[e].domain();isNaN(l)&&(l=0),isNaN(u)&&(u=l),l===u&&(l<0?u=0:l=0);var x=0<=l&&0<=u,v=l<=0&&u<=0;(_b(s)&&x||_b(c)&&v)&&(g=!1),g&&(x&&(l=0),v&&(u=0));var m=Math.abs(u-l),_={top:.1*m,bottom:.1*m};if(ec(d)){var y=Math.max(Math.abs(l),Math.abs(u));u=d+y,l=d-y}if(f){var b=ic(n.y.range()),T=n.getDataLabelLength(l,u,"width").map(function(t){return t/b});["bottom","top"].forEach(function(t,e){_[t]+=m*(T[e]/(1-T[0]-T[1]))})}else if(p){var A=n.getDataLabelLength(l,u,"height");["bottom","top"].forEach(function(t,e){_[t]+=n.axis.convertPixelsToAxisPadding(A[e],m)})}if(/^y2?$/.test(e)){var w=a["axis_".concat(e,"_padding")];lc(w)&&["bottom","top"].forEach(function(t){_[t]=n.axis.getPadding(w,t,_[t],m)})}g&&(x&&(_.bottom=l),v&&(_.top=-u));var L=[l-_.bottom,u+_.top];return h?L.reverse():L},getXDomainMinMax:function getXDomainMinMax(t,e){var i=this.config["axis_x_".concat(e)];return ec(i)?this.isTimeSeries()?this.parseDate(i):i:Gc(e,t.map(function(t){return Gc(e,t.values.map(function(t){return t.x}))}))},getXDomainMin:function getXDomainMin(t){return this.getXDomainMinMax(t,"min")},getXDomainMax:function getXDomainMax(t){return this.getXDomainMinMax(t,"max")},getXDomainPadding:function getXDomainPadding(t){var e,i,n=this.config,a=t[1]-t[0],r=n.axis_x_padding,o=i=this.isCategorized()?0:this.hasType("bar")?1<(e=this.getMaxDataCount())?a/(e-1)/2:.5:.01*a,s=i;return nc(r)&&lc(r)?(o=_b(r.left)?r.left:i,s=_b(r.right)?r.right:i):cc(n.axis_x_padding)&&(s=o=r),{left:o,right:s}},getXDomain:function getXDomain(t){var e=this,i=[e.getXDomainMin(t),e.getXDomainMax(t)],n=i[0],a=i[1],r=e.getXDomainPadding(i),o=0,s=0;return n-a!=0||e.isCategorized()||(a=e.isTimeSeries()?(n=new Date(.5*n.getTime()),new Date(1.5*a.getTime())):(n=0===n?1:.5*n,0===a?-1:1.5*a)),!n&&0!==n||(o=e.isTimeSeries()?new Date(n.getTime()-r.left):n-r.left),!a&&0!==a||(s=e.isTimeSeries()?new Date(a.getTime()+r.right):a+r.right),[o,s]},updateXDomain:function updateXDomain(t,e,i,n,a){var r=this,o=r.config.zoom_enabled;if(i&&(r.x.domain(a||Fc(r.getXDomain(t))),r.orgXDomain=r.x.domain(),o&&r.zoom.updateScaleExtent(),r.subX.domain(r.x.domain()),r.brush&&r.brush.scale(r.subX)),e){var s=a||!r.brush||xc(r)?r.orgXDomain:vc(r).map(r.subX.invert);r.x.domain(s),o&&r.zoom.updateScaleExtent()}return n&&r.x.domain(r.trimXDomain(r.x.orgDomain())),r.x.domain()},trimXDomain:function trimXDomain(t){var e=this.getZoomDomain(),i=k()(e,2),n=i[0],a=i[1];return t[0]<=n&&(t[1]=+t[1]+(n-t[0]),t[0]=n),a<=t[1]&&(t[0]=+t[0]-(t[1]-a),t[1]=a),t}}),yc(b.prototype,{isX:function isX(t){var e=this.config,i=e.data_x&&t===e.data_x,n=lc(e.data_xs)&&function(e,i){var n=!1;return Object.keys(e).forEach(function(t){return e[t]===i&&(n=!0)}),n}(e.data_xs,t);return i||n},isNotX:function isNotX(t){return!this.isX(t)},isStackNormalized:function isStackNormalized(){var t=this.config;return t.data_stack_normalize&&t.data_groups.length},isGrouped:function isGrouped(e){return this.config.data_groups.map(function(t){return 0<=t.indexOf(e)})[0]},getXKey:function getXKey(t){var e=this.config;return e.data_x?e.data_x:lc(e.data_xs)?e.data_xs[t]:null},getXValuesOfXKey:function getXValuesOfXKey(e,t){var i,n=this;return(t&&lc(t)?n.mapToIds(t):[]).forEach(function(t){n.getXKey(t)===e&&(i=n.data.xs[t])}),i},getIndexByX:function getIndexByX(t,e){return e?e.indexOf(bc(t)?t:+t):(this.filterByX(this.data.targets,t)[0]||{index:null}).index},getXValue:function getXValue(t,e){return t in this.data.xs&&this.data.xs[t]&&_b(this.data.xs[t][e])?this.data.xs[t][e]:e},getOtherTargetXs:function getOtherTargetXs(){var t=Object.keys(this.data.xs);return t.length?this.data.xs[t[0]]:null},getOtherTargetX:function getOtherTargetX(t){var e=this.getOtherTargetXs();return e&&t<e.length?e[t]:null},addXs:function addXs(e){var i=this;Object.keys(e).forEach(function(t){i.config.data_xs[t]=e[t]})},hasMultipleX:function hasMultipleX(e){return 1<Object.keys(e).map(function(t){return e[t]}).length},isMultipleX:function isMultipleX(){return lc(this.config.data_xs)||!this.config.data_xSort||this.hasType("bubble")||this.hasType("scatter")},addName:function addName(t){var e;return t&&(e=this.config.data_names[t.id],t.name=void 0===e?t.id:e),t},getAllValuesOnIndex:function getAllValuesOnIndex(e){var i=this;return i.filterTargetsToShow(i.data.targets).map(function(t){return i.addName(i.getValueOnIndex(t.values,e))})},getValueOnIndex:function getValueOnIndex(t,e){var i=t.filter(function(t){return t.index===e});return i.length?i[0]:null},updateTargetX:function updateTargetX(t,n){var a=this;t.forEach(function(i){i.values.forEach(function(t,e){t.x=a.generateTargetX(n[e],i.id,e)}),a.data.xs[i.id]=n})},updateTargetXs:function updateTargetXs(t,e){var i=this;t.forEach(function(t){e[t.id]&&i.updateTargetX([t],e[t.id])})},generateTargetX:function generateTargetX(t,e,i){var n=this,a=n.isCategorized()?i:t||i;return n.isTimeSeries()?a=t?n.parseDate(t):n.parseDate(n.getXValue(e,i)):n.isCustomX()&&!n.isCategorized()&&(a=_b(t)?+t:n.getXValue(e,i)),a},cloneTarget:function cloneTarget(t){return{id:t.id,id_org:t.id_org,values:t.values.map(function(t){return{x:t.x,value:t.value,id:t.id}})}},updateXs:function updateXs(){this.xs=this.axis.getTickValues("x")||[]},getPrevX:function getPrevX(t){var e=this.xs[t-1];return ec(e)?e:null},getNextX:function getNextX(t){var e=this.xs[t+1];return ec(e)?e:null},getBaseValue:function getBaseValue(t){var e=t.value;return e&&(this.isAreaRangeType(t)?e=this.getAreaRangeData(t,"mid"):this.isBubbleZType(t)&&(e=this.getBubbleZData(e,"y"))),e},getMinMaxValue:function getMinMaxValue(t){var n,a,r=this.getBaseValue.bind(this);return(t||this.data.targets.map(function(t){return t.values})).forEach(function(t,e){var i=t.map(r).filter(cc);n=Math.min.apply(Math,[e?n:1/0].concat(C()(i))),a=Math.max.apply(Math,[e?a:-1/0].concat(C()(i)))}),{min:n,max:a}},getMinMaxData:function getMinMaxData(){var n=this,t="$minMaxData",e=n.getCache(t);if(!e){var i=n.data.targets.map(function(t){return t.values}),a=n.getMinMaxValue(i),r=[],o=[];i.forEach(function(t){var e=n.getFilteredDataByValue(t,a.min),i=n.getFilteredDataByValue(t,a.max);e.length&&(r=r.concat(e)),i.length&&(o=o.concat(i))}),n.addCache(t,e={min:r,max:o})}return e},getTotalPerIndex:function getTotalPerIndex(){var i=this.getCache("$totalPerIndex");return this.isStackNormalized()&&!i&&(i=[],this.data.targets.forEach(function(t){t.values.forEach(function(t,e){i[e]||(i[e]=0),i[e]+=cc(t.value)?t.value:0})})),i},getTotalDataSum:function getTotalDataSum(){var t="$totalDataSum",e=this.getCache(t);if(!e){var i=Dc(this.data.targets.map(function(t){return t.values})).map(function(t){return t.value}).reduce(function(t,e){return t+e});this.addCache(t,e=i)}return e},getFilteredDataByValue:function getFilteredDataByValue(t,e){var i=this;return t.filter(function(t){return i.getBaseValue(t)===e})},getMaxDataCount:function getMaxDataCount(){return Math.max.apply(Math,C()(this.data.targets.map(function(t){return t.values.length})))},getMaxDataCountTarget:function getMaxDataCountTarget(t){var e,i=t.length,n=0;return 1<i?t.forEach(function(t){t.values.length>n&&(n=(e=t).values.length)}):e=i?t[0]:null,e},mapToIds:function mapToIds(t){return t.map(function(t){return t.id})},mapToTargetIds:function mapToTargetIds(t){return t?mc(t)?t.concat():[t]:this.mapToIds(this.data.targets)},hasTarget:function hasTarget(t,e){for(var i,n=this.mapToIds(t),a=0;i=n[a];a++)if(i===e)return!0;return!1},isTargetToShow:function isTargetToShow(t){return this.hiddenTargetIds.indexOf(t)<0},isLegendToShow:function isLegendToShow(t){return this.hiddenLegendIds.indexOf(t)<0},filterTargetsToShow:function filterTargetsToShow(t){var e=this;return(t||e.data.targets).filter(function(t){return e.isTargetToShow(t.id)})},mapTargetsToUniqueXs:function mapTargetsToUniqueXs(t){var e=[];return t&&t.length&&(e=function(t){return t.filter(function(t,e,i){return i.indexOf(t)===e})}(Dc(t.map(function(t){return t.values.map(function(t){return+t.x})}))),e=this.isTimeSeries()?e.map(function(t){return new Date(+t)}):e.map(function(t){return+t})),Fc(e)},addHiddenTargetIds:function addHiddenTargetIds(t){this.hiddenTargetIds=this.hiddenTargetIds.concat(t)},removeHiddenTargetIds:function removeHiddenTargetIds(e){this.hiddenTargetIds=this.hiddenTargetIds.filter(function(t){return e.indexOf(t)<0})},addHiddenLegendIds:function addHiddenLegendIds(t){this.hiddenLegendIds=this.hiddenLegendIds.concat(t)},removeHiddenLegendIds:function removeHiddenLegendIds(e){this.hiddenLegendIds=this.hiddenLegendIds.filter(function(t){return e.indexOf(t)<0})},getValuesAsIdKeyed:function getValuesAsIdKeyed(t){var n=this,e={},a=n.isMultipleX(),r=a?n.mapTargetsToUniqueXs(t).map(function(t){return bc(t)?t:+t}):null;return t.forEach(function(t){var i=[];t.values.forEach(function(t){var e=t.value;mc(e)?i.push.apply(i,C()(e)):nc(e)&&"high"in e?i.push.apply(i,C()(Object.values(e))):n.isBubbleZType(t)?i.push(n.getBubbleZData(e,"y")):a?i[n.getIndexByX(t.x,r)]=e:i.push(e)}),e[t.id]=i}),e},checkValueInTargets:function checkValueInTargets(t,e){for(var i,n=Object.keys(t),a=0;a<n.length;a++){i=t[n[a]].values;for(var r=0;r<i.length;r++)if(e(i[r].value))return!0}return!1},hasMultiTargets:function hasMultiTargets(){return 1<this.filterTargetsToShow().length},hasNegativeValueInTargets:function hasNegativeValueInTargets(t){return this.checkValueInTargets(t,function(t){return t<0})},hasPositiveValueInTargets:function hasPositiveValueInTargets(t){return this.checkValueInTargets(t,function(t){return 0<t})},_checkOrder:function _checkOrder(t){var e=this.config.data_order;return bc(e)&&e.toLowerCase()===t},isOrderDesc:function isOrderDesc(){return this._checkOrder("desc")},isOrderAsc:function isOrderAsc(){return this._checkOrder("asc")},orderTargets:function orderTargets(t){var e=this.config,i=C()(t),a=this.isOrderAsc(),n=this.isOrderDesc();return a||n?i.sort(function(t,e){function Fv(t,e){return t+Math.abs(e.value)}var i=t.values.reduce(Fv,0),n=e.values.reduce(Fv,0);return a?n-i:i-n}):ac(e.data_order)&&i.sort(e.data_order),i},filterByX:function filterByX(t,e){return Dc(t.map(function(t){return t.values})).filter(function(t){return t.x-e==0})},filterRemoveNull:function filterRemoveNull(t){var e=this;return t.filter(function(t){return _b(e.getBaseValue(t))})},filterByXDomain:function filterByXDomain(t,e){return t.map(function(t){return{id:t.id,id_org:t.id_org,values:t.values.filter(function(t){return e[0]<=t.x&&t.x<=e[1]})}})},hasDataLabel:function hasDataLabel(){var t=this.config.data_labels;return fc(t)&&t||jc(t)&&lc(t)},getDataLabelLength:function getDataLabelLength(t,e,i){var n=this,a=[0,0];return n.selectChart.select("svg").selectAll(".dummy").data([t,e]).enter().append("text").text(function(t){return n.dataLabelFormat(t.id)(t)}).each(function(t,e){a[e]=1.3*this.getBoundingClientRect()[i]}).remove(),a},isNoneArc:function isNoneArc(t){return this.hasTarget(this.data.targets,t.id)},isArc:function isArc(t){return"data"in t&&this.hasTarget(this.data.targets,t.data.id)},findSameXOfValues:function findSameXOfValues(t,e){var i,n=t[e].x,a=[];for(i=e-1;0<=i&&n===t[i].x;i--)a.push(t[i]);for(i=e;i<t.length&&n===t[i].x;i++)a.push(t[i]);return a},findClosestFromTargets:function findClosestFromTargets(t,e){var i=this,n=t.map(function(t){return i.findClosest(t.values,e)});return i.findClosest(n,e)},findClosest:function findClosest(t,i){var n,a=this,r=a.config.point_sensitivity;return t.filter(function(t){return t&&a.isBarType(t.id)}).forEach(function(t){var e=a.main.select(".".concat(M.bars).concat(a.getTargetSelectorSuffix(t.id)," .").concat(M.bar,"-").concat(t.index)).node();!n&&a.isWithinBar(e)&&(n=t)}),t.filter(function(t){return t&&!a.isBarType(t.id)}).forEach(function(t){var e=a.dist(t,i);e<r&&(r=e,n=t)}),n},dist:function dist(t,e){var i=this.config.axis_rotated,n=i?1:0,a=i?0:1,r=this.circleY(t,t.index),o=(this.zoomScale||this.x)(t.x);return Math.sqrt(Math.pow(o-e[n],2)+Math.pow(r-e[a],2))},convertValuesToStep:function convertValuesToStep(t){var e=this.config,i=e.axis_rotated,n=e.line_step_type,a=this.isCategorized(),r=mc(t)?t.concat():[t];if(!i&&!a)return t;var o=r[0].id,s=r[0].x-1,c=r[0].value;return a&&r.unshift({x:s,value:c,id:o}),"step-after"===n&&r.unshift({x:s-1,value:c,id:o}),c=r[(s=r.length)-1].value,a&&r.push({x:s,value:c,id:o}),"step-before"===n&&r.push({x:s+1,value:c,id:o}),r},convertValuesToRange:function convertValuesToRange(t){var e=mc(t)?t.concat():[t],n=[];return e.forEach(function(t){var e=t.x,i=t.id;n.push({x:e,id:i,value:t.value[0]}),n.push({x:e,id:i,value:t.value[2]})}),n},updateDataAttributes:function updateDataAttributes(t,e){var i=this.config["data_".concat(t)];return dc(e)||(Object.keys(e).forEach(function(t){i[t]=e[t]}),this.redraw({withLegend:!0})),i},getAreaRangeData:function getAreaRangeData(t,e){var i=t.value;if(mc(i)){var n=["high","mid","low"].indexOf(e);return-1===n?null:i[n]}return i[e]},getRatio:function getRatio(t,e,i){var n=this,a=n.config,r=n.api,o=0;if(e&&r.data.shown.call(r).length){var s=r.data.values.bind(r);if(o=e.ratio||e.value,"arc"===t)if(n.pie.padAngle()()){var c=n.getTotalDataSum();n.hiddenTargetIds.length&&(c-=s(n.hiddenTargetIds).reduce(function(t,e){return t+e})),o=e.value/c}else o=(e.endAngle-e.startAngle)/(Math.PI*(n.hasType("gauge")&&!a.gauge_fullCircle?1:2));else if("index"===t){var l=this.getTotalPerIndex();if(n.hiddenTargetIds.length){var u=s(n.hiddenTargetIds,!1);u.length&&(u=u.reduce(function(t,i){return t.map(function(t,e){return(cc(t)?t:0)+i[e]})}),l=l.map(function(t,e){return t-u[e]}))}e.ratio=cc(e.value)&&l&&0<l[e.index]?e.value/l[e.index]:0,o=e.ratio}else"radar"===t&&(o=parseFloat(Math.max(e.value,0))/n.maxValue*a.radar_size_ratio)}return i&&o?100*o:o},updateDataIndexByX:function updateDataIndexByX(){var t=this,e=t.isTimeSeries(),n=t.flowing?t.getMaxDataCountTarget(t.data.targets).values.map(function(t){return t.x}):t.axis.getTickValues("x")||[];t.data.targets.forEach(function(t){t.values.forEach(function(i,t){e?n.some(function(t,e){return!(+t!=+i.x||(i.index=e,0))}):i.index=n.indexOf(i.x),cc(i.index)&&-1!==i.index||(i.index=t)})})}});var T=i(21);yc(b.prototype,{convertData:function convertData(i,t){var n;if(i.bindto?(n={},["url","mimeType","headers","keys","json","keys","rows","columns"].forEach(function(t){var e="data_".concat(t);e in i&&(n[t]=i[e])})):n=i,n.url&&t)this.convertUrlToData(n.url,n.mimeType,n.headers,n.keys,t);else if(n.json)n=this.convertJsonToData(n.json,n.keys);else if(n.rows)n=this.convertRowsToData(n.rows);else if(n.columns)n=this.convertColumnsToData(n.columns);else if(i.bindto)throw Error("url or json or rows or columns is required.");return n},convertUrlToData:function convertUrlToData(e,t,i,n,a){var r=this,o=1<arguments.length&&void 0!==t?t:"csv",s=2<arguments.length?i:void 0,c=3<arguments.length?n:void 0,l=4<arguments.length?a:void 0,u=new XMLHttpRequest;s&&Object.keys(s).forEach(function(t){u.setRequestHeader(t,s[t])}),u.open("GET",e),u.onreadystatechange=function(){if(4===u.readyState){if(200!==u.status)throw new Error("".concat(e,": Something went wrong loading!"));var t=u.responseText;t&&l.call(r,r["convert".concat(zc(o),"ToData")]("json"===o?JSON.parse(t):t,c))}},u.send()},_convertCsvTsvToData:function _convertCsvTsvToData(t,e){var i,n=t.rows(e);return 1===n.length?(i=[{}],n[0].forEach(function(t){i[0][t]=null})):i=t.parse(e),i},convertCsvToData:function convertCsvToData(t){return this._convertCsvTsvToData({rows:T.csvParseRows,parse:T.csvParse},t)},convertTsvToData:function convertTsvToData(t){return this._convertCsvTsvToData({rows:T.tsvParseRows,parse:T.tsvParse},t)},convertJsonToData:function convertJsonToData(i,t){var e,n,a=this,r=this.config,o=[];if(mc(i)){var s=t||r.data_keys;s.x?(e=s.value.concat(s.x),r.data_x=s.x):e=s.value,o.push(e),i.forEach(function(i){var t=e.map(function(t){var e=a.findValueInJson(i,t);return dc(e)&&(e=null),e});o.push(t)}),n=this.convertRowsToData(o)}else Object.keys(i).forEach(function(t){var e=i[t].concat();e.unshift(t),o.push(e)}),n=this.convertColumnsToData(o);return n},findValueInJson:function findValueInJson(t,e){if(void 0!==t[e])return t[e];var i=e.replace(/\[(\w+)\]/g,".$1").replace(/^\./,"").split("."),n=t;return i.some(function(t){return!(n=n&&t in n?n[t]:void 0)}),n},convertRowsToData:function convertRowsToData(t){for(var e=t[0],i=[],n=1,a=t.length;n<a;n++){for(var r={},o=0,s=t[n].length;o<s;o++){if(dc(t[n][o]))throw new Error("Source data is missing a component at (".concat(n,", ").concat(o,")!"));r[e[o]]=t[n][o]}i.push(r)}return i},convertColumnsToData:function convertColumnsToData(t){for(var e=[],i=0,n=t.length;i<n;i++)for(var a=t[i][0],r=1,o=t[i].length;r<o;r++){if(dc(e[r-1])&&(e[r-1]={}),dc(t[i][r]))throw new Error("Source data is missing a component at (".concat(i,", ").concat(r,")!"));e[r-1][a]=t[i][r]}return e},convertDataToTargets:function convertDataToTargets(t,n){var a,r=this,d=this,g=d.config,o=d.isTimeSeries(),e=Object.keys(t[0]||{}),i=e.length?e.filter(d.isNotX,d):[],s=e.length?e.filter(d.isX,d):[];i.forEach(function(i){var e=r.getXKey(i);r.isCustomX()||o?0<=s.indexOf(e)?a=(n&&d.data.xs[i]||[]).concat(t.map(function(t){return t[e]}).filter(_b).map(function(t,e){return d.generateTargetX(t,i,e)})):g.data_x?a=r.getOtherTargetXs():lc(g.data_xs)&&(a=d.getXValuesOfXKey(e,d.data.targets)):a=t.map(function(t,e){return e}),a&&(r.data.xs[i]=a)}),i.forEach(function(t){if(!r.data.xs[t])throw new Error('x is not defined for id = "'.concat(t,'".'))});var c=i.map(function(r,o){var s=g.data_idConverter(r),c=d.getXKey(r),l=d.isCustomX()&&d.isCategorized(),u=l&&t.map(function(t){return t.x}).every(function(t){return-1<g.axis_x_categories.indexOf(t)});return{id:s,id_org:r,values:t.map(function(t,e){var i,n=t[c],a=t[r];return a=null===a||isNaN(a)||nc(a)?mc(a)||nc(a)?a:null:+t[r],l&&0===o&&!dc(n)?(u||0!==o||0!==e||(g.axis_x_categories=[]),-1===(i=g.axis_x_categories.indexOf(n))&&(i=g.axis_x_categories.length,g.axis_x_categories.push(n))):i=d.generateTargetX(n,r,e),(dc(t[r])||d.data.xs[r].length<=e)&&(i=void 0),{x:i,value:a,id:s}}).filter(function(t){return ec(t.x)})}});return c.forEach(function(t){g.data_xSort&&(t.values=t.values.sort(function(t,e){return(t.x||0===t.x?t.x:1/0)-(e.x||0===e.x?e.x:1/0)})),t.values.forEach(function(t,e){return t.index=e}),d.data.xs[t.id].sort(function(t,e){return t-e})}),d.hasNegativeValue=d.hasNegativeValueInTargets(c),d.hasPositiveValue=d.hasPositiveValueInTargets(c),g.data_type&&d.setTargetType(d.mapToIds(c).filter(function(t){return!(t in g.data_types)}),g.data_type),c.forEach(function(t){return d.addCache(t.id_org,t,!0)}),c}}),yc(b.prototype,{load:function load(t,i){var n=this,a=t;a&&(i.filter&&(a=a.filter(i.filter)),(i.type||i.types)&&a.forEach(function(t){var e=i.types&&i.types[t.id]||i.type;n.setTargetType(t.id,e)}),n.data.targets.forEach(function(t){for(var e=0;e<a.length;e++)if(t.id===a[e].id){t.values=a[e].values,a.splice(e,1);break}}),n.data.targets=n.data.targets.concat(a)),n.updateTargets(n.data.targets),n.redraw({withUpdateOrgXDomain:!0,withUpdateXDomain:!0,withLegend:!0}),i.done&&i.done()},loadFromArgs:function loadFromArgs(e){var i=this;if(i.config){i.resetCache();var t=e.data||i.convertData(e,function(t){return i.load(i.convertDataToTargets(t),e)});i.load(t?i.convertDataToTargets(t):null,e)}},unload:function unload(t,e){var i=this,n=e,a=t;return i.resetCache(),n=n||function(){},(a=a.filter(function(t){return i.hasTarget(i.data.targets,t)}))&&0!==a.length?(i.svg.selectAll(a.map(function(t){return i.selectorTarget(t)})).transition().style("opacity","0").remove().call(i.endall,n),void a.forEach(function(e){i.withoutFadeIn[e]=!1,i.legend&&i.legend.selectAll(".".concat(M.legendItem).concat(i.getTargetSelectorSuffix(e))).remove(),i.data.targets=i.data.targets.filter(function(t){return t.id!==e})})):void n()}}),yc(b.prototype,{categoryName:function categoryName(t){var e=this.config;return t<e.axis_x_categories.length?e.axis_x_categories[t]:t}});var A=i(22);yc(b.prototype,{initEventRect:function initEventRect(){this.main.select(".".concat(M.chart)).append("g").attr("class",M.eventRects).style("fill-opacity","0")},redrawEventRect:function redrawEventRect(){var t,e=this,i=e.config,n=e.isMultipleX(),a=i.zoom_enabled,r=e.main.select(".".concat(M.eventRects)).style("cursor",a&&"drag"!==a.type?i.axis_rotated?"ns-resize":"ew-resize":null).classed(M.eventRectsMultiple,n).classed(M.eventRectsSingle,!n);if(r.selectAll(".".concat(M.eventRect)).remove(),e.eventRect=r.selectAll(".".concat(M.eventRect)),n)t=e.eventRect.data([0]),t=e.generateEventRectsForMultipleXs(t.enter()).merge(t);else{var o=e.flowing?e.getMaxDataCountTarget(e.data.targets).values:(e.axis.getTickValues("x")||[]).map(function(t,e){return{x:t,index:e}});r.datum(o),e.eventRect=r.selectAll(".".concat(M.eventRect)),(t=e.eventRect.data(function(t){return t})).exit().remove(),t=e.generateEventRectsForSingleX(t.enter()).merge(t)}e.updateEventRect(t),"touch"!==e.inputType||e.svg.on("touchstart.eventRect")||e.hasArcType()||e.bindTouchOnEventRect(n)},bindTouchOnEventRect:function bindTouchOnEventRect(n){function lA(){var t=B.event.changedTouches[0];return Object(B.select)(O.a.elementFromPoint(t.clientX,t.clientY))}function nA(t){if(n)r.selectRectForMultipleXs(t);else{var e=lA(),i=function(t){var e=t&&t.attr("class")&&1*t.attr("class").replace(new RegExp("(".concat(M.eventRect,"-?|s)"),"g"),"");return!isNaN(e)&&null!==e||(e=-1),e}(e);r.callOverOutForTouch(i),-1===i?r.unselectRect():r.selectRectForSingle(t,e,i)}}var a,r=this,o=r.config,t=o.interaction_inputType_touch.preventDefault,s=fc(t)&&t||!1,c=!isNaN(t)&&t||null;r.svg.on("touchstart.eventRect touchmove.eventRect",function(){var t=lA();if(!t.empty()&&t.classed(M.eventRect)){if(r.dragging||r.flowing||r.hasArcType())return;(function(t){var e=t.type,i=t.changedTouches[0]["client".concat(o.axis_rotated?"Y":"X")];"touchstart"===e?s?t.preventDefault():null!==c&&(a=i):"touchmove"===e&&(s||!0===a||null!==c&&Math.abs(a-i)>=c)&&(a=!0,t.preventDefault())})(B.event),nA(this)}else r.unselectRect(),r.callOverOutForTouch()}).on("touchend.eventRect",function(){var t=lA();!t.empty()&&t.classed(M.eventRect)&&(r.hasArcType()||!r.toggleShape||r.cancelClick)&&r.cancelClick&&(r.cancelClick=!1)})},updateEventRect:function updateEventRect(t){var e,i,n,a,r=this,o=r.config,s=r.zoomScale||r.x,c=t||r.eventRect.data(),l=o.axis_rotated;if(r.isMultipleX())i=e=0,n=r.width,a=r.height;else{var u,d;if(r.isCategorized())u=r.getEventRectWidth(),d=function(t){return s(t.x)-u/2};else{r.updateXs();var g=function(t){var e=t.index;return{prev:r.getPrevX(e),next:r.getNextX(e)}};u=function(t){var e=g(t);return null===e.prev&&null===e.next?l?r.height:r.width:(null===e.prev&&(e.prev=s.domain()[0]),null===e.next&&(e.next=s.domain()[1]),Math.max(0,(s(e.next)-s(e.prev))/2))},d=function(t){var e=g(t),i=t.x;return null===e.prev&&null===e.next?0:(null===e.prev&&(e.prev=s.domain()[0]),(s(i)+s(e.prev))/2)}}e=l?0:d,i=l?d:0,n=l?r.width:u,a=l?u:r.height}c.attr("class",r.classEvent.bind(r)).attr("x",e).attr("y",i).attr("width",n).attr("height",a)},selectRectForSingle:function selectRectForSingle(i,n,a){var r=this,o=r.config,s=o.data_selection_enabled,c=o.data_selection_grouped,l=o.tooltip_grouped,t=r.getAllValuesOnIndex(a);l&&(r.showTooltip(t,i),r.showXGridFocus(t),!s||c)||r.main.selectAll(".".concat(M.shape,"-").concat(a)).each(function(){Object(B.select)(this).classed(M.EXPANDED,!0),s&&n.style("cursor",c?"pointer":null),l||(r.hideXGridFocus(),r.hideTooltip(),c||r.expandCirclesBars(a))}).filter(function(t){return r.isWithinShape(this,t)}).call(function(t){var e=t.data();s&&(c||o.data_selection_isselectable(e))&&n.style("cursor","pointer"),l||(r.showTooltip(e,i),r.showXGridFocus(e),r.unexpandCircles(),t.each(function(t){return r.expandCirclesBars(a,t.id)}))})},expandCirclesBars:function expandCirclesBars(t,e,i){this.config.point_focus_expand_enabled&&this.expandCircles(t,e,i),this.expandBars(t,e,i)},selectRectForMultipleXs:function selectRectForMultipleXs(t){var e=this,i=e.config,n=e.filterTargetsToShow(e.data.targets);if(!e.dragging&&!e.hasArcType(n)){var a=Object(B.mouse)(t),r=e.findClosestFromTargets(n,a);if(!e.mouseover||r&&r.id===e.mouseover.id||(i.data_onout.call(e.api,e.mouseover),e.mouseover=void 0),!r)return void e.unselectRect();var o=(e.isBubbleType(r)||e.isScatterType(r)||!i.tooltip_grouped?[r]:e.filterByX(n,r.x)).map(function(t){return e.addName(t)});e.showTooltip(o,t),e.expandCirclesBars(r.index,r.id,!0),e.showXGridFocus(o),(e.isBarType(r.id)||e.dist(r,a)<i.point_sensitivity)&&(e.svg.select(".".concat(M.eventRect)).style("cursor","pointer"),e.mouseover||(i.data_onover.call(e.api,r),e.mouseover=r))}},unselectRect:function unselectRect(){var t=this;t.svg.select(".".concat(M.eventRect)).style("cursor",null),t.hideXGridFocus(),t.hideTooltip(),t._handleLinkedCharts(!1),t.unexpandCircles(),t.unexpandBars()},setOverOut:function setOverOut(t,e){var i=this,n=i.config,a=nc(e);if(a||-1!==e){var r=n[t?"data_onover":"data_onout"].bind(i.api);n.color_onover&&i.setOverColor(t,e,a),a?r(e):(t&&i.expandCirclesBars(e,null,!0),i.isMultipleX()||i.main.selectAll(".".concat(M.shape,"-").concat(e)).each(r))}},callOverOutForTouch:function callOverOutForTouch(t){var e=this.callOverOutForTouch,i=e.last;(nc(t)&&i?t.id!==i.id:t!==i)&&((i||cc(i))&&this.setOverOut(!1,i),(t||cc(t))&&this.setOverOut(!0,t),e.last=t)},getDraggableSelection:function getDraggableSelection(){var t=this,e=t.config;return e.interaction_enabled&&e.data_selection_draggable&&t.drag?Object(A.drag)().on("drag",function(){t.drag(Object(B.mouse)(this))}).on("start",function(){t.dragstart(Object(B.mouse)(this))}).on("end",function(){t.dragend()}):function(){}},generateEventRectsForSingleX:function generateEventRectsForSingleX(t){var n=this,e=n.config,i=t.append("rect").attr("class",n.classEvent.bind(n)).style("cursor",e.data_selection_enabled&&e.data_selection_grouped?"pointer":null).on("click",function(t){n.clickHandlerForSingleX.bind(this)(t,n)}).call(n.getDraggableSelection());return"mouse"===n.inputType&&i.on("mouseover",function(t){n.dragging||n.flowing||n.hasArcType()||n.setOverOut(!0,t.index)}).on("mousemove",function(t){if(!(n.dragging||n.flowing||n.hasArcType())){var e=t.index,i=n.svg.select(".".concat(M.eventRect,"-").concat(e));n.isStepType(t)&&"step-after"===n.config.line_step_type&&Object(B.mouse)(this)[0]<n.x(n.getXValue(t.id,e))&&(e-=1),-1===e?n.unselectRect():n.selectRectForSingle(this,i,e)}}).on("mouseout",function(t){!n.config||n.hasArcType()||(n.unselectRect(),n.setOverOut(!1,t.index))}),i},clickHandlerForSingleX:function clickHandlerForSingleX(t,e){var i=e,n=i.config;if(i.hasArcType()||!i.toggleShape||i.cancelClick)i.cancelClick&&(i.cancelClick=!1);else{var a=t.index;i.main.selectAll(".".concat(M.shape,"-").concat(a)).each(function(t){(n.data_selection_grouped||i.isWithinShape(this,t))&&(i.toggleShape(this,t,a),n.data_onclick.call(i.api,t,this))})}},generateEventRectsForMultipleXs:function generateEventRectsForMultipleXs(t){var e=this,i=t.append("rect").attr("x",0).attr("y",0).attr("width",e.width).attr("height",e.height).attr("class",M.eventRect).on("click",function(){e.clickHandlerForMultipleXS.bind(this)(e)}).call(e.getDraggableSelection());return"mouse"===e.inputType&&i.on("mouseover mousemove",function(){e.selectRectForMultipleXs(this)}).on("mouseout",function(){!e.config||e.hasArcType()||e.unselectRect()}),i},clickHandlerForMultipleXS:function clickHandlerForMultipleXS(t){var e=t,i=e.config,n=e.filterTargetsToShow(e.data.targets);if(!e.hasArcType(n)){var a=Object(B.mouse)(this),r=e.findClosestFromTargets(n,a);!r||(e.isBarType(r.id)||e.dist(r,a)<i.point_sensitivity)&&e.main.selectAll(".".concat(M.shapes).concat(e.getTargetSelectorSuffix(r.id))).selectAll(".".concat(M.shape,"-").concat(r.index)).each(function(){(i.data_selection_grouped||e.isWithinShape(this,r))&&(e.toggleShape(this,r,r.index),i.data_onclick.call(e.api,r,this))})}},dispatchEvent:function dispatchEvent(t,e,i){var n=this.isMultipleX(),a=".".concat(n?M.eventRect:"".concat(M.eventRect,"-").concat(e)),r=this.main.select(a).node(),o=r.getBoundingClientRect(),s=o.width,c=o.left,l=o.top,u=c+(i?i[0]:0)+(n?0:s/2),d=l+(i?i[1]:0);v[/^(mouse|click)/.test(t)?"mouse":"touch"](r,t,{screenX:u,screenY:d,clientX:u,clientY:d})}}),yc(b.prototype,{setContainerSize:function setContainerSize(){this.currentWidth=this.getCurrentWidth(),this.currentHeight=this.getCurrentHeight()},getCurrentWidth:function getCurrentWidth(){return this.config.size_width||this.getParentWidth()},getCurrentHeight:function getCurrentHeight(){var t=this.config,e=t.size_height||this.getParentHeight();return 0<e?e:320/(this.hasType("gauge")&&!t.gauge_fullCircle?2:1)},getAxisSize:function getAxisSize(t){var e=this.config.axis_rotated;return e&&"x"===t||!e&&/y2?/.test(t)?this.getAxisWidthByAxisId(t,!0):this.getHorizontalAxisHeight(t)},getCurrentPaddingTop:function getCurrentPaddingTop(){var t=this,e=t.config,i=e.axis_y2_axes.length,n=_b(e.padding_top)?e.padding_top:0;return t.title&&t.title.node()&&(n+=t.getTitlePadding()),i&&e.axis_rotated&&(n+=t.getHorizontalAxisHeight("y2")*i),n},getCurrentPaddingBottom:function getCurrentPaddingBottom(){var t=this.config,e=t.axis_rotated?"y":"x",i=t["axis_".concat(e,"_axes")].length;return(_b(t.padding_bottom)?t.padding_bottom:0)+(i?this.getHorizontalAxisHeight(e)*i:0)},getCurrentPaddingLeft:function getCurrentPaddingLeft(t){var e=this.config,i=e.axis_rotated,n=i?"x":"y",a=e["axis_".concat(n,"_axes")].length,r=this.getAxisWidthByAxisId(n,t);return(_b(e.padding_left)?e.padding_left:i?e.axis_x_show?Math.max(gc(r),40):1:!e.axis_y_show||e.axis_y_inner?this.axis.getYAxisLabelPosition().isOuter?30:1:gc(r))+r*a},getCurrentPaddingRight:function getCurrentPaddingRight(){var t=this,e=t.config,i=t.isLegendRight?t.getLegendWidth()+20:0,n=e.axis_y2_axes.length,a=t.getAxisWidthByAxisId("y2");return(_b(e.padding_right)?e.padding_right+1:e.axis_rotated?10+i:!e.axis_y2_show||e.axis_y2_inner?2+i+(t.axis.getY2AxisLabelPosition().isOuter?20:0):gc(a)+i)+a*n},getParentRectValue:function getParentRectValue(t){for(var e,i="offset".concat(zc(t)),n=this.selectChart.node();!e&&n&&"BODY"!==n.tagName;){try{e=n.getBoundingClientRect()[t]}catch(t){i in n&&(e=n[i])}n=n.parentNode}if("width"===t){var a=O.a.body.offsetWidth;a<e&&(e=a)}return e},getParentWidth:function getParentWidth(){return this.getParentRectValue("width")},getParentHeight:function getParentHeight(){var t=this.selectChart.style("height");return 0<t.indexOf("px")?parseInt(t,10):0},getSvgLeft:function getSvgLeft(t){var e=this,i=e.config,n=i.axis_rotated||!i.axis_rotated&&!i.axis_y_inner,a=i.axis_rotated?M.axisX:M.axisY,r=e.main.select(".".concat(a)).node(),o=r&&n?r.getBoundingClientRect():{right:0},s=e.selectChart.node().getBoundingClientRect(),c=e.hasArcType(),l=o.right-s.left-(c?0:e.getCurrentPaddingLeft(t));return 0<l?l:0},getAxisWidthByAxisId:function getAxisWidthByAxisId(t,e){var i=this.axis.getLabelPositionById(t);return this.axis.getMaxTickWidth(t,e)+(i.isInner?20:40)},getHorizontalAxisHeight:function getHorizontalAxisHeight(t){var e=this,i=e.config,n=i.axis_rotated,a=30;return"x"!==t||i.axis_x_show?"x"===t&&i.axis_x_height?i.axis_x_height:"y"!==t||i.axis_y_show?"y2"!==t||i.axis_y2_show?(("x"===t&&!n&&i.axis_x_tick_rotate||"y"===t&&n&&i.axis_y_tick_rotate)&&(a=30+e.axis.getMaxTickWidth(t)*Math.cos(Math.PI*(90-i["axis_".concat(t,"_tick_rotate")])/180)),a+(e.axis.getLabelPositionById(t).isInner?0:10)+("y2"!==t||n?0:-10)):e.rotated_padding_top:!i.legend_show||e.isLegendRight||e.isLegendInset?1:10:8},getEventRectWidth:function getEventRectWidth(){return Math.max(0,this.xAxis.tickInterval())}});var w=i(23);yc(b.prototype,{getShapeIndices:function getShapeIndices(t){var r=this.config,o={},s=0;return this.filterTargetsToShow(this.data.targets.filter(t,this)).forEach(function(t){for(var e,i=0;e=r.data_groups[i];i++)if(!(e.indexOf(t.id)<0))for(var n,a=0;n=e[a];a++)if(n in o){o[t.id]=o[n];break}dc(o[t.id])&&(o[t.id]=s++)}),o.__max__=s-1,o},getShapeX:function getShapeX(a,r,o,t){function QD(t,e){return t+e}var s=t?this.subX:this.zoomScale||this.x,c=this.config.bar_padding,l=jc(a)&&a.total.length?a.total.reduce(QD)/2:0;return function(t){var e=t.id in o?o[t.id]:0,i=0;if(lc(t.x)){var n=s(t.x);i=l?n-(a[t.id]||a.width)+a.total.slice(0,e+1).reduce(QD)-l:n-(cc(a)?a:a.width)*(r/2-e)}return a&&i&&1<r&&c&&(e&&(i+=c*e),2<r?i-=(r-1)*c/2:2===r&&(i-=c/2)),i}},getShapeY:function getShapeY(i){var n=this,a=n.isStackNormalized();return function(t){var e=a?n.getRatio("index",t,!0):n.isBubbleZType(t)?n.getBubbleZData(t.value,"y"):t.value;return(i?n.getSubYScale(t.id):n.getYScale(t.id))(e)}},getShapeOffset:function getShapeOffset(t,c,e){var l=this,i=l.orderTargets(l.filterTargetsToShow(l.data.targets.filter(t,l))),u=i.map(function(t){return t.id});return function(n,t){var a=e?l.getSubYScale(n.id):l.getYScale(n.id),r=a(0),o=r,s=t;return i.forEach(function(t){var e=l.isStepType(n)?l.convertValuesToStep(t.values):t.values,i=e.map(function(t){return l.isStackNormalized()?l.getRatio("index",t,!0):t.value});t.id===n.id||c[t.id]!==c[n.id]||u.indexOf(t.id)<u.indexOf(n.id)&&(!dc(e[s])&&+e[s].x==+n.x||(s=-1,e.forEach(function(t,e){(t.x.constructor===Date?+t.x:t.x)===(n.x.constructor===Date?+n.x:n.x)&&(s=e)})),s in e&&0<=e[s].value*n.value&&(o+=a(i[s])-r))}),o}},isWithinShape:function isWithinShape(t,e){var i,n=this,a=Object(B.select)(t);return n.isTargetToShow(e.id)?n.hasValidPointType(t.nodeName)?i=n.isStepType(e)?n.isWithinStep(t,n.getYScale(e.id)(e.value)):n.isWithinCircle(t,n.isBubbleType(e)?1.5*n.pointSelectR(e):0):"path"===t.nodeName&&(i=!a.classed(M.bar)||n.isWithinBar(t)):i=!1,i},getInterpolate:function getInterpolate(t){var e=this.getInterpolateType(t);return{basis:w.curveBasis,"basis-closed":w.curveBasisClosed,"basis-open":w.curveBasisOpen,bundle:w.curveBundle,cardinal:w.curveCardinal,"cardinal-closed":w.curveCardinalClosed,"cardinal-open":w.curveCardinalOpen,"catmull-rom":w.curveCatmullRom,"catmull-rom-closed":w.curveCatmullRomClosed,"catmull-rom-open":w.curveCatmullRomOpen,"monotone-x":w.curveMonotoneX,"monotone-y":w.curveMonotoneY,natural:w.curveNatural,"linear-closed":w.curveLinearClosed,linear:w.curveLinear,step:w.curveStep,"step-after":w.curveStepAfter,"step-before":w.curveStepBefore}[e]},getInterpolateType:function getInterpolateType(t){var e=this,i=e.config.spline_interpolation_type,n=e.isInterpolationType(i)?i:"cardinal";return e.isSplineType(t)?n:e.isStepType(t)?e.config.line_step_type:"linear"}});var L=i(24);yc(b.prototype,{initPie:function initPie(){var i=this,t=i.config,e=t.pie_padding,n=i.hasType("pie")&&e?.01*e:t["".concat(t.data_type,"_padAngle")]?t["".concat(t.data_type,"_padAngle")]:0;i.pie=Object(w.pie)().padAngle(n).sortValues(i.isOrderAsc()||i.isOrderDesc()?function(t,e){return i.isOrderAsc()?t-e:e-t}:null).value(function(t){return t.values.reduce(function(t,e){return t+e.value},0)})},updateRadius:function updateRadius(){var t=this,e=t.config,i=e.pie_innerRadius,n=e.pie_padding,a=e.gauge_width||e.donut_width;t.radiusExpanded=Math.min(t.arcWidth,t.arcHeight)/2,t.radius=.95*t.radiusExpanded,t.innerRadiusRatio=a?(t.radius-a)/t.radius:.6;var r=i||(n?n*(t.innerRadiusRatio+.1):0);t.innerRadius=t.hasType("donut")||t.hasType("gauge")?t.radius*t.innerRadiusRatio:r},getInnerRadius:function getInnerRadius(t){var e=this.innerRadius;return!cc(e)&&t&&(e=e[t.data.id]||0),e},updateArc:function updateArc(){var t=this;t.svgArc=t.getSvgArc(),t.svgArcExpanded=t.getSvgArcExpanded(),t.svgArcExpandedSub=t.getSvgArcExpanded(.98)},updateAngle:function updateAngle(t){var e=this,i=e.config,n=e.pie,a=t,r=!1;if(!i)return null;if(a.data&&e.isGaugeType(a.data)){var o=e.getTotalDataSum();o>i.gauge_max&&(i.gauge_max=o);var s=Math.PI*(i.gauge_fullCircle?2:1),c=i.gauge_startingAngle,l=s*(o/(i.gauge_max-i.gauge_min));n=e.pie.startAngle(c).endAngle(l+c)}return n(e.filterTargetsToShow()).forEach(function(t){r||t.data.id!==a.data.id||(r=!0,a=t)}),isNaN(a.startAngle)&&(a.startAngle=0),isNaN(a.endAngle)&&(a.endAngle=a.startAngle),r?a:null},getSvgArc:function getSvgArc(){function nF(t,e){var i="M 0 0";if(t.value||t.data){cc(r)||(o=o.innerRadius(a.getInnerRadius(t)));var n=!e&&a.updateAngle(t);e?i=o(t):n&&(i=o(n))}return i}var a=this,r=a.getInnerRadius(),o=Object(w.arc)().outerRadius(a.radius).innerRadius(cc(r)?r:0);return nF.centroid=o.centroid,nF},getSvgArcExpanded:function getSvgArcExpanded(t){var i=this,n=Object(w.arc)().outerRadius(i.radiusExpanded*(t||1));return function(t){var e=i.updateAngle(t);return e?n.innerRadius(i.getInnerRadius(t))(e):"M 0 0"}},getArc:function getArc(t,e,i){return i||this.isArcType(t.data)?this.svgArc(t,e):"M 0 0"},transformForArcLabel:function transformForArcLabel(t){var e=this,i=e.config,n=e.updateAngle(t),a="";if(n&&(!e.hasType("gauge")||e.hasMultiTargets())){var r=this.svgArc.centroid(n),o=isNaN(r[0])?0:r[0],s=isNaN(r[1])?0:r[1],c=Math.sqrt(o*o+s*s),l=e.hasType("donut")&&i.donut_label_ratio||e.hasType("pie")&&i.pie_label_ratio;l=l?ac(l)?l(t,e.radius,c):l:e.radius&&(c?(.375<36/e.radius?1.175-36/e.radius:.8)*e.radius/c:0),a="translate(".concat(o*l,",").concat(s*l,")")}return a},convertToArcData:function convertToArcData(t){return this.addName({id:t.data.id,value:t.value,ratio:this.getRatio("arc",t),index:t.index})},textForArcLabel:function textForArcLabel(t){var c=this;c.shouldShowArcLabel()&&t.each(function(t){var e=Object(B.select)(this),i=c.updateAngle(t),n=i?i.value:null,a=c.getRatio("arc",i),r=t.data.id,o=c.hasType("gauge");if(o||c.meetsArcLabelThreshold(a)){var s=(c.getArcLabelFormat()||c.defaultArcValueFormat)(n,a,r).toString();sc(e,s,[-1,1],o)}})},textForGaugeMinMax:function textForGaugeMinMax(t,e){var i=this.getGaugeLabelExtents();return i?i(t,e):t},expandArc:function expandArc(t){var i=this;if(i.transiting)var e=setInterval(function(){i.transiting||(clearInterval(e),0<i.legend.selectAll(".".concat(M.legendItemFocused)).size()&&i.expandArc(t))},10);else{var n=i.mapToTargetIds(t);i.svg.selectAll(i.selectorTargets(n,".".concat(M.chartArc))).each(function(t){if(i.shouldExpand(t.data.id)&&0!==t.value){var e=i.expandDuration(t.data.id);Object(B.select)(this).selectAll("path").transition().duration(e).attr("d",i.svgArcExpanded).transition().duration(2*e).attr("d",i.svgArcExpandedSub)}})}},unexpandArc:function unexpandArc(t){var e=this;if(!e.transiting){var i=e.mapToTargetIds(t);e.svg.selectAll(e.selectorTargets(i,".".concat(M.chartArc))).selectAll("path").transition().duration(function(t){return e.expandDuration(t.data.id)}).attr("d",e.svgArc),e.svg.selectAll("".concat(M.arc)).style("opacity","1")}},expandDuration:function expandDuration(t){var e,i=this.config;return this.isDonutType(t)?e="donut":this.isGaugeType(t)?e="gauge":this.isPieType(t)&&(e="pie"),e?i["".concat(e,"_expand_duration")]:50},shouldExpand:function shouldExpand(t){var e=this.config;return this.isDonutType(t)&&e.donut_expand||this.isGaugeType(t)&&e.gauge_expand||this.isPieType(t)&&e.pie_expand},shouldShowArcLabel:function shouldShowArcLabel(){var e=this,i=e.config;return["pie","donut","gauge"].some(function(t){return e.hasType(t)&&i["".concat(t,"_label_show")]})},meetsArcLabelThreshold:function meetsArcLabelThreshold(t){var e=this.config;return(this.hasType("donut")?e.donut_label_threshold:e.pie_label_threshold)<=t},getArcLabelFormat:function getArcLabelFormat(){var t=this.config,e=t.pie_label_format;return this.hasType("gauge")?e=t.gauge_label_format:this.hasType("donut")&&(e=t.donut_label_format),e},getGaugeLabelExtents:function getGaugeLabelExtents(){return this.config.gauge_label_extents},getArcTitle:function getArcTitle(){var t=this.hasType("donut")?"donut":this.hasType("gauge")&&"gauge";return t?this.config["".concat(t,"_title")]:""},updateTargetsForArc:function updateTargetsForArc(t){var e=this,i=e.main,n=e.hasType("gauge"),a=e.classChartArc.bind(e),r=e.classArcs.bind(e),o=e.classFocus.bind(e),s=i.select(".".concat(M.chartArcs)).selectAll(".".concat(M.chartArc)).data(e.pie(t)).attr("class",function(t){return a(t)+o(t.data)}),c=s.enter().append("g").attr("class",a);c.append("g").attr("class",r).merge(s),c.append("text").attr("dy",n&&!e.hasMultiTargets()?"-.1em":".35em").style("opacity","0").style("text-anchor","middle").style("pointer-events","none")},initArc:function initArc(){this.arcs=this.main.select(".".concat(M.chart)).append("g").attr("class",M.chartArcs).attr("transform",this.getTranslate("arc")),this.setArcTitle()},setArcTitle:function setArcTitle(){var t=this.getArcTitle(),e=this.hasType("gauge");if(t){var i=this.arcs.append("text").attr("class",M[e?"chartArcsGaugeTitle":"chartArcsTitle"]).style("text-anchor","middle");e&&i.attr("dy","-0.3em").style("font-size","27px"),sc(i,t,e?void 0:[-.6,1.35],!0)}},redrawArc:function redrawArc(t,e,i){var a=this,n=a.config,r=a.main,o=n.interaction_enabled,s=r.selectAll(".".concat(M.arcs)).selectAll(".".concat(M.arc)).data(a.arcData.bind(a));s.exit().transition().duration(e).style("opacity","0").remove(),(s=s.enter().append("path").attr("class",a.classArc.bind(a)).style("fill",function(t){return a.color(t.data)}).style("cursor",function(t){return o&&(n.data_selection_isselectable(t)?"pointer":null)}).style("opacity","0").each(function(t){a.isGaugeType(t.data)&&(t.startAngle=n.gauge_startingAngle,t.endAngle=n.gauge_startingAngle),this._current=t}).merge(s)).attr("transform",function(t){return!a.isGaugeType(t.data)&&i?"scale(0)":""}).style("opacity",function(t){return t===this._current?"0":"1"}).each(function(){a.transiting=!0}).transition().duration(t).attrTween("d",function(i){var t=a.updateAngle(i);if(!t)return function(){return"M 0 0"};isNaN(this._current.startAngle)&&(this._current.startAngle=0),isNaN(this._current.endAngle)&&(this._current.endAngle=this._current.startAngle);var n=Object(L.interpolate)(this._current,t);return this._current=n(0),function(t){var e=n(t);return e.data=i.data,a.getArc(e,!0)}}).attr("transform",i?"scale(1)":"").style("fill",function(t){return a.levelColor?a.levelColor(t.data.values[0].value):a.color(t.data.id)}).style("opacity","1").call(a.endall,function(){a.transiting=!1}),o&&a.bindArcEvent(s),a.redrawArcText(t)},bindArcEvent:function bindArcEvent(t){function selectArc(t,e,i){a.expandArc(i),a.api.focus(i),a.toggleFocusLegend(i,!0),a.showTooltip([e],t)}function unselectArc(t){var e=t&&t.id||void 0;a.unexpandArc(e),a.api.revert(),a.revertLegend(),a.hideTooltip()}var a=this,e="touch"===a.inputType,i="mouse"===a.inputType;if(t.on("click",function(t,e){var i,n=a.updateAngle(t);n&&(i=a.convertToArcData(n),a.toggleShape&&a.toggleShape(this,i,e),a.config.data_onclick.call(a.api,i,this))}),i&&t.on("mouseover",function(t){if(!a.transiting){var e=a.updateAngle(t),i=e?a.convertToArcData(e):null;selectArc(this,i,i&&i.id||void 0),a.setOverOut(!0,i)}}).on("mouseout",function(t){if(!a.transiting){var e=a.updateAngle(t),i=e?a.convertToArcData(e):null;unselectArc(),a.setOverOut(!1,i)}}).on("mousemove",function(t){var e=a.updateAngle(t),i=e?a.convertToArcData(e):null;a.showTooltip([i],this)}),e&&a.hasArcType()&&!a.radars){var n=function(){if(!a.transiting){var t=function(){var t=B.event.changedTouches[0];return Object(B.select)(O.a.elementFromPoint(t.clientX,t.clientY))}().datum(),e=t&&t.data&&t.data.id?a.updateAngle(t):null,i=e?a.convertToArcData(e):null,n=i&&i.id||void 0;a.callOverOutForTouch(i),dc(n)?unselectArc():selectArc(this,i,n)}};a.svg.on("touchstart",n).on("touchmove",n)}},redrawArcText:function redrawArcText(t){var e=this,i=e.config,n=e.main,a=e.hasType("gauge"),r=n.selectAll(".".concat(M.chartArc)).select("text").style("opacity","0").attr("class",function(t){return e.isGaugeType(t.data)?M.gaugeValue:null}).call(e.textForArcLabel.bind(e)).attr("transform",e.transformForArcLabel.bind(e)).style("font-size",function(t){return e.isGaugeType(t.data)&&!e.hasMultiTargets()?"".concat(Math.round(e.radius/5),"px"):""}).transition().duration(t).style("opacity",function(t){return e.isTargetToShow(t.data.id)&&e.isArcType(t.data)?"1":"0"});if(n.select(".".concat(M.chartArcsTitle)).style("opacity",e.hasType("donut")||a?"1":"0"),a){var o=i.gauge_fullCircle,s=(o?-4:-1)*i.gauge_startingAngle;o&&r.attr("dy","".concat(Math.round(e.radius/14))),e.arcs.select(".".concat(M.chartArcsBackground)).attr("d",function(){var t={data:[{value:i.gauge_max}],startAngle:i.gauge_startingAngle,endAngle:s};return e.getArc(t,!0,!0)}),e.arcs.select(".".concat(M.chartArcsGaugeUnit)).attr("dy",".75em").text(i.gauge_label_show?i.gauge_units:""),i.gauge_label_show&&(e.arcs.select(".".concat(M.chartArcsGaugeMin)).attr("dx","".concat(-1*(e.innerRadius+(e.radius-e.innerRadius)/(i.gauge_fullCircle?1:2)),"px")).attr("dy","1.2em").text(e.textForGaugeMinMax(i.gauge_min,!1)),o||e.arcs.select(".".concat(M.chartArcsGaugeMax)).attr("dx","".concat(e.innerRadius+(e.radius-e.innerRadius)/2,"px")).attr("dy","1.2em").text(e.textForGaugeMinMax(i.gauge_max,!0)))}},initGauge:function initGauge(){function aI(t){e.append("text").attr("class",t).style("text-anchor","middle").style("pointer-events","none")}var t=this.config,e=this.arcs;this.hasType("gauge")&&(e.append("path").attr("class",M.chartArcsBackground),t.gauge_units&&aI(M.chartArcsGaugeUnit),t.gauge_label_show&&(aI(M.chartArcsGaugeMin),t.gauge_fullCircle||aI(M.chartArcsGaugeMax)))},getGaugeLabelHeight:function getGaugeLabelHeight(){return this.config.gauge_label_show?20:0}}),yc(b.prototype,{initBar:function initBar(){this.main.select(".".concat(M.chart)).append("g").attr("class",M.chartBars)},updateTargetsForBar:function updateTargetsForBar(t){var e=this,i=e.config,n=e.classChartBar.bind(e),a=e.classBars.bind(e),r=e.classFocus.bind(e);e.main.select(".".concat(M.chartBars)).selectAll(".".concat(M.chartBar)).data(t).attr("class",function(t){return n(t)+r(t)}).enter().append("g").attr("class",n).style("opacity","0").style("pointer-events","none").append("g").attr("class",a).style("cursor",function(t){return i.data_selection_isselectable(t)?"pointer":null})},updateBar:function updateBar(t){var e=this,i=e.barData.bind(e),n=e.classBar.bind(e),a=e.initialOpacity.bind(e);e.mainBar=e.main.selectAll(".".concat(M.bars)).selectAll(".".concat(M.bar)).data(i),e.mainBar.exit().transition().duration(t).style("opacity","0").remove(),e.mainBar=e.mainBar.enter().append("path").attr("class",n).style("fill",e.color).merge(e.mainBar).style("opacity",a)},redrawBar:function redrawBar(t,e){return[(e?this.mainBar.transition(wc()):this.mainBar).attr("d",t).style("fill",this.color).style("opacity","1")]},getBarW:function getBarW(t,r){function BI(t){var e=t?o.bar_width[t]:o.bar_width,i=t?e.ratio:o.bar_width_ratio,n=t?e.max:o.bar_width_max,a=cc(e)?e:r?s*i/r:0;return n&&n<a?n:a}var e,o=this.config,s=t.tickInterval(this.getMaxDataCount()),i=o.data_groups.length;return e=BI(),!i&&jc(o.bar_width)&&(e={width:e,total:[]},this.filterTargetsToShow(this.data.targets).forEach(function(t){o.bar_width[t.id]&&(e[t.id]=BI(t.id),e.total.push(e[t.id]||e.width))})),e},getBars:function getBars(t,e){var i=_b(t)?"-".concat(t):"";return(e?this.main.selectAll(".".concat(M.bars).concat(this.getTargetSelectorSuffix(e))):this.main).selectAll(".".concat(M.bar).concat(i))},expandBars:function expandBars(t,e,i){i&&this.unexpandBars(),this.getBars(t,e).classed(M.EXPANDED,!0)},unexpandBars:function unexpandBars(t){this.getBars(t).classed(M.EXPANDED,!1)},generateDrawBar:function generateDrawBar(t,e){var i=this.config,g=this.generateGetBarPoints(t,e),h=i.axis_rotated,f=i.data_groups.length,n=i.bar_radius,a=i.bar_radius_ratio,p=cc(n)&&0<n?function(){return n}:cc(a)?function(t){return t*a}:null;return function(t,e){var i=g(t,e),n=+h,a=+!n,r=t.value<0,o=["",""],s=0;if(p&&!f){var c=h?a:n,l=i[2][c]-i[0][c];s=p(l);var u="a".concat(s,",").concat(s," ").concat(r?"1 0 0":"0 0 1"," ");o[+!h]="".concat(u).concat(s,",").concat(s),o[+h]="".concat(u).concat([-s,s][h?"sort":"reverse"]()),r&&o.reverse()}var d=h?"H".concat(i[1][n]-s," ").concat(o[0],"V").concat(i[2][a]-s," ").concat(o[1],"H").concat(i[3][n]):"V".concat(i[1][a]+(r?-s:s)," ").concat(o[0],"H").concat(i[2][n]-s," ").concat(o[1],"V").concat(i[3][a]);return"M".concat(i[0][n],",").concat(i[0][a]).concat(d,"z")}},generateGetBarPoints:function generateGetBarPoints(t,e){var s=this,i=e?s.subXAxis:s.xAxis,n=t.__max__+1,c=s.getBarW(i,n),l=s.getShapeX(c,n,t,!!e),u=s.getShapeY(!!e),d=s.getShapeOffset(s.isBarType,t,!!e),g=e?s.getSubYScale:s.getYScale;return function(t,e){var i=g.call(s,t.id)(0),n=d(t,e)||i,a=cc(c)?c:c[t.id]||c.width,r=l(t),o=u(t);return s.config.axis_rotated&&(0<t.value&&o<i||t.value<0&&i<o)&&(o=i),[[r,n],[r,o-=i-n],[r+a,o],[r+a,n]]}},isWithinBar:function isWithinBar(t){var e=Object(B.mouse)(t),i=tc(t),n=k()(i,2),a=n[0],r=n[1],o=Math.min(a.x,r.x),s=Math.min(a.y,r.y),c=this.config.bar_sensitivity,l=t.getBBox(),u=l.width,d=l.height;return o-c<e[0]&&e[0]<o+u+c&&s-c<e[1]&&e[1]<s+d+c}}),yc(b.prototype,{initBubble:function initBubble(){var t=this.config;this.hasType("bubble")&&(t.point_show=!0,t.point_type="circle",t.point_sensitivity=25)},getBaseLength:function getBaseLength(){var t="$baseLength",e=this.getCache(t);return e||this.addCache(t,e=Gc("min",[this.axes.x.select("path").node().getTotalLength(),this.axes.y.select("path").node().getTotalLength()])),e},getBubbleR:function getBubbleR(t){var e=this,i=e.config.bubble_maxR;ac(i)?i=i(t):cc(i)||(i=e.getBaseLength()/(2*e.getMaxDataCount())+12);var n=Gc("max",e.getMinMaxData().max.map(function(t){return e.isBubbleZType(t)?e.getBubbleZData(t.value,"y"):nc(t.value)?t.value.mid:t.value})),a=i*i*Math.PI,r=(e.isBubbleZType(t)?e.getBubbleZData(t.value,"z"):t.value)*(a/n);return Math.sqrt(r/Math.PI)},getBubbleZData:function getBubbleZData(t,e){return nc(t)?t[e]:t["y"===e?0:1]},isBubbleZType:function isBubbleZType(t){return this.isBubbleType(t)&&(nc(t.value)&&("z"in t.value||"y"in t.value)||mc(t.value)&&2===t.value.length)}}),yc(b.prototype,{initLine:function initLine(){this.main.select(".".concat(M.chart)).append("g").attr("class",M.chartLines)},updateTargetsForLine:function updateTargetsForLine(t){var i=this,e=i.config,n=i.classChartLine.bind(i),a=i.classLines.bind(i),r=i.classAreas.bind(i),o=i.classCircles.bind(i),s=i.classFocus.bind(i),c=i.main.select(".".concat(M.chartLines)).selectAll(".".concat(M.chartLine)).data(t).attr("class",function(t){return n(t)+s(t)}).enter().append("g").attr("class",n).style("opacity","0").style("pointer-events","none");c.append("g").attr("class",a),c.append("g").attr("class",r),e.point_show&&(e.data_selection_enabled&&c.append("g").attr("class",function(t){return i.generateClass(M.selectedCircles,t.id)}),c.append("g").attr("class",o).style("cursor",function(t){return e.data_selection_isselectable(t)?"pointer":null})),t.forEach(function(e){i.main.selectAll(".".concat(M.selectedCircles).concat(i.getTargetSelectorSuffix(e.id))).selectAll("".concat(M.selectedCircle)).each(function(t){t.value=e.values[t.index].value})})},updateLine:function updateLine(t){var e=this;e.mainLine=e.main.selectAll(".".concat(M.lines)).selectAll(".".concat(M.line)).data(e.lineData.bind(e)),e.mainLine.exit().transition().duration(t).style("opacity","0").remove(),e.mainLine=e.mainLine.enter().append("path").attr("class",function(t){return"".concat(e.classLine.bind(e)(t)," ").concat(e.extraLineClasses(t)||"")}).style("stroke",e.color).merge(e.mainLine).style("opacity",e.initialOpacity.bind(e)).style("shape-rendering",function(t){return e.isStepType(t)?"crispEdges":""}).attr("transform",null)},redrawLine:function redrawLine(t,e){return[(e?this.mainLine.transition(wc()):this.mainLine).attr("d",t).style("stroke",this.color).style("opacity","1")]},getCurve:function getCurve(i){var n=this;return n.config.axis_rotated&&n.isStepType(i)?function(t){var e=n.getInterpolate(i)(t);return e.orgPoint=e.point,e.pointRotated=function(t,e){1===this._point&&(this._point=2);var i=this._y*(1-this._t)+e*this._t;this._context.lineTo(this._x,i),this._context.lineTo(t,i),this._x=t,this._y=e},e.point=function(t,e){0===this._point?this.orgPoint(t,e):this.pointRotated(t,e)},e}:n.getInterpolate(i)},generateDrawLine:function generateDrawLine(t,e){function RK(t){return(e?s.subxx:s.xx).call(s,t)}function SK(t,e){return s.isGrouped(t.id)?i(t,e)[0][1]:d.call(s,t.id)(s.getBaseValue(t))}var s=this,c=s.config,l=c.line_connectNull,u=c.axis_rotated,i=s.generateGetLinePoints(t,e),d=e?s.getSubYScale:s.getYScale,g=Object(w.line)();g=u?g.x(SK).y(RK):g.x(RK).y(SK),l||(g=g.defined(function(t){return null!==s.getBaseValue(t)}));var h=e?s.subX:s.x;return function(t){var e,i=d.call(s,t.id),n=l?s.filterRemoveNull(t.values):t.values,a=0,r=0;if(s.isLineType(t)){var o=c.data_regions[t.id];e=o?s.lineWithRegions(n,h,i,o):(s.isStepType(t)&&(n=s.convertValuesToStep(n)),g.curve(s.getCurve(t))(n))}else n[0]&&(a=h(n[0].x),r=i(n[0].value)),e=u?"M ".concat(r," ").concat(a):"M ".concat(a," ").concat(r);return e||"M 0 0"}},generateGetLinePoints:function generateGetLinePoints(t,e){var s=this,c=s.config,i=t.__max__+1,n=!!e,l=s.getShapeX(0,i,t,n),u=s.getShapeY(n),d=s.getShapeOffset(s.isLineType,t,n),g=n?s.getSubYScale:s.getYScale;return function(t,e){var i=g.call(s,t.id)(0),n=d(t,e)||i,a=l(t),r=u(t);c.axis_rotated&&(0<t.value&&r<i||t.value<0&&i<r)&&(r=i);var o=[a,r-(i-n)];return[o,o,o,o]}},lineWithRegions:function lineWithRegions(t,l,u,e){function KL(t,e){for(var i,n=0;i=e[n];n++)if(i.start<t&&t<=i.end)return i.style;return!1}var r,d,g,i,n=this,h=n.config.axis_rotated,a=n.isTimeSeries(),o=n.isCategorized()?.5:0,s=[];if(ec(e))for(var c,f=function(t,e){return dc(t)?e:a?n.parseDate(t):t},p=0;c=e[p];p++){var x=f(c.start,t[0].x),v=f(c.end,t[t.length-1].x),m=c.style||{dasharray:"2 2"};s[p]={start:x,end:v,style:m}}for(var _,y=h?function(t){return u(t.value)}:function(t){return l(t.x)},b=h?function(t){return l(t.x)}:function(t){return u(t.value)},T=function(t){return"M".concat(t[0][0],",").concat(t[0][1],"L").concat(t[1][0],",").concat(t[1][1])},A=a?function(t,e,i,n){var a=t.x.getTime(),r=e.x-t.x,o=new Date(a+r*i),s=new Date(a+r*(i+n)),c=h?[[u(d(i)),l(o)],[u(d(i+g)),l(s)]]:[[l(o),u(d(i))],[l(s),u(d(i+g))]];return T(c)}:function(t,e,i,n){var a=h?[[u(d(i),!0),l(r(i))],[u(d(i+n),!0),l(r(i+n))]]:[[l(r(i),!0),u(d(i))],[l(r(i+n),!0),u(d(i+n))]];return T(a)},w="M",L=0;_=t[L];L++){var S=t[L-1];m=KL(_.x,s);if(dc(s)||!m)w+="".concat(L?"L":"").concat(y(_),",").concat(b(_));else{try{m=m.dasharray.split(" ")}catch(t){m="2 2".split(" ")}r=n.getScale(S.x+o,_.x+o,a),d=n.getScale(S.value,_.value);var k=l(_.x)-l(S.x),C=u(_.value)-u(S.value),O=Math.sqrt(Math.pow(k,2)+Math.pow(C,2));i=(g=m[0]/O)*m[1];for(var R=g;R<=1;R+=i)w+=A(S,_,R,g),1<=R+i&&(w+=A(S,_,1,0))}}return w},updateAreaGradient:function updateAreaGradient(){var d=this;d.data.targets.forEach(function(i){var t="".concat(d.datetimeId,"-areaGradient").concat(d.getTargetSelectorSuffix(i.id));if(d.isAreaType(i)&&d.defs.select("#".concat(t)).empty()){var n=d.color(i),e=d.config.area_linearGradient,a=e.x,r=void 0===a?[0,0]:a,o=e.y,s=void 0===o?[0,1]:o,c=e.stops,l=void 0===c?[[0,n,1],[1,n,0]]:c,u=d.defs.append("linearGradient").attr("id","".concat(t)).attr("x1",r[0]).attr("x2",r[1]).attr("y1",s[0]).attr("y2",s[1]);l.forEach(function(t){var e=ac(t[1])?t[1](i.id):t[1];u.append("stop").attr("offset",t[0]).attr("stop-color",e||n).attr("stop-opacity",t[2])})}})},updateAreaColor:function updateAreaColor(t){return this.config.area_linearGradient?"url(#".concat(this.datetimeId,"-areaGradient").concat(this.getTargetSelectorSuffix(t.id),")"):this.color(t)},updateArea:function updateArea(t){var e=this;e.config.area_linearGradient&&e.updateAreaGradient(),e.mainArea=e.main.selectAll(".".concat(M.areas)).selectAll(".".concat(M.area)).data(e.lineData.bind(e)),e.mainArea.exit().transition().duration(t).style("opacity","0").remove(),e.mainArea=e.mainArea.enter().append("path").attr("class",e.classArea.bind(e)).style("fill",e.updateAreaColor.bind(e)).style("opacity",function(){return e.orgAreaOpacity=Object(B.select)(this).style("opacity"),"0"}).merge(e.mainArea),e.mainArea.style("opacity",e.orgAreaOpacity)},redrawArea:function redrawArea(t,e){var i=this;return[(e?i.mainArea.transition(wc()):i.mainArea).attr("d",t).style("fill",i.updateAreaColor.bind(i)).style("opacity",function(t){return i.isAreaRangeType(t)?i.orgAreaOpacity/1.75:i.orgAreaOpacity})]},generateDrawArea:function generateDrawArea(t,e){function dN(t){return(e?o.subxx:o.xx).call(o,t)}function eN(t,e){return o.isGrouped(t.id)?i(t,e)[0][1]:n.call(o,t.id)(o.isAreaRangeType(t)?o.getAreaRangeData(t,"high"):0)}function fN(t,e){return o.isGrouped(t.id)?i(t,e)[1][1]:n.call(o,t.id)(o.isAreaRangeType(t)?o.getAreaRangeData(t,"low"):t.value)}var o=this,s=o.config,c=s.line_connectNull,l=s.axis_rotated,i=o.generateGetAreaPoints(t,e),n=e?o.getSubYScale:o.getYScale;return function(t){var e,i=c?o.filterRemoveNull(t.values):t.values,n=0,a=0;if(o.isAreaType(t)){var r=Object(w.area)();r=l?r.y(dN).x0(eN).x1(fN):r.x(dN).y0(s.area_above?0:eN).y1(fN),c||(r=r.defined(function(t){return null!==o.getBaseValue(t)})),o.isStepType(t)&&(i=o.convertValuesToStep(i)),e=r.curve(o.getCurve(t))(i)}else i[0]&&(n=o.x(i[0].x),a=o.getYScale(t.id)(i[0].value)),e=l?"M ".concat(a," ").concat(n):"M ".concat(n," ").concat(a);return e||"M 0 0"}},generateGetAreaPoints:function generateGetAreaPoints(t,e){var o=this,s=o.config,i=t.__max__+1,c=o.getShapeX(0,i,t,!!e),l=o.getShapeY(!!e),u=o.getShapeOffset(o.isAreaType,t,!!e),d=e?o.getSubYScale:o.getYScale;return function(t,e){var i=d.call(o,t.id)(0),n=u(t,e)||i,a=c(t),r=l(t);return s.axis_rotated&&(0<t.value&&r<i||t.value<0&&i<r)&&(r=i),[[a,n],[a,r-(i-n)],[a,r-(i-n)],[a,n]]}},updateCircle:function updateCircle(){var e=this;e.config.point_show&&(e.mainCircle=e.main.selectAll(".".concat(M.circles)).selectAll(".".concat(M.circle)).data(function(t){return!e.isBarType(t)&&(!e.isLineType(t)||e.shouldDrawPointsForLine(t))&&e.labelishData(t)}),e.mainCircle.exit().remove(),e.mainCircle=e.mainCircle.enter().append(e.point("create",this,e.classCircle.bind(e),e.pointR.bind(e),e.color)).merge(e.mainCircle).style("stroke",e.color).style("opacity",e.initialOpacityForCircle.bind(e)))},redrawCircle:function redrawCircle(i,n,a,r){var o=this,s=o.main.selectAll(".".concat(M.selectedCircle));if(!o.config.point_show)return[];var c=[];o.mainCircle.each(function(t){var e=o.point("update",o,i,n,o.opacityForCircle.bind(o),o.color,a,r,s).bind(this)(t);c.push(e)}).attr("class",o.classCircle.bind(o));var t=o.isCirclePoint()?"c":"";return[c,s.attr("".concat(t,"x"),i).attr("".concat(t,"y"),n)]},circleX:function circleX(t){var e=_b(t.x);return this.config.zoom_enabled&&this.zoomScale?e?this.zoomScale(t.x):null:e?this.x(t.x):null},updateCircleY:function updateCircleY(){var n=this;n.circleY=function(t,e){var i=t.id;return n.isGrouped(i)?n.generateGetLinePoints(n.getShapeIndices(n.isLineType))(t,e)[0][1]:n.getYScale(i)(n.getBaseValue(t))}},getCircles:function getCircles(t,e){var i=_b(t)?"-".concat(t):"";return(e?this.main.selectAll(".".concat(M.circles).concat(this.getTargetSelectorSuffix(e))):this.main).selectAll(".".concat(M.circle).concat(i))},expandCircles:function expandCircles(t,e,i){var n=this,o=n.pointExpandedR.bind(n);i&&n.unexpandCircles();var a=n.getCircles(t,e).classed(M.EXPANDED,!0),s=o(a)/n.config.point_r,c=1-s;n.isCirclePoint()?a.attr("r",o):a.each(function(){var t=Object(B.select)(this);if("circle"===this.tagName)t.attr("r",o);else{var e=this.getBBox(),i=e.width,n=e.height,a=c*(+t.attr("x")+i/2),r=c*(+t.attr("y")+n/2);t.attr("transform","translate(".concat(a," ").concat(r,") scale(").concat(s,")"))}})},unexpandCircles:function unexpandCircles(t){var e=this,i=e.pointR.bind(e),n=e.getCircles(t).filter(function(){return Object(B.select)(this).classed(M.EXPANDED)}).classed(M.EXPANDED,!1);n.attr("r",i),e.isCirclePoint()||n.attr("transform","scale(".concat(i(n)/e.config.point_r,")"))},pointR:function(t){var e=this.config.point_r,i=e;return this.isStepType(t)?i=0:this.isBubbleType(t)?i=this.getBubbleR(t):ac(e)&&(i=e(t)),i},pointExpandedR:function pointExpandedR(t){var e=this.config,i=this.isBubbleType(t)?1.15:1.75;return e.point_focus_expand_enabled?e.point_focus_expand_r||this.pointR(t)*i:this.pointR(t)},pointSelectR:function pointSelectR(t){var e=this.config.point_select_r;return ac(e)?e(t):e||4*this.pointR(t)},isWithinCircle:function isWithinCircle(t,e){var i=Object(B.mouse)(t),n=Object(B.select)(t),a=this.isCirclePoint()?"c":"",r=+n.attr("".concat(a,"x")),o=+n.attr("".concat(a,"y"));if(!r&&!o&&1===t.nodeType){var s=t.getBBox?t.getBBox():t.getBoundingClientRect();r=s.x,o=s.y}return Math.sqrt(Math.pow(r-i[0],2)+Math.pow(o-i[1],2))<(e||this.config.point_sensitivity)},isWithinStep:function isWithinStep(t,e){return Math.abs(e-Object(B.mouse)(t)[1])<30},shouldDrawPointsForLine:function shouldDrawPointsForLine(t){var e=this.config.line_point;return!0===e||mc(e)&&-1!==e.indexOf(t.id)}}),yc(b.prototype,{hasValidPointType:function hasValidPointType(t){return/^(circle|rect(angle)?|polygon|ellipse|use)$/i.test(t||this.config.point_type)},hasValidPointDrawMethods:function hasValidPointDrawMethods(t){var e=t||this.config.point_type;return jc(e)&&ac(e.create)&&ac(e.update)},insertPointInfoDefs:function insertPointInfoDefs(t,e){function aP(t,e){for(var i,n=t.attributes,a=0;i=n[a];a++)i=i.name,e.setAttribute(i,t.getAttribute(i))}var i=(new DOMParser).parseFromString(t,"image/svg+xml").documentElement,n=O.a.createElementNS(B.namespaces.svg,i.nodeName.toLowerCase());if(n.id=e,n.style.fill="inherit",n.style.stroke="inherit",aP(i,n),i.childNodes&&i.childNodes.length){var a=Object(B.select)(n);"innerHTML"in n?a.html(i.innerHTML):Ac(i.childNodes).forEach(function(t){aP(t,a.append(t.tagName).node())})}this.defs.node().appendChild(n)},pointFromDefs:function pointFromDefs(t){return this.defs.select("#".concat(t))},generatePoint:function generatePoint(){var c=this,t=c.config,l=[],u=lc(t.point_pattern)?t.point_pattern:[t.point_type];return function(r,o){for(var t=arguments.length,s=Array(2<t?t-2:0),e=2;e<t;e++)s[e-2]=arguments[e];return function(t){var e=t.id||t.data&&t.data.id||t,i=Object(B.select)(this);l.indexOf(e)<0&&l.push(e);var n=u[l.indexOf(e)%u.length];if(c.hasValidPointType(n))n=c[n];else if(!c.hasValidPointDrawMethods(n)){var a="".concat(c.datetimeId,"-point-").concat(e);if(c.pointFromDefs(a).size()<1&&c.insertPointInfoDefs(n,a),/^(create|update)$/.test(r))return"create"===r&&s.unshift(a),c.custom[r].bind(o).apply(void 0,[i].concat(s))}return n[r].bind(o).apply(void 0,[i].concat(s))}}},getTransitionName:function getTransitionName(){return wc()},custom:{create:function create(t,e,i,n,a){return t.append("use").attr("xlink:href","#".concat(e)).attr("class",i).style("fill",a).node()},update:function update(t,e,i,n,a,r,o,s){function SP(t){return e(t)-l/2}var c=t.node().getBBox(),l=c.width,u=c.height,d=t;if(r){var g=this.getTransitionName();o&&d.attr("x",SP),d=d.transition(g),s.transition(this.getTransitionName())}return d.attr("x",SP).attr("y",function yPosFn2(t){return i(t)-u/2}).style("opacity",n).style("fill",a)}},circle:{create:function create(t,e,i,n){return t.append("circle").attr("class",e).attr("r",i).style("fill",n).node()},update:function update(t,e,i,n,a,r,o,s){var c=this,l=t;if(c.hasType("bubble")&&l.attr("r",c.pointR.bind(c)),r){var u=c.getTransitionName();o&&l.attr("cx",e),l.attr("cx")&&(l=l.transition(u)),s.transition(c.getTransitionName())}return l.attr("cx",e).attr("cy",i).style("opacity",n).style("fill",a)}},rectangle:{create:function create(t,e,i,n){function oQ(t){return 2*i(t)}return t.append("rect").attr("class",e).attr("width",oQ).attr("height",oQ).style("fill",n).node()},update:function update(t,e,i,n,a,r,o,s){function AQ(t){return e(t)-c}var c=this.config.point_r,l=t;if(r){var u=this.getTransitionName();o&&l.attr("x",AQ),l=l.transition(u),s.transition(this.getTransitionName())}return l.attr("x",AQ).attr("y",function rectYPosFn(t){return i(t)-c}).style("opacity",n).style("fill",a)}}});var S="$radarPoints";yc(b.prototype,{initRadar:function initRadar(){var t=this,e=t.config;t.hasType("radar")&&(t.radars=t.main.select(".".concat(M.chart)).append("g").attr("class",M.chartRadars),t.radars.levels=t.radars.append("g").attr("class",M.levels),t.radars.axes=t.radars.append("g").attr("class",M.axis),t.radars.shapes=t.radars.append("g").attr("class",M.shapes),t.maxValue=e.radar_axis_max||t.getMinMaxData().max[0].value)},getRadarSize:function getRadarSize(){var t=this.config.axis_x_categories.length<4?-20:10,e=(Math.min(this.arcWidth,this.arcHeight)-t)/2;return[e,e]},updateTargetsForRadar:function updateTargetsForRadar(t){var e=this.config;kc(e.axis_x_categories)&&(e.axis_x_categories=Hc(0,Gc("max",t.map(function(t){return t.values.length})))),this.generateRadarPoints()},getRadarPosition:function getRadarPosition(e,i,n,a){var r=this.config,t=this.getRadarSize(),o=k()(t,2),s=o[0],c=o[1],l=r.axis_x_categories.length,u=r.radar_direction_clockwise,d=Ac(e).map(function(t){return function getPosition(t,e,i,n,a,r){var o=t&&0<n?i-n:n,s=2*Math.PI;return a*(1-r*("x"===e?Math.sin:Math.cos)(o*s/i))}(u,t,l,i,ec(n)?n:"x"===e?s:c,cc(a)?a:r.radar_size_ratio)});return 1===d.length?d[0]:d},generateRadarPoints:function generateRadarPoints(){var i=this,t=i.data.targets,e=i.getRadarSize(),n=k()(e,2),a=n[0],r=n[1],o=i.getCache(S)||{},s=o._size;s&&(s.width===a||s.height===r)||(t.forEach(function(t){o[t.id]=t.values.map(function(t,e){return i.getRadarPosition(["x","y"],e,void 0,i.getRatio("radar",t))})}),o._size={width:a,height:r},i.addCache(S,o))},redrawRadar:function redrawRadar(t,e){var i=this,n=i.getTranslate("radar");n&&(i.radars.attr("transform",n),i.main.selectAll(".".concat(M.circles)).attr("transform",n),i.main.select(".".concat(M.chartTexts)).attr("transform",n),i.generateRadarPoints(),i.updateRadarLevel(),i.updateRadarAxes(),i.updateRadarShape(t,e))},generateGetRadarPoints:function generateGetRadarPoints(){var n=this.getCache(S);return function(t,e){var i=n[t.id][e];return[i,i,i,i]}},updateRadarLevel:function updateRadarLevel(){var i=this,t=i.config,e=i.getRadarSize(),n=k()(e,2),a=n[0],r=n[1],o=t.radar_level_depth,s=t.axis_x_categories.length,c=t.radar_level_text_show,l=i.radars.levels,u=Hc(0,o),d=t.radar_size_ratio*Math.min(a,r),g=u.map(function(t){return(t+1)/o*d}),h=t.radar_level_text_format,f=u.map(function(t){var e=g[t];return Hc(0,s).map(function(t){return i.getRadarPosition(["x","y"],t,e,1).join(",")}).join(" ")}),p=l.selectAll(".".concat(M.level)).data(u);p.exit().remove();var x=p.enter().append("g").attr("class",function(t,e){return"".concat(M.level," ").concat(M.level,"-").concat(e)});x.append("polygon").style("visibility",t.radar_level_show?null:"hidden"),c&&(l.select("text").empty()&&l.append("text").attr("dx","-.5em").attr("dy","-.7em").style("text-anchor","end").text(function(){return h(0)}),x.append("text").attr("dx","-.5em").style("text-anchor","end").text(function(t){return h(i.maxValue/u.length*(t+1))})),x.merge(p).attr("transform",function(t){return"translate(".concat(a-g[t],", ").concat(r-g[t],")")}).selectAll("polygon").attr("points",function(t){return f[t]}),c&&l.selectAll("text").attr("x",function(t){return dc(t)?a:f[t].split(",")[0]}).attr("y",function(t){return dc(t)?r:0})},updateRadarAxes:function updateRadarAxes(){var n=this,t=n.config,e=n.getRadarSize(),i=k()(e,2),a=i[0],r=i[1],o=t.axis_x_categories,s=n.radars.axes.selectAll("g").data(o);s.exit().remove();var c=s.enter().append("g").attr("class",function(t,e){return"".concat(M.axis,"-").concat(e)});if(t.radar_axis_line_show&&c.append("line"),t.radar_axis_text_show&&c.append("text"),s=c.merge(s),t.radar_axis_line_show&&s.select("line").attr("x1",a).attr("y1",r).attr("x2",function(t,e){return n.getRadarPosition("x",e)}).attr("y2",function(t,e){return n.getRadarPosition("y",e)}),t.radar_axis_text_show){var l=t.radar_axis_text_position,u=l.x,d=void 0===u?0:u,g=l.y,h=void 0===g?0:g;s.select("text").style("text-anchor","middle").attr("dy",".5em").call(function(t){t.each(function(t){sc(Object(B.select)(this),t+"",[-.6,1.2])})}).datum(function(t,e){return{index:e}}).attr("transform",function(t){dc(this.width)&&(this.width=this.getBoundingClientRect().width/2);var e=n.getRadarPosition("x",t.index,void 0,1),i=Math.round(n.getRadarPosition("y",t.index,void 0,1));return a<e?e+=this.width+d:Math.round(e)<a&&(e-=this.width+d),r<i?(i/2===r&&"tspan"===this.firstChild.tagName&&this.firstChild.setAttribute("dy","0em"),i+=h):i<r&&(i-=h),"translate(".concat(e," ").concat(i,")")})}n.bindEvent()},bindEvent:function bindEvent(){var i=this,n=this;if(n.config.interaction_enabled){var a="mouse"===n.inputType,r=function(){var t=B.event.target;/tspan/i.test(t.tagName)&&(t=t.parentNode);var e=Object(B.select)(t).datum();return e&&1===Object.keys(e).length?e.index:void 0},t=function(){var t=r(),e=dc(t);(a||e)&&(i.hideTooltip(),i.unexpandCircles(),a?n.setOverOut(!1,t):e&&n.callOverOutForTouch())};n.radars.select(".".concat(M.axis)).on(a?"mouseover ":"touchstart",function(){if(!n.transiting){var t=r();n.selectRectForSingle(n.svg.node(),null,t),a?n.setOverOut(!0,t):n.callOverOutForTouch(t)}}).on("mouseout",a?t:null),a||n.svg.on("touchstart",t)}},updateRadarShape:function updateRadarShape(t,e){var i=this,n=i.data.targets,a=i.getCache(S),r=i.radars.shapes.selectAll("polygon").data(n),o=r.enter().append("g").attr("class",i.classChartRadar.bind(i));r.exit().transition().duration(e).remove(),o.append("polygon").merge(r).transition().duration(t).style("fill",function(t){return i.color(t)}).style("stroke",function(t){return i.color(t)}).attr("points",function(t){return a[t.id].join(" ")})},radarCircleX:function radarCircleX(t){return this.getCache(S)[t.id][t.index][0]},radarCircleY:function radarCircleY(t){return this.getCache(S)[t.id][t.index][1]}}),yc(b.prototype,{initText:function initText(){this.main.select(".".concat(M.chart)).append("g").attr("class",M.chartTexts),this.mainText=Object(B.selectAll)([])},updateTargetsForText:function updateTargetsForText(t){var e=this,i=e.classChartText.bind(e),n=e.classTexts.bind(e),a=e.classFocus.bind(e);e.main.select(".".concat(M.chartTexts)).selectAll(".".concat(M.chartText)).data(t).attr("class",function(t){return i(t)+a(t)}).enter().append("g").attr("class",i).style("opacity","0").style("pointer-events","none").append("g").attr("class",n)},updateText:function updateText(t){var e=this,a=this,i=a.config,n=a.labelishData.bind(a),r=a.classText.bind(a);a.mainText=a.main.selectAll(".".concat(M.texts)).selectAll(".".concat(M.text)).data(function(t){return e.isRadarType(t)?t.values:n(t)}),a.mainText.exit().transition().duration(t).style("fill-opacity","0").remove(),a.mainText=a.mainText.enter().append("text").merge(a.mainText).attr("class",r).attr("text-anchor",function(t){return i.axis_rotated?t.value<0?"end":"start":"middle"}).style("fill",a.updateTextColor.bind(a)).style("fill-opacity","0").text(function(t,e,i){var n=a.isBubbleZType(t)?a.getBubbleZData(t.value,"z"):t.value;return a.dataLabelFormat(t.id)(n,t.id,e,i)})},updateTextColor:function updateTextColor(t){var e,i=this.config.data_labels_colors;return bc(i)?e=i:nc(i)&&(e=i[t.id]),e||this.color(t)},redrawText:function redrawText(e,i,t,n){var a=this,r=wc(),o=t?0:a.opacityForText.bind(a);return[this.mainText.each(function(){var t=Object(B.select)(this);(n&&t.attr("x")?t.transition(r):t).attr("x",e).attr("y",i).style("fill",a.updateTextColor.bind(a)).style("fill-opacity",o)})]},getTextRect:function getTextRect(t,e){var i=t.node?t.node():t;/text/i.test(i.tagName)||(i=i.querySelector("text"));var n=i.textContent,a="$".concat(n.replace(/\W/g,"_")),r=this.getCache(a);return r||(this.svg.append("text").style("visibility","hidden").style("font",Object(B.select)(i).style("font")).classed(e,!0).text(n).call(function(t){r=t.node().getBoundingClientRect()}).remove(),this.addCache(a,r)),r},generateXYForText:function generateXYForText(e,t){var n=this,i=Object.keys(e),a={},r=t?n.getXForText:n.getYForText;return n.hasType("radar")&&i.push("radar"),i.forEach(function(t){a[t]=n["generateGet".concat(zc(t),"Points")](e[t],!1)}),function(t,e){var i=(n.isAreaType(t)?"area":n.isBarType(t)&&"bar")||n.isRadarType(t)&&"radar"||"line";return r.call(n,a[i](t,e),t,this)}},getCenteredTextPos:function getCenteredTextPos(t,e,i){var n=this.config,a=n.axis_rotated;if(n.data_labels.centered&&this.isBarType(t)){var r=i.getBoundingClientRect(),o=0<=t.value;if(a){var s=(o?e[1][1]-e[0][1]:e[0][1]-e[1][1])/2+r.width/2;return o?-s-3:2+s}var c=(o?e[0][1]-e[1][1]:e[1][1]-e[0][1])/2+r.height/2;return o?c:-c-2}return 0},getXForText:function getXForText(t,e,i){var n,a,r=this,o=r.config,s=o.axis_rotated;return n=s?(a=r.isBarType(e)?4:6,t[2][1]+a*(e.value<0?-1:1)):r.hasType("bar")?(t[2][0]+t[0][0])/2:t[0][0],null===e.value&&(n>r.width?n=r.width-i.getBoundingClientRect().width:n<0&&(n=4)),s&&(n+=r.getCenteredTextPos(e,t,i)),n+(o.data_labels_position.x||0)},getYForText:function getYForText(t,e,i){var n,a=this,r=a.config,o=r.axis_rotated,s=r.point_r,c=i.getBoundingClientRect(),l=3;if(o)n=(t[0][0]+t[2][0]+.6*c.height)/2;else if(n=t[2][1],cc(s)&&5<s&&(a.isLineType(e)||a.isScatterType(e))&&(l+=r.point_r/2.3),e.value<0||0===e.value&&!a.hasPositiveValue)n+=c.height,a.isBarType(e)?n-=l:a.isBarType(e)||(n+=l);else{var u=2*-l;a.isBarType(e)?u=-l:a.isBubbleType(e)&&(u=l),n+=u}if(null===e.value&&!o){var d=c.height;n<d?n=d:n>this.height&&(n=this.height-4)}return o||(n+=a.getCenteredTextPos(e,t,i)),n+(r.data_labels_position.y||0)}});var R={Area:["area","area-spline","area-spline-range","area-line-range","area-step"],AreaRange:["area-spline-range","area-line-range"],Arc:["pie","donut","gauge","radar"],Line:["line","spline","area","area-spline","area-spline-range","area-line-range","step","area-step"],Step:["step","area-step"],Spline:["spline","area-spline","area-spline-range"]};yc(b.prototype,{setTargetType:function setTargetType(t,e){var i=this,n=i.config;i.mapToTargetIds(t).forEach(function(t){i.withoutFadeIn[t]=e===n.data_types[t],n.data_types[t]=e}),t||(n.data_type=e)},hasType:function hasType(i,t){var n=this.config.data_types,e=t||this.data.targets,a=!1;return e&&e.length?e.forEach(function(t){var e=n[t.id];(e&&0<=e.indexOf(i)||!e&&"line"===i)&&(a=!0)}):Object.keys(n).length?Object.keys(n).forEach(function(t){n[t]===i&&(a=!0)}):a=this.config.data_type===i,a},hasTypeOf:function hasTypeOf(t,e,i){var n=this,a=2<arguments.length&&void 0!==i?i:[];return!R[t].filter(function(t){return-1===a.indexOf(t)}).every(function(t){return!n.hasType(t,e)})},isTypeOf:function isTypeOf(t,e){var i=bc(t)?t:t.id,n=this.config.data_types[i];return mc(e)?0<=e.indexOf(n):n===e},hasArcType:function hasArcType(t,e){return this.hasTypeOf("Arc",t,e)},isLineType:function isLineType(t){var e=bc(t)?t:t.id;return!this.config.data_types[e]||this.isTypeOf(e,R.Line)},isStepType:function isStepType(t){return this.isTypeOf(t,R.Step)},isSplineType:function isSplineType(t){return this.isTypeOf(t,R.Spline)},isAreaType:function isAreaType(t){return this.isTypeOf(t,R.Area)},isAreaRangeType:function isAreaRangeType(t){return this.isTypeOf(t,R.AreaRange)},isBarType:function isBarType(t){return this.isTypeOf(t,"bar")},isBubbleType:function isBubbleType(t){return this.isTypeOf(t,"bubble")},isScatterType:function isScatterType(t){return this.isTypeOf(t,"scatter")},isPieType:function isPieType(t){return this.isTypeOf(t,"pie")},isGaugeType:function isGaugeType(t){return this.isTypeOf(t,"gauge")},isDonutType:function isDonutType(t){return this.isTypeOf(t,"donut")},isRadarType:function isRadarType(t){return this.isTypeOf(t,"radar")},isArcType:function isArcType(t){return this.isPieType(t)||this.isDonutType(t)||this.isGaugeType(t)||this.isRadarType(t)},isCirclePoint:function isCirclePoint(){var t=this.config,e=t.point_pattern;return"circle"===t.point_type&&(!e||mc(e)&&0===e.length)},lineData:function lineData(t){return this.isLineType(t)?[t]:[]},arcData:function arcData(t){return this.isArcType(t.data)?[t]:[]},barData:function barData(t){return this.isBarType(t)?t.values:[]},labelishData:function labelishData(t){return this.isBarType(t)||this.isLineType(t)||this.isScatterType(t)||this.isBubbleType(t)||this.isRadarType(t)?t.values:[]},barLineBubbleData:function barLineBubbleData(t){return this.isBarType(t)||this.isLineType(t)||this.isBubbleType(t)?t.values:[]},isInterpolationType:function isInterpolationType(t){return 0<=["basis","basis-closed","basis-open","bundle","cardinal","cardinal-closed","cardinal-open","catmull-rom","catmull-rom-closed","catmull-rom-open","linear","linear-closed","monotone-x","monotone-y","natural"].indexOf(t)}});function Zc(t){return _b(t.position)||"end"}function $c(t){return"start"===t.position?4:"middle"===t.position?0:-4}function _c(i,n,a){return function(t){var e=i?0:n;return"start"===t.position?e=i?-a:0:"middle"===t.position&&(e=(i?-a:n)/2),e}}yc(b.prototype,{initGrid:function initGrid(){this.xgrid=Object(B.selectAll)([]),this.initGridLines(),this.initXYFocusGrid()},initGridLines:function initGridLines(){var t=this,e=t.config;(e.grid_x_lines.length||e.grid_y_lines.length)&&(t.gridLines=t.main.insert("g",".".concat(M.chart).concat(e.grid_lines_front?" + *":"")).attr("clip-path",t.clipPathForGrid).attr("class","".concat(M.grid," ").concat(M.gridLines)),t.gridLines.append("g").attr("class",M.xgridLines),t.gridLines.append("g").attr("class",M.ygridLines),t.xgridLines=Object(B.selectAll)([]))},updateXGrid:function updateXGrid(t){function MV(t){return((i.zoomScale||i.x)(t)+r)*(n?-1:1)}var i=this,e=i.config,n=e.axis_rotated,a=i.generateGridData(e.grid_x_type,i.x),r=i.isCategorized()?i.xAxis.tickOffset():0;i.xgridAttr=n?{x1:0,x2:i.width,y1:MV,y2:MV}:{x1:MV,x2:MV,y1:0,y2:i.height},i.xgrid=i.main.select(".".concat(M.xgrids)).selectAll(".".concat(M.xgrid)).data(a),i.xgrid.exit().remove(),i.xgrid=i.xgrid.enter().append("line").attr("class",M.xgrid).merge(i.xgrid),t||i.xgrid.each(function(){var e=Object(B.select)(this);Object.keys(i.xgridAttr).forEach(function(t){e.attr(t,i.xgridAttr[t]).style("opacity",function(){return e.attr(n?"y1":"x1")===(n?i.height:0)?"0":"1"})})})},updateYGrid:function updateYGrid(){function UV(t){return Math.ceil(e.y(t))}var e=this,t=e.config,i=t.axis_rotated,n=e.yAxis.tickValues()||e.y.ticks(t.grid_y_ticks);e.ygrid=e.main.select(".".concat(M.ygrids)).selectAll(".".concat(M.ygrid)).data(n),e.ygrid.exit().remove(),e.ygrid=e.ygrid.enter().append("line").attr("class",M.ygrid).merge(e.ygrid),e.ygrid.attr("x1",i?UV:0).attr("x2",i?UV:e.width).attr("y1",i?0:UV).attr("y2",i?e.height:UV),e.smoothLines(e.ygrid,"grid")},updateGrid:function updateGrid(t){var e=this;e.gridLines||e.initGridLines(),e.grid.style("visibility",e.hasArcType()?"hidden":"visible"),e.main.select("line.".concat(M.xgridFocus)).style("visibility","hidden"),e.updateXGridLines(t),e.updateYGridLines(t)},updateXGridLines:function updateXGridLines(t){var e=this,i=e.main,n=e.config,a=n.axis_rotated;n.grid_x_show&&e.updateXGrid(),e.xgridLines=i.select(".".concat(M.xgridLines)).selectAll(".".concat(M.xgridLine)).data(n.grid_x_lines),e.xgridLines.exit().transition().duration(t).style("opacity","0").remove();var r=e.xgridLines.enter().append("g");r.append("line").style("opacity","0"),r.append("text").attr("transform",a?"":"rotate(-90)").attr("dy",-5).style("opacity","0"),e.xgridLines=r.merge(e.xgridLines),e.xgridLines.attr("class",function(t){return"".concat(M.xgridLine," ").concat(t.class||"").trim()}).select("text").attr("text-anchor",Zc).attr("dx",$c).transition().duration(t).text(function(t){return t.text}).transition().style("opacity","1")},updateYGridLines:function updateYGridLines(t){var e=this,i=e.main,n=e.config,a=n.axis_rotated;n.grid_y_show&&e.updateYGrid(),e.ygridLines=i.select(".".concat(M.ygridLines)).selectAll(".".concat(M.ygridLine)).data(n.grid_y_lines),e.ygridLines.exit().transition().duration(t).style("opacity","0").remove();var r=e.ygridLines.enter().append("g");r.append("line").style("opacity","0"),r.append("text").attr("transform",a?"rotate(-90)":"").style("opacity","0"),e.ygridLines=r.merge(e.ygridLines);var o=e.yv.bind(e);e.ygridLines.attr("class",function(t){return"".concat(M.ygridLine," ").concat(t.class||"").trim()}).select("line").transition().duration(t).attr("x1",a?o:0).attr("x2",a?o:e.width).attr("y1",a?0:o).attr("y2",a?e.height:o).transition().style("opacity","1"),e.ygridLines.select("text").attr("text-anchor",Zc).attr("dx",$c).transition().duration(t).attr("dy",-5).attr("x",_c(a,e.width,e.height)).attr("y",o).text(function(t){return t.text}).transition().style("opacity","1")},redrawGrid:function redrawGrid(t){var e=this,i=e.config.axis_rotated,n=e.xv.bind(e),a=e.xgridLines.select("line"),r=e.xgridLines.select("text");return a=(t?a.transition():a).attr("x1",i?0:n).attr("x2",i?e.width:n).attr("y1",i?n:0).attr("y2",i?n:e.height),r=(t?r.transition():r).attr("x",_c(!i,e.width,e.height)).attr("y",n).text(function(t){return t.text}),[(t?a.transition():a).style("opacity","1"),(t?r.transition():r).style("opacity","1")]},initXYFocusGrid:function initXYFocusGrid(){var t=this,e=t.config,i=e.grid_front,n=".".concat(M[i&&t.gridLines?"gridLines":"chart"]).concat(i?" + *":"");t.grid=t.main.insert("g",n).attr("clip-path",t.clipPathForGrid).attr("class",M.grid),e.grid_x_show&&t.grid.append("g").attr("class",M.xgrids),e.grid_y_show&&t.grid.append("g").attr("class",M.ygrids),e.grid_focus_show&&t.grid.append("g").attr("class",M.xgridFocus).append("line").attr("class",M.xgridFocus)},showXGridFocus:function showXGridFocus(t){var e=this,i=e.config,n=i.axis_rotated,a=t.filter(function(t){return t&&_b(e.getBaseValue(t))}),r=e.main.selectAll("line.".concat(M.xgridFocus)),o=e.xx.bind(e);!i.tooltip_show||e.hasType("bubble")||e.hasType("scatter")||e.hasArcType()||(r.style("visibility","visible").data([a[0]]).attr(n?"y1":"x1",o).attr(n?"y2":"x2",o),e.smoothLines(r,"grid"))},hideXGridFocus:function hideXGridFocus(){this.main.select("line.".concat(M.xgridFocus)).style("visibility","hidden")},updateXgridFocus:function updateXgridFocus(){var t=this.config.axis_rotated;this.main.select("line.".concat(M.xgridFocus)).attr("x1",t?0:-10).attr("x2",t?this.width:-10).attr("y1",t?-10:0).attr("y2",t?-10:this.height)},generateGridData:function generateGridData(t,e){var i=this.main.select(".".concat(M.axisX)).selectAll(".tick").size(),n=[];if("year"===t)for(var a=this.getXDomain(),r=a[0].getFullYear(),o=a[1].getFullYear(),s=r;s<=o;s++)n.push(new Date("".concat(s,"-01-01 00:00:00")));else(n=e.ticks(10)).length>i&&(n=n.filter(function(t){return(t+"").indexOf(".")<0}));return n},getGridFilterToRemove:function getGridFilterToRemove(t){return t?function(e){var i=!1;return(mc(t)?t.concat():[t]).forEach(function(t){("value"in t&&e.value===t.value||"class"in t&&e.class===t.class)&&(i=!0)}),i}:function(){return!0}},removeGridLines:function removeGridLines(t,e){var i=this.config,n=this.getGridFilterToRemove(t),a=e?M.xgridLines:M.ygridLines,r=e?M.xgridLine:M.ygridLine;this.main.select(".".concat(a)).selectAll(".".concat(r)).filter(n).transition().duration(i.transition_duration).style("opacity","0").remove();var o="grid_".concat(e?"x":"y","_lines");i[o]=i[o].filter(function toShow(t){return!n(t)})}}),yc(b.prototype,{initTooltip:function initTooltip(){var e=this,i=e.config,t=i.tooltip_contents.bindto;if(e.tooltip=Object(B.select)(t),e.tooltip.empty()&&(e.tooltip=e.selectChart.style("position","relative").append("div").attr("class",M.tooltipContainer).style("position","absolute").style("pointer-events","none").style("display","none")),i.tooltip_init_show){if(e.isTimeSeries()&&bc(i.tooltip_init_x)){var n,a,r=e.data.targets[0];for(i.tooltip_init_x=e.parseDate(i.tooltip_init_x),n=0;(a=r.values[n])&&a.x-i.tooltip_init_x!=0;n++);i.tooltip_init_x=n}e.tooltip.html(e.getTooltipHTML(e.data.targets.map(function(t){return e.addName(t.values[i.tooltip_init_x])}),e.axis.getXAxisTickFormat(),e.getYFormat(e.hasArcType(null,["radar"])),e.color)),t||e.tooltip.style("top",i.tooltip_init_position.top).style("left",i.tooltip_init_position.left).style("display","block")}},getTooltipHTML:function getTooltipHTML(){for(var t,e,i=this,n=i.config,a=arguments.length,r=Array(a),o=0;o<a;o++)r[o]=arguments[o];return ac(n.tooltip_contents)?(t=n.tooltip_contents).call.apply(t,[i].concat(r)):(e=i).getTooltipContent.apply(e,r)},getTooltipContent:function getTooltipContent(t,e,i,n){function BX(t){return a.isBubbleZType(t)?a.getBubbleZData(t.value,"z"):a.getBaseValue(t)}var a=this,r=a.config,o=r.tooltip_format_title||e,s=r.tooltip_format_name||function(t){return t},c=r.tooltip_format_value||(a.isStackNormalized()?function(t,e){return"".concat((100*e).toFixed(2),"%")}:i),l=r.tooltip_order,u=a.levelColor?function(t){return a.levelColor(t.value)}:function(t){return n(t)},d=r.tooltip_contents,g=d.template,h=a.mapToTargetIds();if(null===l&&r.data_groups.length){var f=a.orderTargets(a.data.targets).map(function(t){return t.id}).reverse();t.sort(function(t,e){var i=t?t.value:null,n=e?e.value:null;return 0<i&&0<n&&(i=t.id?f.indexOf(t.id):null,n=e.id?f.indexOf(e.id):null),i-n})}else/^(asc|desc)$/.test(l)?t.sort(function(t,e){var i=t?BX(t):null,n=e?BX(e):null;return"asc"===l?i-n:n-i}):ac(l)&&t.sort(l);var p,x,v,m,_,y=a.getTooltipContentTemplate(g),b=t.length;for(_=0;_<b;_++)if((x=t[_])&&(BX(x)||0===BX(x))){if(dc(p)){var T=rc(o?o(x.x):x.x);p=Jc(y[0],{CLASS_TOOLTIP:M.tooltip,TITLE:_b(T)?g?T:'<tr><th colspan="2">'.concat(T,"</th></tr>"):""})}if(v=[x.ratio,x.id,x.index,t],m=rc(c.apply(void 0,[BX(x)].concat(C()(v)))),a.isAreaRangeType(x)){var A=["high","low"].map(function(t){return rc(c.apply(void 0,[a.getAreaRangeData(x,t)].concat(C()(v))))}),w=k()(A,2),L=w[0],S=w[1];m="<b>Mid:</b> ".concat(m," <b>High:</b> ").concat(L," <b>Low:</b> ").concat(S)}if(void 0!==m)if("continue"===function(){if(null===x.name)return"continue";var t=rc(s.apply(void 0,[x.name].concat(C()(v)))),e=u(x),i={CLASS_TOOLTIP_NAME:M.tooltipName+a.getTargetSelectorSuffix(x.id),COLOR:g||!a.patterns?e:'<svg><rect style="fill:'.concat(e,'" width="10" height="10"></rect></svg>'),NAME:t,VALUE:m};if(g&&nc(d.text)){var n=h.indexOf(x.id);Object.keys(d.text).forEach(function(t){i[t]=d.text[t][n]})}p+=Jc(y[1],i)}())continue}return"".concat(p,"</table>")},getTooltipContentTemplate:function getTooltipContentTemplate(t){return(t||'<table class="{=CLASS_TOOLTIP}"><tbody>\n\t\t\t\t{=TITLE}\n\t\t\t\t{{<tr class="{=CLASS_TOOLTIP_NAME}">\n\t\t\t\t\t<td class="name">'.concat(this.patterns?"{=COLOR}":'<span style="background-color:{=COLOR}"></span>','{=NAME}</td>\n\t\t\t\t\t<td class="value">{=VALUE}</td>\n\t\t\t\t</tr>}}\n\t\t\t</tbody></table>')).replace(/(\r?\n|\t)/g,"").split(/{{(.*)}}/)},tooltipPosition:function tooltipPosition(t,e,i,n){var a=this,r=a.config,o=Object(B.mouse)(n),s=k()(o,2),c=s[0],l=s[1],u=a.getSvgLeft(!0),d=u+a.currentWidth-a.getCurrentPaddingRight();if(l+=20,a.hasArcType()){"touch"===a.inputType||a.hasType("radar")||(l+=a.height/2,c+=(a.width-(a.isLegendRight?a.getLegendWidth():0))/2)}else{var g=a.x(t[0].x);r.axis_rotated?(l=g+20,c+=u+100,d-=u):(l-=5,c=u+a.getCurrentPaddingLeft(!0)+20+(a.zoomScale?c:g))}var h=c+e;return d<h&&(c-=h-d+20),l+i>a.currentHeight&&(l-=i+30),l<0&&(l=0),{top:l,left:c}},showTooltip:function showTooltip(t,e){var i=this,n=i.config,a=n.tooltip_contents.bindto,r=i.hasArcType(null,["radar"]),o=t.filter(function(t){return t&&_b(i.getBaseValue(t))}),s=n.tooltip_position||i.tooltipPosition;if(0!==o.length&&n.tooltip_show){var c=i.tooltip.datum(),l=JSON.stringify(t),u=c&&c.width||0,d=c&&c.height||0;if(!c||c.current!==l){var g=t.concat().sort()[0].index;qc(n.tooltip_onshow,i),i.tooltip.html(i.getTooltipHTML(t,i.axis.getXAxisTickFormat(),i.getYFormat(r),i.color)).style("display",null).style("visibility",null).datum({index:g,current:l,width:u=i.tooltip.property("offsetWidth"),height:d=i.tooltip.property("offsetHeight")}),qc(n.tooltip_onshown,i),i._handleLinkedCharts(!0,g)}if(!a){var h=s.call(this,o,u,d,e);i.tooltip.style("top","".concat(h.top,"px")).style("left","".concat(h.left,"px"))}}},hideTooltip:function hideTooltip(t){var e=this.config;e.tooltip_doNotHide&&!t||(qc(e.tooltip_onhide,this),this.tooltip.style("display","none").style("visibility","hidden").datum(null),qc(e.tooltip_onhidden,this))},_handleLinkedCharts:function _handleLinkedCharts(s,c){var l=this;if(l.config.tooltip_linked){var u=l.config.tooltip_linked_name;(l.api.internal.charts||[]).forEach(function(t){if(t!==l.api){var e=t.internal.config,i=e.tooltip_linked,n=e.tooltip_linked_name,a=O.a.body.contains(t.element);if(i&&u===n&&a){var r=t.internal.tooltip.data()[0],o=c!==(r&&r.index);try{s&&o?t.tooltip.show({index:c}):s||t.tooltip.hide()}catch(t){}}}})}}}),yc(b.prototype,{initLegend:function initLegend(){var t=this,e=t.config;t.legendItemTextBox={},t.legendHasRendered=!1,t.legend=t.svg.append("g"),e.legend_show?(t.legend.attr("transform",t.getTranslate("legend")),t.updateLegend()):(t.legend.style("visibility","hidden"),t.hiddenLegendIds=t.mapToIds(t.data.targets))},updateLegend:function updateLegend(t,e,i){var n=this,a=n.config,r=e||{withTransform:!1,withTransitionForTransform:!1,withTransition:!1};r.withTransition=oc(r,"withTransition",!0),r.withTransitionForTransform=oc(r,"withTransitionForTransform",!0),a.legend_contents_bindto&&a.legend_contents_template?n.updateLegendTemplate():n.updateLegendElement(t||n.mapToIds(n.data.targets),r,i),n.legend.selectAll(".".concat(M.legendItem)).classed(M.legendItemHidden,function(t){return!n.isTargetToShow(t)}),n.updateScales(!1,!n.zoomScale),n.updateSvgSize(),n.transformAll(r.withTransitionForTransform,i),n.legendHasRendered=!0},updateLegendTemplate:function updateLegendTemplate(){var i=this,t=i.config,e=Object(B.select)(t.legend_contents_bindto),n=t.legend_contents_template;if(!e.empty()){var a=i.mapToIds(i.data.targets),r=[],o="";a.forEach(function(t){var e=ac(n)?n.call(i,t,i.color(t),i.api.data(t)[0].values):Jc(n,{COLOR:i.color(t),TITLE:t});e&&(r.push(t),o+=e)});var s=e.html(o).selectAll(function(){return this.childNodes}).data(r);i.setLegendItem(s),i.legend=e}},updateSizeForLegend:function updateSizeForLegend(t){var e=this,i=e.config,n=t.width,a=t.height,r={top:e.isLegendTop?e.getCurrentPaddingTop()+i.legend_inset_y+5.5:e.currentHeight-a-e.getCurrentPaddingBottom()-i.legend_inset_y,left:e.isLegendLeft?e.getCurrentPaddingLeft()+i.legend_inset_x+.5:e.currentWidth-n-e.getCurrentPaddingRight()-i.legend_inset_x+.5};e.margin3={top:e.isLegendRight?0:e.isLegendInset?r.top:e.currentHeight-a,right:NaN,bottom:0,left:e.isLegendRight?e.currentWidth-n:e.isLegendInset?r.left:0}},transformLegend:function transformLegend(t){(t?this.legend.transition():this.legend).attr("transform",this.getTranslate("legend"))},updateLegendStep:function updateLegendStep(t){this.legendStep=t},updateLegendItemWidth:function updateLegendItemWidth(t){this.legendItemWidth=t},updateLegendItemHeight:function updateLegendItemHeight(t){this.legendItemHeight=t},getLegendWidth:function getLegendWidth(){var t=this;return t.config.legend_show?t.isLegendRight||t.isLegendInset?t.legendItemWidth*(t.legendStep+1):t.currentWidth:0},getLegendHeight:function getLegendHeight(){var t=this;return t.config.legend_show?t.isLegendRight?t.currentHeight:Math.max(20,t.legendItemHeight)*(t.legendStep+1):0},opacityForLegend:function opacityForLegend(t){return t.classed(M.legendItemHidden)?null:"1"},opacityForUnfocusedLegend:function opacityForUnfocusedLegend(t){return t.classed(M.legendItemHidden)?null:"0.3"},toggleFocusLegend:function toggleFocusLegend(t,e){var i=this,n=i.mapToTargetIds(t);i.legend.selectAll(".".concat(M.legendItem)).filter(function(t){return 0<=n.indexOf(t)}).classed(M.legendItemFocused,e).transition().duration(100).style("opacity",function(){return(e?i.opacityForLegend:i.opacityForUnfocusedLegend).call(i,Object(B.select)(this))})},revertLegend:function revertLegend(){var t=this;t.legend.selectAll(".".concat(M.legendItem)).classed(M.legendItemFocused,!1).transition().duration(100).style("opacity",function(){return t.opacityForLegend(Object(B.select)(this))})},showLegend:function showLegend(t){var e=this,i=e.config;i.legend_show||(i.legend_show=!0,e.legend.style("visibility","visible"),e.legendHasRendered||e.updateLegend()),e.removeHiddenLegendIds(t),e.legend.selectAll(e.selectorLegends(t)).style("visibility","visible").transition().style("opacity",function(){return e.opacityForLegend(Object(B.select)(this))})},hideLegend:function hideLegend(t){var e=this,i=e.config;i.legend_show&&kc(t)&&(i.legend_show=!1,e.legend.style("visibility","hidden")),e.addHiddenLegendIds(t),e.legend.selectAll(e.selectorLegends(t)).style("opacity","0").style("visibility","hidden")},clearLegendItemTextBoxCache:function clearLegendItemTextBoxCache(){this.legendItemTextBox={}},setLegendItem:function setLegendItem(t){var i=this,e=i.config,n="touch"===i.inputType;t.attr("class",function(t){var e=Object(B.select)(this);return(!e.empty()&&e.attr("class")||"")+i.generateClass(M.legendItem,t)}).style("visibility",function(t){return i.isLegendToShow(t)?"visible":"hidden"}).style("cursor","pointer").on("click",function(t){qc(e.legend_item_onclick,i,t)||(B.event.altKey?(i.api.hide(),i.api.show(t)):(i.api.toggle(t),!n&&i.isTargetToShow(t)?i.api.focus(t):i.api.revert())),n&&i.hideTooltip()}),n||t.on("mouseout",function(t){qc(e.legend_item_onout,i,t)||(Object(B.select)(this).classed(M.legendItemFocused,!1),i.api.revert())}).on("mouseover",function(t){qc(e.legend_item_onover,i,t)||(Object(B.select)(this).classed(M.legendItemFocused,!0),!i.transiting&&i.isTargetToShow(t)&&i.api.focus(t))})},updateLegendElement:function updateLegendElement(t,e){function E$(t,e,i){function f_(t,e){e||(n=(l-x-c)/2)<10&&(n=(l-c)/2,x=0,T++),b[t]=T,y[T]=d.isLegendInset?10:n,v[t]=x,x+=c}var n,a=i===w.length-1,r=function(t,e){return d.legendItemTextBox[e]||(d.legendItemTextBox[e]=d.getTextRect(t,M.legendItem)),d.legendItemTextBox[e]}(t,e),o=r.width+h+(a&&!A?0:10)+g.legend_padding,s=r.height+4,c=A?s:o,l=A?d.getLegendHeight():d.getLegendWidth();if(0===i&&(p=f=T=x=0),g.legend_show&&!d.isLegendToShow(e))return m[e]=0,_[e]=0,b[e]=0,void(v[e]=0);m[e]=o,_[e]=s,(!f||f<=o)&&(f=o),(!p||p<=s)&&(p=s);var u=A?p:f;g.legend_equally?(Object.keys(m).forEach(function(t){return m[t]=f}),Object.keys(_).forEach(function(t){return _[t]=p}),(n=(l-u*w.length)/2)<10?(T=x=0,w.forEach(function(t){return f_(t)})):f_(e,!0)):f_(e)}var i,n,a,d=this,g=d.config,h=g.legend_item_tile_width+5,f=0,p=0,x=0,v={},m={},_={},y=[0],b={},T=0,A=d.isLegendRight||d.isLegendInset,w=t.filter(function(t){return!ec(g.data_names[t])||null!==g.data_names[t]}),r=e.withTransition;d.isLegendInset&&(T=g.legend_inset_step?g.legend_inset_step:w.length,d.updateLegendStep(T)),n=d.isLegendRight?(i=function(t){return f*b[t]},function(t){return y[b[t]]+v[t]}):d.isLegendInset?(i=function(t){return f*b[t]+10},function(t){return y[b[t]]+v[t]}):(i=function(t){return y[b[t]]+v[t]},function(t){return p*b[t]});function F$(t,e){return i(t,e)+4+g.legend_item_tile_width}function G$(t,e){return i(t,e)}function H$(t,e){return i(t,e)-2}function I$(t,e){return i(t,e)-2+g.legend_item_tile_width}function J$(t,e){return n(t,e)+9}function K$(t,e){return n(t,e)-5}function L$(t,e){return n(t,e)+4}var o=-200,s=d.legend.selectAll(".".concat(M.legendItem)).data(w).enter().append("g");d.setLegendItem(s),s.append("text").text(function(t){return ec(g.data_names[t])?g.data_names[t]:t}).each(function(t,e){E$(this,t,e)}).style("pointer-events","none").attr("x",A?F$:o).attr("y",A?o:J$),s.append("rect").attr("class",M.legendItemEvent).style("fill-opacity","0").attr("x",A?G$:o).attr("y",A?o:K$);var c=d.config.legend_usePoint;if(c){var l=[];s.append(function(t){var e=lc(g.point_pattern)?g.point_pattern:[g.point_type];-1===l.indexOf(t)&&l.push(t);var i=e[l.indexOf(t)%e.length];return"rectangle"===i&&(i="rect"),O.a.createElementNS(B.namespaces.svg,d.hasValidPointType(i)?i:"use")}).attr("class",M.legendItemPoint).style("fill",function(t){return d.color(t)}).style("pointer-events","none").attr("href",function(t,e,i){return"use"===i[e].nodeName.toLowerCase()?"#".concat(d.datetimeId,"-point-").concat(t):void 0})}else s.append("line").attr("class",M.legendItemTile).style("stroke",d.color).style("pointer-events","none").attr("x1",A?H$:o).attr("y1",A?o:L$).attr("x2",A?I$:o).attr("y2",A?o:L$).attr("stroke-width",g.legend_item_tile_height);a=d.legend.select(".".concat(M.legendBackground," rect")),d.isLegendInset&&0<f&&0===a.size()&&(a=d.legend.insert("g",".".concat(M.legendItem)).attr("class",M.legendBackground).append("rect"));var u=d.legend.selectAll("text").data(w).text(function(t){return ec(g.data_names[t])?g.data_names[t]:t}).each(function(t,e){E$(this,t,e)});(r?u.transition():u).attr("x",F$).attr("y",J$);var L=d.legend.selectAll("rect.".concat(M.legendItemEvent)).data(w);if((r?L.transition():L).attr("width",function(t){return m[t]}).attr("height",function(t){return _[t]}).attr("x",G$).attr("y",K$),c){var S=d.legend.selectAll(".".concat(M.legendItemPoint)).data(w);(r?S.transition():S).each(function(){var t,e,i,n=this.nodeName.toLowerCase(),a=d.config.point_r,r="x",o="y",s=2,c=2.5;if("circle"===n){var l=.2*a;r="cx",o="cy",t=a+l,s=2*a,c=-l}else if("rect"===n){var u=2.5*a;i=e=u,c=3}Object(B.select)(this).attr(r,function(t){return H$(t)+s}).attr(o,function(t){return L$(t)-c}).attr("r",t).attr("width",e).attr("height",i)})}else{var k=d.legend.selectAll("line.".concat(M.legendItemTile)).data(w);(r?k.transition():k).style("stroke",d.color).attr("x1",H$).attr("y1",L$).attr("x2",I$).attr("y2",L$)}a&&(r?a.transition():a).attr("height",d.getLegendHeight()-12).attr("width",f*(T+1)+10),d.updateLegendItemWidth(f),d.updateLegendItemHeight(p),d.updateLegendStep(T)}});function ad(){var t=0<arguments.length&&void 0!==arguments[0]?arguments[0]:"left",e=1<arguments.length?arguments[1]:void 0,i=cc(e);return-1<t.indexOf("center")?i?e/2:"middle":-1<t.indexOf("right")?i?e:"end":i?0:"start"}yc(b.prototype,{initTitle:function initTitle(){var t=this;if(t.config.title_text){t.title=t.svg.append("g");var e=t.title.append("text").style("text-anchor",ad(t.config.title_position)).attr("class",M.title);sc(e,t.config.title_text,[.3,1.5])}},redrawTitle:function redrawTitle(){var t=this;if(t.title){var e=t.yForTitle.call(t);/g/i.test(t.title.node().tagName)?t.title.attr("transform","translate(".concat(ad(t.config.title_position,t.currentWidth),", ").concat(e,")")):t.title.attr("x",t.xForTitle.call(t)).attr("y",e)}},xForTitle:function xForTitle(){var t,e=this.config,i=e.title_position||"left";return/(right|center)/.test(i)?(t=this.currentWidth-this.getTextRect(this.title,M.title).width,0<=i.indexOf("right")?t-=e.title_padding.right||0:0<=i.indexOf("center")&&(t/=2)):t=e.title_padding.left||0,t},yForTitle:function yForTitle(){return(this.config.title_padding.top||0)+this.getTextRect(this.title,M.title).height},getTitlePadding:function getTitlePadding(){return this.yForTitle()+(this.config.title_padding.bottom||0)}}),yc(b.prototype,{initClip:function initClip(){var t=this;t.clipId="".concat(t.datetimeId,"-clip"),t.clipIdForXAxis="".concat(t.clipId,"-xaxis"),t.clipIdForYAxis="".concat(t.clipId,"-yaxis"),t.clipIdForGrid="".concat(t.clipId,"-grid"),t.clipPath=t.getClipPath(t.clipId),t.clipPathForXAxis=t.getClipPath(t.clipIdForXAxis),t.clipPathForYAxis=t.getClipPath(t.clipIdForYAxis),t.clipPathForGrid=t.getClipPath(t.clipIdForGrid)},getClipPath:function getClipPath(t){var e=this.config;if(!e.clipPath&&/-clip$/.test(t)||!e.axis_x_clipPath&&/-clip-xaxis$/.test(t)||!e.axis_y_clipPath&&/-clip-yaxis$/.test(t))return null;var i=!!O.b.navigator&&0<=O.b.navigator.appVersion.toLowerCase().indexOf("msie 9.");return"url(".concat(i?"":O.a.URL.split("#")[0],"#").concat(t,")")},appendClip:function appendClip(t,e){return t.append("clipPath").attr("id",e).append("rect")},getAxisClipX:function getAxisClipX(t){var e=Math.max(30,this.margin.left);return t?-(1+e):-(e-1)},getAxisClipY:function getAxisClipY(t){return t?-20:-this.margin.top},getXAxisClipX:function getXAxisClipX(){return this.getAxisClipX(!this.config.axis_rotated)},getXAxisClipY:function getXAxisClipY(){return this.getAxisClipY(!this.config.axis_rotated)},getYAxisClipX:function getYAxisClipX(){return this.config.axis_y_inner?-1:this.getAxisClipX(this.config.axis_rotated)},getYAxisClipY:function getYAxisClipY(){return this.getAxisClipY(this.config.axis_rotated)},getAxisClipWidth:function getAxisClipWidth(t){var e=Math.max(30,this.margin.left),i=Math.max(30,this.margin.right);return t?this.width+2+e+i:this.margin.left+20},getAxisClipHeight:function getAxisClipHeight(t){return(t?this.margin.bottom:this.margin.top+this.height)+20},getXAxisClipWidth:function getXAxisClipWidth(){return this.getAxisClipWidth(!this.config.axis_rotated)},getXAxisClipHeight:function getXAxisClipHeight(){return this.getAxisClipHeight(!this.config.axis_rotated)},getYAxisClipWidth:function getYAxisClipWidth(){return this.getAxisClipWidth(this.config.axis_rotated)+(this.config.axis_y_inner?20:0)},getYAxisClipHeight:function getYAxisClipHeight(){return this.getAxisClipHeight(this.config.axis_rotated)}}),yc(b.prototype,{initRegion:function initRegion(){this.region=this.main.append("g").attr("clip-path",this.clipPath).attr("class",M.regions)},updateRegion:function updateRegion(t){var e=this,i=e.config;e.region.style("visibility",e.hasArcType()?"hidden":"visible"),e.mainRegion=e.main.select(".".concat(M.regions)).selectAll(".".concat(M.region)).data(i.regions),e.mainRegion.exit().transition().duration(t).style("opacity","0").remove(),e.mainRegion=e.mainRegion.enter().append("g").merge(e.mainRegion).attr("class",e.classRegion.bind(e)),e.mainRegion.append("rect").style("fill-opacity","0")},redrawRegion:function redrawRegion(t){var e=this,i=e.mainRegion.select("rect");return i=(t?i.transition():i).attr("x",e.regionX.bind(e)).attr("y",e.regionY.bind(e)).attr("width",e.regionWidth.bind(e)).attr("height",e.regionHeight.bind(e)),[(t?i.transition():i).style("fill-opacity",function(t){return _b(t.opacity)?t.opacity:"0.1"}).on("end",function(){Object(B.select)(this.parentNode).selectAll("rect:not([x])").remove()})]},getRegionXY:function getRegionXY(t,e){var i=this,n=i.config.axis_rotated,a="x"===t,r="start",o=0;return"y"===e.axis||"y2"===e.axis?(a||(r="end"),(a?n:!n)&&r in e&&(o=(0,i[e.axis])(e[r]))):(a?!n:n)&&r in e&&(o=(i.zoomScale||i.x)(i.isTimeSeries()?i.parseDate(e[r]):e[r])),o},regionX:function regionX(t){return this.getRegionXY("x",t)},regionY:function regionY(t){return this.getRegionXY("y",t)},getRegionSize:function getRegionSize(t,e){var i=this,n=i.config.axis_rotated,a="width"===t,r=i[a?"regionX":"regionY"](e),o="end",s=i[t];return"y"===e.axis||"y2"===e.axis?(a||(o="start"),(a?n:!n)&&o in e&&(s=(0,i[e.axis])(e[o]))):(a?!n:n)&&o in e&&(s=(i.zoomScale||i.x)(i.isTimeSeries()?i.parseDate(e[o]):e[o])),s<r?0:s-r},regionWidth:function regionWidth(t){return this.getRegionSize("width",t)},regionHeight:function regionHeight(t){return this.getRegionSize("height",t)},isRegionOnX:function isRegionOnX(t){return!t.axis||"x"===t.axis}}),yc(b.prototype,{drag:function drag(t){var h=this,e=h.config,i=h.main;if(!h.hasArcType()&&e.data_selection_enabled&&(!e.zoom_enabled||h.zoom.altDomain)&&e.data_selection_multiple){var n=k()(h.dragStart,2),a=n[0],r=n[1],o=k()(t,2),s=o[0],c=o[1],f=Math.min(a,s),p=Math.max(a,s),x=e.data_selection_grouped?h.margin.top:Math.min(r,c),v=e.data_selection_grouped?h.height:Math.max(r,c);i.select(".".concat(M.dragarea)).attr("x",f).attr("y",x).attr("width",p-f).attr("height",v-x),i.selectAll(".".concat(M.shapes)).selectAll(".".concat(M.shape)).filter(function(t){return e.data_selection_isselectable(t)}).each(function(t,e){var i,n=Object(B.select)(this),a=n.classed(M.SELECTED),r=n.classed(M.INCLUDED),o=!1;if(n.classed(M.circle)){var s=1*n.attr("cx"),c=1*n.attr("cy");i=h.togglePoint,o=f<s&&s<p&&x<c&&c<v}else{if(!n.classed(M.bar))return;var l=function(t){var e=t.getBoundingClientRect(),i=e.width,n=e.height,a=tc(t);return{x:a[0].x,y:Math.min(a[0].y,a[1].y),width:i,height:n}}(this),u=l.x,d=(c=l.y,l.width),g=l.height;i=h.togglePath,o=!(p<u||u+d<f||v<c||c+g<x)}o^r&&(n.classed(M.INCLUDED,!r),n.classed(M.SELECTED,!a),i.call(h,!a,n,t,e))})}},dragstart:function dragstart(t){var e=this,i=e.config;e.hasArcType()||!i.data_selection_enabled||(e.dragStart=t,e.main.select(".".concat(M.chart)).append("rect").attr("class",M.dragarea).style("opacity","0.1"),e.setDragStatus(!0))},dragend:function dragend(){var t=this,e=t.config;t.hasArcType()||!e.data_selection_enabled||(t.main.select(".".concat(M.dragarea)).transition().duration(100).style("opacity","0").remove(),t.main.selectAll(".".concat(M.shape)).classed(M.INCLUDED,!1),t.setDragStatus(!1))},setDragStatus:function setDragStatus(t){this.dragging=t}});var D=i(25);yc(b.prototype,{selectPoint:function selectPoint(t,e,i){var n=this,a=n.config,r=a.axis_rotated,o=(r?n.circleY:n.circleX).bind(n),s=(r?n.circleX:n.circleY).bind(n),c=n.pointSelectR.bind(n);qc(a.data_onselected,n.api,e,t.node()),n.main.select(".".concat(M.selectedCircles).concat(n.getTargetSelectorSuffix(e.id))).selectAll(".".concat(M.selectedCircle,"-").concat(i)).data([e]).enter().append("circle").attr("class",function(){return n.generateClass(M.selectedCircle,i)}).attr("cx",o).attr("cy",s).attr("stroke",n.color).attr("r",function(t){return 1.4*n.pointSelectR(t)}).transition().duration(100).attr("r",c)},unselectPoint:function unselectPoint(t,e,i){qc(this.config.data_onunselected,this.api,e,t.node()),this.main.select(".".concat(M.selectedCircles).concat(this.getTargetSelectorSuffix(e.id))).selectAll(".".concat(M.selectedCircle,"-").concat(i)).transition().duration(100).attr("r",0).remove()},togglePoint:function togglePoint(t,e,i,n){this["".concat(t?"":"un","selectPoint")](e,i,n)},selectPath:function selectPath(t,e){var i=this,n=i.config;qc(n.data_onselected,i,e,t.node()),n.interaction_brighten&&t.transition().duration(100).style("fill",function(){return Object(D.rgb)(i.color(e)).brighter(.75)})},unselectPath:function unselectPath(t,e){var i=this,n=i.config;qc(n.data_onunselected,i,e,t.node()),n.interaction_brighten&&t.transition().duration(100).style("fill",function(){return i.color(e)})},togglePath:function togglePath(t,e,i,n){this["".concat(t?"":"un","selectPath")](e,i,n)},getToggle:function getToggle(t,e){return"path"===t.nodeName?this.togglePath:this.isStepType(e)?function(){}:this.togglePoint},toggleShape:function toggleShape(t,e,i){var n,a=this,r=a.config,o=Object(B.select)(t),s=o.classed(M.SELECTED),c=a.getToggle(t,e).bind(a);if(r.data_selection_enabled&&r.data_selection_isselectable(e)){if(!r.data_selection_multiple){var l=".".concat(M.shapes);r.data_selection_grouped&&(l+=a.getTargetSelectorSuffix(e.id)),a.main.selectAll(l).selectAll(".".concat(M.shape)).each(function(t,e){var i=Object(B.select)(this);i.classed(M.SELECTED)&&c(!1,(n=i).classed(M.SELECTED,!1),t,e)})}n&&n.node()===o.node()||(o.classed(M.SELECTED,!s),c(!s,o,e,i))}}}),yc(b.prototype,{initBrush:function initBrush(){var n=this,a=n.config,r=a.axis_rotated;n.brush=r?Object(f.brushY)():Object(f.brushX)();function b3(){n.redrawForBrush()}var i,t;n.brush.on("start",function(){"touch"===n.inputType&&n.hideTooltip(),b3()}).on("brush",b3).on("end",function(){i=n.x.orgDomain()}),n.brush.updateResize=function(){var e=this;t&&clearTimeout(t),t=setTimeout(function(){var t=e.getSelection();i&&Object(f.brushSelection)(t.node())&&e.move(t,i.map(n.subX.orgScale()))},0)},n.brush.update=function(){return 0===this.extent()()[1].filter(function(t){return isNaN(t)}).length&&n.context&&n.context.select(".".concat(M.brush)).call(this),this},n.brush.scale=function(t){var i=a.subchart_size_height||function(){var t=n.svg.select(".".concat(M.brush," .overlay")),e={width:0,height:0};return t.size()&&(e.width=+t.attr("width"),e.height=+t.attr("height")),e[r?"width":"height"]}(),e=n.getExtent();!e&&t.range?e=[[0,0],[t.range()[1],i]]:mc(e)&&(e=e.map(function(t,e){return[t,0<e?i:e]})),r&&e[1].reverse(),this.extent(e),this.update()},n.brush.getSelection=function(){return n.context?n.context.select(".".concat(M.brush)):Object(B.select)([])}},initSubchart:function initSubchart(){var t=this,e=t.config,i=e.subchart_show?"visible":"hidden",n="".concat(t.clipId,"-subchart"),a=t.getClipPath(n);t.clipIdForSubchart=n,t.appendClip(t.defs,n),t.initBrush(),t.context=t.svg.append("g").attr("transform",t.getTranslate("context"));var r=t.context;r.style("visibility",i),r.append("g").attr("clip-path",a).attr("class",M.chart),t.hasType("bar")&&r.select(".".concat(M.chart)).append("g").attr("class",M.chartBars),r.select(".".concat(M.chart)).append("g").attr("class",M.chartLines),r.append("g").attr("clip-path",a).attr("class",M.brush).call(t.brush),t.axes.subx=r.append("g").attr("class",M.axisX).attr("transform",t.getTranslate("subx")).attr("clip-path",e.axis_rotated?"":t.clipPathForXAxis).style("visibility",e.subchart_axis_x_show?i:"hidden")},updateTargetsForSubchart:function updateTargetsForSubchart(t){var e=this,i=e.context,n=e.config,a=e.classChartBar.bind(e),r=e.classBars.bind(e),o=e.classChartLine.bind(e),s=e.classLines.bind(e),c=e.classAreas.bind(e);if(n.subchart_show){var l=i.select(".".concat(M.chartBars)).selectAll(".".concat(M.chartBar)).data(t).attr("class",a);l.enter().append("g").style("opacity","0").attr("class",a).merge(l).append("g").attr("class",r);var u=i.select(".".concat(M.chartLines)).selectAll(".".concat(M.chartLine)).data(t).attr("class",o),d=u.enter().append("g").style("opacity","0").attr("class",o).merge(u);d.append("g").attr("class",s),e.hasType("area")&&d.append("g").attr("class",c),i.selectAll(".".concat(M.brush," rect")).attr(n.axis_rotated?"width":"height",n.axis_rotated?e.width2:e.height2)}},updateBarForSubchart:function updateBarForSubchart(t){var e=this;e.contextBar=e.context.selectAll(".".concat(M.bars)).selectAll(".".concat(M.bar)).data(e.barData.bind(e)),e.contextBar.exit().transition().duration(t).style("opacity","0").remove(),e.contextBar=e.contextBar.enter().append("path").attr("class",e.classBar.bind(e)).style("stroke","none").style("fill",e.color).merge(e.contextBar).style("opacity",e.initialOpacity.bind(e))},redrawBarForSubchart:function redrawBarForSubchart(t,e,i){(e?this.contextBar.transition(wc()).duration(i):this.contextBar).attr("d",t).style("opacity","1")},updateLineForSubchart:function updateLineForSubchart(t){var e=this;e.contextLine=e.context.selectAll(".".concat(M.lines)).selectAll(".".concat(M.line)).data(e.lineData.bind(e)),e.contextLine.exit().transition().duration(t).style("opacity","0").remove(),e.contextLine=e.contextLine.enter().append("path").attr("class",e.classLine.bind(e)).style("stroke",e.color).merge(e.contextLine).style("opacity",e.initialOpacity.bind(e))},redrawLineForSubchart:function redrawLineForSubchart(t,e,i){(e?this.contextLine.transition(wc()).duration(i):this.contextLine).attr("d",t).style("opacity","1")},updateAreaForSubchart:function updateAreaForSubchart(t){var e=this;e.contextArea=e.context.selectAll(".".concat(M.areas)).selectAll(".".concat(M.area)).data(e.lineData.bind(e)),e.contextArea.exit().transition().duration(t).style("opacity","0").remove(),e.contextArea=e.contextArea.enter().append("path").attr("class",e.classArea.bind(e)).style("fill",e.color).style("opacity",function(){return e.orgAreaOpacity=Object(B.select)(this).style("opacity"),"0"}).merge(e.contextArea).style("opacity","0")},redrawAreaForSubchart:function redrawAreaForSubchart(t,e,i){(e?this.contextArea.transition(wc()).duration(i):this.contextArea).attr("d",t).style("fill",this.color).style("opacity",this.orgAreaOpacity)},redrawSubchart:function redrawSubchart(t,n,a){var r=this,e=r.config;r.context.style("visibility",e.subchart_show?"visible":"hidden"),e.subchart_show&&(B.event&&"zoom"===B.event.type&&r.brush.update(),t&&(xc(r)||r.brush.update(),Object.keys(a.type).forEach(function(t){var e=zc(t),i=r["generateDraw".concat(e)](a.indices[t],!0);r["update".concat(e,"ForSubchart")](n),r["redraw".concat(e,"ForSubchart")](i,n,n)})))},redrawForBrush:function redrawForBrush(){var t=this;t.redraw({withTransition:!1,withY:t.config.zoom_rescale,withSubchart:!1,withUpdateXDomain:!0,withDimension:!1}),t.config.subchart_onbrush.call(t.api,t.x.orgDomain())},transformContext:function transformContext(t,e){var i;e&&e.axisSubX?i=e.axisSubX:(i=this.context.select(".".concat(M.axisX)),t&&(i=i.transition())),this.context.attr("transform",this.getTranslate("context")),i.attr("transform",this.getTranslate("subx"))},getExtent:function getExtent(){var e=this,t=e.config.axis_x_extent;return t&&(ac(t)?t=t(e.getXDomain(e.data.targets),e.subX):e.isTimeSeries()&&t.every(isNaN)&&(t=t.map(function(t){return e.subX(e.parseDate(t))}))),t}});var X=i(26);yc(b.prototype,{initZoom:function initZoom(){this.zoomScale=null,this.generateZoom(),this.initZoomBehaviour()},bindZoomEvent:function bindZoomEvent(t){var e=!(0<arguments.length&&void 0!==t)||t,i=this,n=i.config.zoom_enabled;i.redrawEventRect();var a=i.main.select(".".concat(M.eventRects));n&&e?i.bindZoomOnEventRect(a,n.type):!1===e&&(i.api.unzoom(),a.on(".zoom",null).on(".drag",null))},generateZoom:function generateZoom(){var a=this,r=a.config,t=Object(X.zoom)().duration(0).on("start",a.onZoomStart.bind(a)).on("zoom",a.onZoom.bind(a)).on("end",a.onZoomEnd.bind(a));t.orgScaleExtent=function(){var t=r.zoom_extent||[1,10];return[t[0],Math.max(a.getMaxDataCount()/t[1],t[1])]},t.updateScaleExtent=function(){var t=ic(a.x.orgDomain())/ic(a.getZoomDomain()),e=this.orgScaleExtent();return this.scaleExtent([e[0]*t,e[1]*t]),this},t.updateTransformScale=function(t){a.orgXScale&&a.orgXScale.range(a.x.range());var e=t[r.axis_rotated?"rescaleY":"rescaleX"](a.orgXScale||a.x),i=a.trimXDomain(e.domain()),n=r.zoom_rescale;e.domain(i,a.orgXDomain),a.zoomScale=a.getCustomizedScale(e),a.xAxis.scale(a.zoomScale),n&&(a.orgXScale||(a.orgXScale=a.x.copy()),a.x.domain(i))},a.zoom=t},onZoomStart:function onZoomStart(){var t=B.event.sourceEvent;t&&(this.zoom.startEvent=t,qc(this.config.zoom_onzoomstart,this.api,t))},onZoom:function onZoom(){var i=this,t=i.config,e=B.event;if(t.zoom_enabled&&e.sourceEvent&&0!==i.filterTargetsToShow(i.data.targets).length){var n="mousemove"===e.sourceEvent.type,a=e.sourceEvent.wheelDelta<0,r=e.transform;!n&&a&&i.x.domain().every(function(t,e){return t!==i.orgXDomain[e]})&&i.x.domain(i.orgXDomain),i.zoom.updateTransformScale(r),i.isCategorized()&&i.x.orgDomain()[0]===i.orgXDomain[0]&&i.x.domain([i.orgXDomain[0]-1e-10,i.x.orgDomain()[1]]),i.redraw({withTransition:!1,withY:t.zoom_rescale,withSubchart:!1,withEventRect:!1,withDimension:!1}),i.cancelClick=n,qc(t.zoom_onzoom,i.api,i.zoomScale.domain())}},onZoomEnd:function onZoomEnd(){var t=this,e=t.zoom.startEvent;!e||event&&e.clientX===event.clientX&&e.clientY===event.clientY||(t.redrawEventRect(),t.updateZoom(),qc(t.config.zoom_onzoomend,t.api,t[t.zoomScale?"zoomScale":"subX"].domain()))},getZoomDomain:function getZoomDomain(){var t=this.config,e=k()(this.orgXDomain,2),i=e[0],n=e[1];return ec(t.zoom_x_min)&&(i=Gc("min",[i,t.zoom_x_min])),ec(t.zoom_x_max)&&(n=Gc("max",[n,t.zoom_x_max])),[i,n]},updateZoom:function updateZoom(t){var e=this;if(e.zoomScale){var i=e.zoomScale.domain(),n=e.subX.domain(),a=(i[0]<=n[0]||i[0]-.015<=n[0])&&(n[1]<=i[1]||n[1]<=i[1]-.015);(t||a)&&(e.xAxis.scale(e.subX),e.x.domain(e.subX.orgDomain()),e.zoomScale=null)}},bindZoomOnEventRect:function bindZoomOnEventRect(t,e){var i="drag"===e?this.zoomBehaviour:this.zoom;t.call(i).on("dblclick.zoom",null)},initZoomBehaviour:function initZoomBehaviour(){var c=this,t=c.config.axis_rotated,l=0,u=0,d=null,g={axis:t?"y":"x",attr:t?"height":"width",index:t?1:0};c.zoomBehaviour=Object(A.drag)().clickDistance(4).on("start",function(){c.setDragStatus(!0),d=d||c.main.append("rect").attr("clip-path",c.clipPath).attr("class",M.zoomBrush).attr("width",t?c.width:0).attr("height",t?0:c.height),l=Object(B.mouse)(this)[g.index],u=l,d.attr(g.axis,l).attr(g.attr,0),c.onZoomStart()}).on("drag",function(){u=Object(B.mouse)(this)[g.index],d.attr(g.axis,Math.min(l,u)).attr(g.attr,Math.abs(u-l))}).on("end",function(){var t,e=c.zoomScale||c.x;if(c.setDragStatus(!1),d.attr(g.axis,0).attr(g.attr,0),u<l&&(l=(t=[u,l])[0],u=t[1]),l<0&&(u+=Math.abs(l),l=0),l!==u)c.api.zoom([l,u].map(function(t){return e.invert(t)})),c.onZoomEnd();else if(c.isMultipleX())c.clickHandlerForMultipleXS.bind(this)(c);else{var i=B.event.sourceEvent||B.event,n="clientX"in i?[i.clientX,i.clientY]:[i.x,i.y],a=k()(n,2),r=a[0],o=a[1],s=O.a.elementFromPoint(r,o);c.clickHandlerForSingleX.bind(s)(Object(B.select)(s).datum(),c)}})},setZoomResetButton:function setZoomResetButton(){var t=this,e=t.config,i=e.zoom_resetButton;i&&"drag"===e.zoom_enabled.type&&(t.zoom.resetBtn?t.zoom.resetBtn.style("display",null):t.zoom.resetBtn=t.selectChart.append("div").classed(M.button,!0).append("span").on("click",t.api.unzoom.bind(t)).classed(M.buttonZoomReset,!0).text(i.text||"Reset Zoom"))}});var F=["#1f77b4","#ff7f0e","#2ca02c","#d62728","#9467bd","#8c564b","#e377c2","#7f7f7f","#bcbd22","#17becf"];yc(b.prototype,{getColorFromCss:function getColorFromCss(){var t=O.a.body,e=t.__colorPattern__;if(!e){var i=O.a.createElement("span");i.className=M.colorPattern,i.style.display="none",t.appendChild(i);var n=O.b.getComputedStyle(i).backgroundImage;i.parentNode.removeChild(i),-1<n.indexOf(";")&&(e=n.replace(/url[^#]*|["'()]|(\s|%20)/g,"").split(";").map(function(t){return t.trim().replace(/[\"'\s]/g,"")}).filter(Boolean),t.__colorPattern__=e)}return e},generateColor:function generateColor(){var a=this,t=a.config,r=t.data_colors,o=t.data_color,s=[],c=lc(t.color_pattern)?t.color_pattern:Object(m.scaleOrdinal)(a.getColorFromCss()||F).range(),l=c;if(ac(t.color_tiles)){var u=t.color_tiles(),e=c.map(function(t,e){var i=t.replace(/[#\(\)\s,]/g,""),n="".concat(a.datetimeId,"-pattern-").concat(i,"-").concat(e);return function(t,e,i){var n=Object(B.select)(t.cloneNode(!0));return n.attr("id",i).insert("rect",":first-child").attr("width",n.attr("width")).attr("height",n.attr("height")).style("fill",e),{id:i,node:n.node()}}(u[e%u.length],t,n)});c=e.map(function(t){return"url(#".concat(t.id,")")}),a.patterns=e}return function(t){var e,i=t.id||t.data&&t.data.id||t,n=a.isTypeOf(i,["line","spline","step"])||!a.config.data_types[i];return ac(r[i])?e=r[i](t):r[i]?e=r[i]:(s.indexOf(i)<0&&s.push(i),e=n?l[s.indexOf(i)%l.length]:c[s.indexOf(i)%c.length],r[i]=e),ac(o)?o(e,t):e}},generateLevelColor:function generateLevelColor(){var t=this.config,r=t.color_pattern,e=t.color_threshold,o="value"===e.unit,s=e.max||100,c=e.values&&e.values.length?e.values:[];return lc(e)?function(t){for(var e=o?t:100*t/s,i=r[r.length-1],n=0,a=c.length;n<a;n++)if(e<=c[n]){i=r[n];break}return i}:null},setOverColor:function setOverColor(t,e){var i=this,n=i.config.color_onover,a=t?n:i.color;nc(a)?a=function(t){var e=t.id;return e in n?n[e]:i.color(e)}:bc(a)&&(a=function(){return n}),nc(e)?i.main.selectAll(".".concat(M.arc,"-").concat(e.id)).style("fill",a(e)):i.main.selectAll(".".concat(M.shape,"-").concat(e)).style("fill",a)}});function fd(t,e,i){var n=t.config,a="axis_".concat(e,"_tick_format");return(n[a]?n[a]:t.defaultValueFormat)(i)}yc(b.prototype,{getYFormat:function getYFormat(t){var n=this,a=n.yFormat,r=n.y2Format;return t&&!n.hasType("gauge")&&(a=n.defaultArcValueFormat,r=n.defaultArcValueFormat),function(t,e,i){return("y2"===n.axis.getId(i)?r:a).call(n,t,e)}},yFormat:function yFormat(t){return fd(this,"y",t)},y2Format:function y2Format(t){return fd(this,"y2",t)},defaultValueFormat:function defaultValueFormat(t){return _b(t)?+t:""},defaultArcValueFormat:function defaultArcValueFormat(t,e){return"".concat((100*e).toFixed(1),"%")},dataLabelFormat:function dataLabelFormat(t){function J6(t){return _b(t)?+t:""}var e=this.config.data_labels,i=J6;return ac(e.format)?i=e.format:jc(e.format)&&(i=e.format[t]?!0===e.format[t]?J6:e.format[t]:function(){return""}),i}}),yc(b.prototype,{addCache:function addCache(t,e,i){var n=!!(2<arguments.length&&void 0!==i)&&i;this.cache[t]=n?this.cloneTarget(e):e},removeCache:function removeCache(t){var e=this;Ac(t).forEach(function(t){return delete e.cache[t]})},getCache:function getCache(t,e){if(!(1<arguments.length&&void 0!==e&&e))return this.cache[t]||null;for(var i,n=[],a=0;i=t[a];a++)i in this.cache&&n.push(this.cloneTarget(this.cache[i]));return n},resetCache:function resetCache(t){for(var e in this.cache)(t||/^\$/.test(e))&&(this.cache[e]=null)}}),yc(b.prototype,{generateClass:function generateClass(t,e){return" ".concat(t," ").concat(t+this.getTargetSelectorSuffix(e))},classText:function classText(t){return this.generateClass(M.text,t.index)},classTexts:function classTexts(t){return this.generateClass(M.texts,t.id)},classShape:function classShape(t){return this.generateClass(M.shape,t.index)},classShapes:function classShapes(t){return this.generateClass(M.shapes,t.id)},generateExtraLineClass:function generateExtraLineClass(){var i=this.config.line_classes||[],n=[];return function(t){var e=t.id||t.data&&t.data.id||t;return n.indexOf(e)<0&&n.push(e),i[n.indexOf(e)%i.length]}},classLine:function classLine(t){return this.classShape(t)+this.generateClass(M.line,t.id)},classLines:function classLines(t){return this.classShapes(t)+this.generateClass(M.lines,t.id)},classCircle:function classCircle(t){return this.classShape(t)+this.generateClass(M.circle,t.index)},classCircles:function classCircles(t){return this.classShapes(t)+this.generateClass(M.circles,t.id)},classBar:function classBar(t){return this.classShape(t)+this.generateClass(M.bar,t.index)},classBars:function classBars(t){return this.classShapes(t)+this.generateClass(M.bars,t.id)},classArc:function classArc(t){return this.classShape(t.data)+this.generateClass(M.arc,t.data.id)},classArcs:function classArcs(t){return this.classShapes(t.data)+this.generateClass(M.arcs,t.data.id)},classArea:function classArea(t){return this.classShape(t)+this.generateClass(M.area,t.id)},classAreas:function classAreas(t){return this.classShapes(t)+this.generateClass(M.areas,t.id)},classRegion:function classRegion(t,e){return"".concat(this.generateClass(M.region,e)," ").concat("class"in t?t.class:"")},classEvent:function classEvent(t){return this.generateClass(M.eventRect,t.index)},classTarget:function classTarget(t){var e=this.config.data_classes[t],i="";return e&&(i=" ".concat(M.target,"-").concat(e)),this.generateClass(M.target,t)+i},classFocus:function classFocus(t){return this.classFocused(t)+this.classDefocused(t)},classFocused:function classFocused(t){return" ".concat(0<=this.focusedTargetIds.indexOf(t.id)?M.focused:"")},classDefocused:function classDefocused(t){return" ".concat(0<=this.defocusedTargetIds.indexOf(t.id)?M.defocused:"")},classChartText:function classChartText(t){return M.chartText+this.classTarget(t.id)},classChartLine:function classChartLine(t){return M.chartLine+this.classTarget(t.id)},classChartBar:function classChartBar(t){return M.chartBar+this.classTarget(t.id)},classChartArc:function classChartArc(t){return M.chartArc+this.classTarget(t.data.id)},classChartRadar:function classChartRadar(t){return M.chartRadar+this.classTarget(t.id)},getTargetSelectorSuffix:function getTargetSelectorSuffix(t){return t||0===t?"-".concat(t).replace(/[\s?!@#$%^&*()_=+,.<>'":;\[\]\/|~`{}\\]/g,"-"):""},selectorTarget:function selectorTarget(t,e){return"".concat(e||"",".").concat(M.target+this.getTargetSelectorSuffix(t))},selectorTargets:function selectorTargets(t,e){var i=this,n=t||[];return n.length?n.map(function(t){return i.selectorTarget(t,e)}):null},selectorLegend:function selectorLegend(t){return".".concat(M.legendItem+this.getTargetSelectorSuffix(t))},selectorLegends:function selectorLegends(t){var e=this;return t&&t.length?t.map(function(t){return e.selectorLegend(t)}):null}}),yc(Rc.prototype,{focus:function focus(t){var e=this.internal,i=e.mapToTargetIds(t),n=e.svg.selectAll(e.selectorTargets(i.filter(e.isTargetToShow,e)));this.revert(),this.defocus(),n.classed(M.focused,!0).classed(M.defocused,!1),e.hasArcType()&&e.expandArc(i),e.toggleFocusLegend(i,!0),e.focusedTargetIds=i,e.defocusedTargetIds=e.defocusedTargetIds.filter(function(t){return i.indexOf(t)<0})},defocus:function defocus(t){var e=this.internal,i=e.mapToTargetIds(t);e.svg.selectAll(e.selectorTargets(i.filter(e.isTargetToShow,e))).classed(M.focused,!1).classed(M.defocused,!0),e.hasArcType()&&e.unexpandArc(i),e.toggleFocusLegend(i,!1),e.focusedTargetIds=e.focusedTargetIds.filter(function(t){return i.indexOf(t)<0}),e.defocusedTargetIds=i},revert:function revert(t){var e=this.internal,i=e.mapToTargetIds(t);e.svg.selectAll(e.selectorTargets(i)).classed(M.focused,!1).classed(M.defocused,!1),e.hasArcType()&&e.unexpandArc(i),e.config.legend_show&&(e.showLegend(i.filter(e.isLegendToShow.bind(e))),e.legend.selectAll(e.selectorLegends(i)).filter(function(){return Object(B.select)(this).classed(M.legendItemFocused)}).classed(M.legendItemFocused,!1)),e.focusedTargetIds=[],e.defocusedTargetIds=[]}}),yc(Rc.prototype,{_showHide:function _showHide(t,e,i){var n=this.internal,a=n.mapToTargetIds(e);n["".concat(t?"remove":"add","HiddenTargetIds")](a);var r=n.svg.selectAll(n.selectorTargets(a)),o=t?"1":"0";r.transition().style("opacity",o,"important").call(n.endall,function(){r.style("opacity",null).style("opacity",o)}),i.withLegend&&n["".concat(t?"show":"hide","Legend")](a),n.redraw({withUpdateOrgXDomain:!0,withUpdateXDomain:!0,withLegend:!0})},show:function show(t,e){var i=1<arguments.length&&void 0!==e?e:{};this._showHide(!0,t,i)},hide:function hide(t,e){var i=1<arguments.length&&void 0!==e?e:{};this._showHide(!1,t,i)},toggle:function toggle(t,e){var i=this,n=1<arguments.length&&void 0!==e?e:{},a=this.internal,r={show:[],hide:[]};a.mapToTargetIds(t).forEach(function(t){return r[a.isTargetToShow(t)?"hide":"show"].push(t)}),r.show.length&&this.show(r.show,n),r.hide.length&&setTimeout(function(){return i.hide(r.hide,n)},0)}});function hd(t){var e,i=this.internal,n=t;if(i.config.zoom_enabled&&n&&function(t,e){var i=k()(e,2),n=i[0],a=i[1];return t.every(function(t,e){return 0===e?n<=t:t<=a})}(n,i.getZoomDomain())){if(i.isTimeSeries()&&(n=n.map(function(t){return i.parseDate(t)})),i.config.subchart_show){var a=i.zoomScale||i.x;i.brush.getSelection().call(i.brush.move,[a(n[0]),a(n[1])]),e=n}else i.x.domain(n),i.zoomScale=i.x,i.xAxis.scale(i.zoomScale),e=i.zoomScale.orgDomain();i.redraw({withTransition:!0,withY:i.config.zoom_rescale,withDimension:!1}),i.setZoomResetButton(),qc(i.config.zoom_onzoom,e)}else e=i.zoomScale?i.zoomScale.domain():i.x.orgDomain();return e}yc(hd,{enable:function enable(t){var e=0<arguments.length&&void 0!==t?t:"wheel",i=this.internal,n=i.config,a=e;e&&(a=bc(e)&&/^(drag|wheel)$/.test(e)?{type:e}:e),n.zoom_enabled=a,i.zoom?!1===e&&i.bindZoomEvent(!1):(i.initZoom(),i.bindZoomEvent()),i.updateAndRedraw()},max:function max(t){var e=this.internal,i=e.config;return 0!==t&&!t||(i.zoom_x_max=Gc("max",[e.orgXDomain[1],t])),i.zoom_x_max},min:function min(t){var e=this.internal,i=e.config;return 0!==t&&!t||(i.zoom_x_min=Gc("min",[e.orgXDomain[0],t])),i.zoom_x_min},range:function range(t){var e=this.zoom;if(nc(t)){var i=t.min,n=t.max;ec(i)&&e.min(i),ec(n)&&e.max(n)}return{min:e.min(),max:e.max()}}}),yc(Rc.prototype,{zoom:hd,unzoom:function unzoom(){var t=this.internal,e=t.config;if(t.zoomScale){e.subchart_show?t.brush.getSelection().call(t.brush.move,null):t.zoom.updateTransformScale(X.zoomIdentity),t.updateZoom(!0),t.zoom.resetBtn&&t.zoom.resetBtn.style("display","none");var i=t.main.select(".".concat(M.eventRects));Object(X.zoomTransform)(i.node())!==X.zoomIdentity&&t.zoom.transform(i,X.zoomIdentity),t.redraw({withTransition:!0,withUpdateXDomain:!0,withUpdateOrgXDomain:!0,withY:e.zoom_rescale})}}}),yc(Rc.prototype,{load:function load(e){var t=this.internal,i=t.config;e.xs&&t.addXs(e.xs),"names"in e&&this.data.names(e.names),"classes"in e&&Object.keys(e.classes).forEach(function(t){i.data_classes[t]=e.classes[t]}),"categories"in e&&t.isCategorized()&&(i.axis_x_categories=e.categories),"axes"in e&&Object.keys(e.axes).forEach(function(t){i.data_axes[t]=e.axes[t]}),"colors"in e&&Object.keys(e.colors).forEach(function(t){i.data_colors[t]=e.colors[t]}),"unload"in e&&!1!==e.unload?t.unload(t.mapToTargetIds(!0===e.unload?null:e.unload),function(){return t.loadFromArgs(e)}):t.loadFromArgs(e)},unload:function unload(t){var e=this.internal,i=t||{};mc(i)?i={ids:i}:bc(i)&&(i={ids:[i]});var n=e.mapToTargetIds(i.ids);e.unload(n,function(){e.redraw({withUpdateOrgXDomain:!0,withUpdateXDomain:!0,withLegend:!0}),e.removeCache(n),i.done&&i.done()})}});var Y=i(27);yc(Rc.prototype,{flow:function flow(t){var e,i,n,a,r=this.internal,o=0,s=0;if((t.json||t.rows||t.columns)&&(e=r.convertData(t)),e&&r.isTabVisible()){var c=[],l=r.getMaxDataCount(),u=r.convertDataToTargets(e,!0);r.data.targets.forEach(function(t){for(var e=!1,i=0;i<u.length;i++)if(t.id===u[i].id){e=!0,t.values[t.values.length-1]&&(s=t.values[t.values.length-1].index+1),o=u[i].values.length;for(var n=0;n<o;n++)u[i].values[n].index=s+n,r.isTimeSeries()||(u[i].values[n].x=s+n);t.values=t.values.concat(u[i].values),u.splice(i,1);break}e||c.push(t.id)}),r.data.targets.forEach(function(t){for(var e=0;e<c.length;e++)if(t.id===c[e]){s=t.values[t.values.length-1].index+1;for(var i=0;i<o;i++)t.values.push({id:t.id,index:s+i,x:r.isTimeSeries()?r.getOtherTargetX(s+i):s+i,value:null})}}),r.data.targets.length&&u.forEach(function(t){for(var e=[],i=r.data.targets[0].values[0].index;i<s;i++)e.push({id:t.id,index:i,x:r.isTimeSeries()?r.getOtherTargetX(i):i,value:null});t.values.forEach(function(t){t.index+=s,r.isTimeSeries()||(t.x+=s)}),t.values=e.concat(t.values)}),r.data.targets=r.data.targets.concat(u);var d=r.data.targets[0],g=d.values[0];ec(t.to)?(o=0,a=r.isTimeSeries()?r.parseDate(t.to):t.to,d.values.forEach(function(t){t.x<a&&o++})):ec(t.length)&&(o=t.length),l?1===l&&r.isTimeSeries()&&(n=(d.values[d.values.length-1].x-g.x)/2,i=[new Date(+g.x-n),new Date(+g.x+n)]):(n=r.isTimeSeries()?1<d.values.length?d.values[d.values.length-1].x-g.x:g.x-r.getXDomain(r.data.targets)[0]:1,i=[g.x-n,g.x]),i&&r.updateXDomain(null,!0,!0,!1,i),r.updateTargets(r.data.targets),r.redraw({flow:{index:g.index,length:o,duration:_b(t.duration)?t.duration:r.config.transition_duration,done:t.done,orgDataCount:l},withLegend:!0,withTransition:1<l,withTrimXDomain:!1,withUpdateXAxis:!0})}}}),yc(b.prototype,{generateFlow:function generateFlow(I){var E=this,z=E.config;return function(){var t,e,i=I.targets,n=I.flow,a=I.shape.type,r=a.bar,o=a.line,s=a.area,c=I.shape.pos,l=c.cx,u=c.cy,d=c.xForText,g=c.yForText,h=I.xv,f=I.duration,p=n.index,x=n.length,v=E.getValueOnIndex(E.data.targets[0].values,p),m=E.getValueOnIndex(E.data.targets[0].values,p+x),_=E.x.domain(),y=n.duration||f,b=n.done||function(){},T=E.generateWait(),A=E.xgrid||Object(B.selectAll)([]),w=E.xgridLines||Object(B.selectAll)([]),L=E.mainRegion||Object(B.selectAll)([]),S=E.mainText||Object(B.selectAll)([]),k=E.mainBar||Object(B.selectAll)([]),C=E.mainLine||Object(B.selectAll)([]),O=E.mainArea||Object(B.selectAll)([]),R=E.mainCircle||Object(B.selectAll)([]);E.flowing=!0,E.data.targets.forEach(function(t){t.values.splice(0,x)});var D=E.updateXDomain(i,!0,!0);E.updateXGrid&&E.updateXGrid(!0),t=n.orgDataCount?1===n.orgDataCount||(v&&v.x)===(m&&m.x)?E.x(_[0])-E.x(D[0]):E.isTimeSeries()?E.x(_[0])-E.x(D[0]):E.x(v.x)-E.x(m.x):1===E.data.targets[0].values.length?E.isTimeSeries()?(v=E.getValueOnIndex(E.data.targets[0].values,0),m=E.getValueOnIndex(E.data.targets[0].values,E.data.targets[0].values.length-1),E.x(v.x)-E.x(m.x)):ic(D)/2:E.x(_[0])-E.x(D[0]),e=ic(_)/ic(D);var X="translate(".concat(t,",0) scale(").concat(e,",1)");E.hideXGridFocus();var F=Object(P.transition)().ease(Y.easeLinear).duration(y);T.add([E.axes.x.transition(F).call(function(t){return E.xAxis.setTransition(F).create(t)}),k.transition(F).attr("transform",X),C.transition(F).attr("transform",X),O.transition(F).attr("transform",X),R.transition(F).attr("transform",X),S.transition(F).attr("transform",X),L.filter(E.isRegionOnX).transition(F).attr("transform",X),A.transition(F).attr("transform",X),w.transition(F).attr("transform",X)]),F.call(T,function(){if(x){for(var e={shapes:[],texts:[],eventRects:[]},t=0;t<x;t++)e.shapes.push(".".concat(M.shape,"-").concat(t)),e.texts.push(".".concat(M.text,"-").concat(t)),e.eventRects.push(".".concat(M.eventRect,"-").concat(t));["shapes","texts","eventRects"].forEach(function(t){E.svg.selectAll(".".concat(M[t])).selectAll(e[t]).remove()}),E.svg.select(".".concat(M.xgrid)).remove()}if(A.size()&&A.attr("transform",null).attr(E.xgridAttr),w.attr("transform",null),w.select("line").attr("x1",z.axis_rotated?0:h).attr("x2",z.axis_rotated?E.width:h),w.select("text").attr("x",z.axis_rotated?E.width:0).attr("y",h),k.attr("transform",null).attr("d",r),C.attr("transform",null).attr("d",o),O.attr("transform",null).attr("d",s),R.attr("transform",null),E.isCirclePoint())R.attr("cx",l).attr("cy",u);else{R.attr("x",function(t){return l(t)-z.point_r}).attr("y",function(t){return u(t)-z.point_r}).attr("cx",l).attr("cy",u)}S.attr("transform",null).attr("x",d).attr("y",g).style("fill-opacity",E.opacityForText.bind(E)),L.attr("transform",null),L.select("rect").filter(E.isRegionOnX).attr("x",E.regionX.bind(E)).attr("width",E.regionWidth.bind(E)),z.interaction_enabled&&E.redrawEventRect(),b(),E.flowing=!1})}}}),yc(Rc.prototype,{selected:function selected(t){var e=this.internal,i=[];return e.main.selectAll(".".concat(M.shapes+e.getTargetSelectorSuffix(t))).selectAll(".".concat(M.shape)).filter(function(){return Object(B.select)(this).classed(M.SELECTED)}).each(function(t){return i.push(t)}),i},select:function select(c,l,u){var d=this.internal,g=d.config;g.data_selection_enabled&&d.main.selectAll(".".concat(M.shapes)).selectAll(".".concat(M.shape)).each(function(t,e){var i=Object(B.select)(this),n=t.data?t.data.id:t.id,a=d.getToggle(this,t).bind(d),r=g.data_selection_grouped||!c||0<=c.indexOf(n),o=!l||0<=l.indexOf(e),s=i.classed(M.SELECTED);i.classed(M.line)||i.classed(M.area)||(r&&o?g.data_selection_isselectable(t)&&!s&&a(!0,i.classed(M.SELECTED,!0),t,e):ec(u)&&u&&s&&a(!1,i.classed(M.SELECTED,!1),t,e))})},unselect:function unselect(c,l){var u=this.internal,d=u.config;d.data_selection_enabled&&u.main.selectAll(".".concat(M.shapes)).selectAll(".".concat(M.shape)).each(function(t,e){var i=Object(B.select)(this),n=t.data?t.data.id:t.id,a=u.getToggle(this,t).bind(u),r=d.data_selection_grouped||!c||0<=c.indexOf(n),o=!l||0<=l.indexOf(e),s=i.classed(M.SELECTED);i.classed(M.line)||i.classed(M.area)||r&&o&&d.data_selection_isselectable(t)&&s&&a(!1,i.classed(M.SELECTED,!1),t,e)})}}),yc(Rc.prototype,{transform:function transform(t,e){var i=this.internal,n=0<=["pie","donut"].indexOf(t)?{withTransform:!0}:null;(function transformTo(t,e,i){var n=i||{withTransitionForAxis:!this.hasArcType()};n.withTransitionForTransform=!1,this.transiting=!1,this.setTargetType(t,e),this.updateTargets(this.data.targets),this.updateAndRedraw(n)}).bind(i)(e,t,n)}}),yc(Rc.prototype,{groups:function groups(t){var e=this.internal,i=e.config;return dc(t)||(i.data_groups=t,e.redraw()),i.data_groups}});function jd(t){var e=this.internal,i=e.config;return t&&(i.grid_x_lines=t,e.redrawWithoutRescale()),i.grid_x_lines}yc(jd,{add:function add(t){return this.xgrids(this.internal.config.grid_x_lines.concat(t||[]))},remove:function remove(t){this.internal.removeGridLines(t,!0)}});function kd(t){var e=this.internal,i=e.config;return t&&(i.grid_y_lines=t,e.redrawWithoutRescale()),i.grid_y_lines}yc(kd,{add:function add(t){return this.ygrids(this.internal.config.grid_y_lines.concat(t||[]))},remove:function remove(t){this.internal.removeGridLines(t,!1)}}),yc(Rc.prototype,{xgrids:jd,ygrids:kd});function ld(t){var e=this.internal,i=e.config;return t?(i.regions=t,e.redrawWithoutRescale(),t):i.regions}yc(ld,{add:function add(t){var e=this.internal,i=e.config;return t&&(i.regions=i.regions.concat(t),e.redrawWithoutRescale()),i.regions},remove:function remove(t){var e=this.internal,i=e.config,n=t||{},a=oc(n,"duration",i.transition_duration),r=oc(n,"classes",[M.region]),o=e.main.select(".".concat(M.regions)).selectAll(r.map(function(t){return".".concat(t)}));return(a?o.transition().duration(a):o).style("opacity","0").remove(),o=i.regions,Object.keys(n).length?(o=o.filter(function(t){var e=!1;return!t.class||(t.class.split(" ").forEach(function(t){0<=r.indexOf(t)&&(e=!0)}),!e)}),i.regions=o):i.regions=[],o}}),yc(Rc.prototype,{regions:ld});function md(e){var t=this.internal.data.targets;return dc(e)?t:t.filter(function(t){return 0<=e.indexOf(t.id)})}yc(md,{shown:function shown(t){return this.internal.filterTargetsToShow(this.data(t))},values:function(t){var i=!(1<arguments.length&&void 0!==arguments[1])||arguments[1],n=null;if(t){var e=this.data(t);e&&mc(e)&&(n=[],e.forEach(function(t){var e=t.values.map(function(t){return t.value});i?n=n.concat(e):n.push(e)}))}return n},names:function names(t){return this.internal.clearLegendItemTextBoxCache(),this.internal.updateDataAttributes("names",t)},colors:function colors(t){return this.internal.updateDataAttributes("colors",t)},axes:function axes(t){return this.internal.updateDataAttributes("axes",t)},min:function min(){return this.internal.getMinMaxData().min},max:function max(){return this.internal.getMinMaxData().max}}),yc(Rc.prototype,{data:md}),yc(Rc.prototype,{category:function category(t,e){var i=this.internal,n=i.config;return 1<arguments.length&&(n.axis_x_categories[t]=e,i.redraw()),n.axis_x_categories[t]},categories:function categories(t){var e=this.internal,i=e.config;return arguments.length&&(i.axis_x_categories=t,e.redraw()),i.axis_x_categories}}),yc(Rc.prototype,{color:function color(t){return this.internal.color(t)}}),yc(Rc.prototype,{x:function x(t){var e=this.internal,i=e.isCustomX()&&e.isCategorized();return mc(t)&&(i?e.api.categories(t):(e.updateTargetX(e.data.targets,t),e.redraw({withUpdateOrgXDomain:!0,withUpdateXDomain:!0}))),i?e.api.categories():e.data.xs},xs:function xs(t){var e=this.internal;return nc(t)&&(e.updateTargetXs(e.data.targets,t),e.redraw({withUpdateOrgXDomain:!0,withUpdateXDomain:!0})),e.data.xs}});function nd(t,e,i){var n=t.config,a="axis_x_".concat(e),r="axis_y_".concat(e),o="axis_y2_".concat(e);ec(i)&&(jc(i)?(_b(i.x)&&(n[a]=i.x),_b(i.y)&&(n[r]=i.y),_b(i.y2)&&(n[o]=i.y2)):(n[r]=i,n[o]=i),t.redraw({withUpdateOrgXDomain:!0,withUpdateXDomain:!0}))}function od(t,e){var i=t.config;return{x:i["axis_x_".concat(e)],y:i["axis_y_".concat(e)],y2:i["axis_y2_".concat(e)]}}var I=yc(function(){},{labels:function labels(e){var i=this.internal;arguments.length&&(Object.keys(e).forEach(function(t){i.axis.setLabelText(t,e[t])}),i.axis.updateLabels())},min:function min(t){var e=this.internal;return arguments.length?nd(e,"min",t):od(e,"min")},max:function max(t){var e=this.internal;return arguments.length?nd(e,"max",t):od(e,"max")},range:function range(t){var e=this.axis;if(!arguments.length)return{max:e.max(),min:e.min()};ec(t.max)&&e.max(t.max),ec(t.min)&&e.min(t.min)}});yc(Rc.prototype,{axis:I});var E=yc(function(){},{show:function show(t){var e=this.internal;e.showLegend(e.mapToTargetIds(t)),e.updateAndRedraw({withLegend:!0})},hide:function hide(t){var e=this.internal;e.hideLegend(e.mapToTargetIds(t)),e.updateAndRedraw({withLegend:!0})}});yc(Rc.prototype,{legend:E}),yc(Rc.prototype,{resize:function resize(t){var e=this.internal.config;e.size_width=t?t.width:null,e.size_height=t?t.height:null,this.flush(!1,!0)},flush:function flush(t,e){var i=this.internal;e?i.brush&&i.brush.updateResize():i.axis&&i.axis.setOrient(),i.zoomScale=null,t?i.redraw({withTransform:!0,withUpdateXDomain:!0,withUpdateOrgXDomain:!0,withLegend:!0}):i.updateAndRedraw({withLegend:!0,withTransition:!1,withTransitionForTransform:!1})},destroy:function destroy(){var e=this,i=this.internal;return lc(i)&&(i.callPluginHook("$willDestroy"),i.charts.splice(i.charts.indexOf(this),1),i.svg.select("*").interrupt(),ec(i.resizeTimeout)&&O.b.clearTimeout(i.resizeTimeout),O.b.removeEventListener("resize",i.resizeFunction),i.selectChart.classed("bb",!1).html(""),Object.keys(this).forEach(function(t){"internal"===t&&Object.keys(i).forEach(function(t){i[t]=null}),e[t]=null,delete e[t]})),null},config:function config(t,e,i){var n,a=this.internal,r=t&&t.replace(/\./g,"_");return r in a.config&&(ec(e)?(n=a.config[r]=e,i&&this.flush()):n=a.config[r]),n}});var j=yc(function(){},{show:function show(t){var e,i,n=0<arguments.length&&void 0!==t?t:{},a=this.internal;if(n.mouse&&(i=n.mouse),n.data){var r=a.getYScale(n.data.id)(n.data.value);a.isMultipleX()?i=[a.x(n.data.x),r]:(a.config.tooltip_grouped||(i=[0,r]),e=_b(n.data.index)?n.data.index:a.getIndexByX(n.data.x))}else ec(n.x)?e=a.getIndexByX(n.x):ec(n.index)&&(e=n.index);("mouse"===a.inputType?["mouseover","mousemove"]:["touchstart"]).forEach(function(t){a.dispatchEvent(t,e,i)})},hide:function hide(){var t=this.internal;t.hideTooltip(!0),t.hideXGridFocus(),t.unexpandCircles(),t.unexpandBars()}});yc(Rc.prototype,{tooltip:j});function td(t,e){var i=new XMLSerializer,n=t.cloneNode(!0),a=function(t){var i=[];return t.forEach(function(e){try{e.cssRules&&e.cssRules.length&&(i=i.concat(Ac(e.cssRules)))}catch(t){console.error("Error while reading rules from ".concat(e.href,": ").concat(t.toString()))}}),i}(Ac(O.a.styleSheets)).filter(function(t){return t.cssText}).map(function(t){return t.cssText});n.setAttribute("xmlns",B.namespaces.xhtml);var r=i.serializeToString(n),o=O.a.createElement("style");o.appendChild(O.a.createTextNode(a.join("\n")));var s=i.serializeToString(o),c='<svg xmlns="'.concat(B.namespaces.svg,'" width="').concat(e.width,'" height="').concat(e.height,'">\n\t\t\t<foreignObject width="100%" height="100%">\n\t\t\t\t').concat(s,"\n\t\t\t\t").concat(r.replace(/(url\()[^#]+/g,"$1"),"\n\t\t\t</foreignObject></svg>").replace("/\n/g","%0A");return"data:image/svg+xml;base64,".concat(function(t){return btoa(encodeURIComponent(t).replace(/%([0-9A-F]{2})/g,function(t,e){return String.fromCharCode("0x".concat(e))}))}(c))}yc(Rc.prototype,{export:function _export(i,n){var t=this.internal,a={width:t.currentWidth,height:t.currentHeight},e=td(this.element,a);if(ac(n)){var r=new Image;r.crosssOrigin="Anonymous",r.onload=function(){var t=O.a.createElement("canvas"),e=t.getContext("2d");t.width=a.width,t.height=a.height,e.drawImage(r,0,0),n(t.toDataURL(i))},r.src=e}return e}}),i.d(e,"bb",function(){return N});var V={},N={version:"1.10.0",generate:function generate(t){var e=p({},V,t),i=new Rc(e);return i.internal.charts=this.instance,this.instance.push(i),i},defaults:function defaults(t){return nc(t)&&(V=t),V},instance:[],plugin:{},chart:{fn:Rc.prototype,internal:{fn:b.prototype,axis:{fn:y.prototype}}}};e.default=N}],__webpack_require__.c=x,__webpack_require__.d=function(t,e,i){__webpack_require__.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:i})},__webpack_require__.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},__webpack_require__.t=function(e,t){if(1&t&&(e=__webpack_require__(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var i=Object.create(null);if(__webpack_require__.r(i),Object.defineProperty(i,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var n in e)__webpack_require__.d(i,n,function(t){return e[t]}.bind(null,n));return i},__webpack_require__.n=function(t){var e=t&&t.__esModule?function getDefault(){return t.default}:function getModuleExports(){return t};return __webpack_require__.d(e,"a",e),e},__webpack_require__.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},__webpack_require__.p="",__webpack_require__(__webpack_require__.s=0);function __webpack_require__(t){if(x[t])return x[t].exports;var e=x[t]={i:t,l:!1,exports:{}};return p[t].call(e.exports,e,e.exports,__webpack_require__),e.l=!0,e.exports}var p,x});
//# sourceMappingURL=billboard.min.js.map